---
sidebar_position: 83
title: 基础认证 (Basic Auth)
description: 通过配置用户名和密码，为您的服务添加简单而有效的 HTTP Basic Authentication 访问控制，并内置暴力破解防御机制。
---

# 基础认证 (Basic Auth) 插件

`basic-auth` 插件是一个请求阶段的认证插件，它通过 HTTP Basic Authentication 协议来保护您的上游服务，要求客户端必须提供有效的用户名和密码才能访问。

## 功能简介

HTTP Basic Authentication 是一种简单、通用的认证方案，被所有浏览器和 HTTP 客户端原生支持。当启用此插件后：
1.  未认证的请求将被 `Pingap` **拦截**，并返回 `401 Unauthorized` 状态码。
2.  浏览器在收到 `401` 响应后，会自动弹出一个登录对话框，提示用户输入用户名和密码。
3.  用户凭证经过 Base64 编码后，通过 `Authorization` 请求头发送。
4.  插件会验证收到的凭证是否与预设的列表匹配。

此外，该插件还内置了**安全增强功能**，如暴力破解防御和凭证隔离。

## 使用场景

* **内部系统保护**：快速为内部管理后台、监控面板（如 Grafana, Prometheus）等不希望公开访问的系统添加一层密码保护。
* **开发/测试环境隔离**：在将应用部署到生产环境之前，使用 Basic Auth 保护您的开发和测试环境，只允许团队成员访问。
* **简单的 API 保护**：对于一些内部或低安全要求的 API，使用 Basic Auth 作为一道简单的准入门槛。

## 配置参数

在 `plugins.basic-auth.toml` 文件中进行配置。

| 参数               | 类型             | 是否必需 | 默认值  | 说明                                                                                                                           |
| :----------------- | :--------------- | :------- | :------ | :----------------------------------------------------------------------------------------------------------------------------- |
| `authorizations`   | Array of Strings | 是       | -       | 一组**预先计算好的 Base64 字符串**。每个字符串对应一个有效的“用户名:密码”组合，多个认证参数以`,`分隔。                         |
| `hide_credentials` | Boolean          | 否       | `false` | 认证成功后，是否从请求中**移除 `Authorization` 头**。**强烈建议开启 (`true`)**，以防止用户凭证泄露给上游服务。                 |
| `delay`            | String           | 否       | -       | 对**无效**的登录尝试引入一个延迟，例如 `"500ms"` 或 `"1s"`。这是一个有效的**暴力破解防御**机制，可以显著增加攻击者的攻击成本。 |

### 如何生成 `authorizations`

您需要将 `username:password` 这个字符串（注意中间的冒号）进行 Base64 编码。

**Linux / macOS 示例:**

```bash
# 为 "admin:p@ssw0rd123" 生成 Base64 字符串
echo -n "admin:p@ssw0rd123" | base64
```