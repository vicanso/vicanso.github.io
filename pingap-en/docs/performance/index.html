<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-performance" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">性能测试 | Pingap</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://vicanso.github.io/pingap-en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://vicanso.github.io/pingap-en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://vicanso.github.io/pingap-en/docs/performance"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="性能测试 | Pingap"><meta data-rh="true" name="description" content="Performance testing is a complex process with scenarios that heavily rely on various configurations, thus the following are only simple test scenarios."><meta data-rh="true" property="og:description" content="Performance testing is a complex process with scenarios that heavily rely on various configurations, thus the following are only simple test scenarios."><link data-rh="true" rel="icon" href="/pingap-en/img/pingap.png"><link data-rh="true" rel="canonical" href="https://vicanso.github.io/pingap-en/docs/performance"><link data-rh="true" rel="alternate" href="https://vicanso.github.io/pingap-en/docs/performance" hreflang="en"><link data-rh="true" rel="alternate" href="https://vicanso.github.io/pingap-en/docs/performance" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QJ6H7139JP-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"性能测试","item":"https://vicanso.github.io/pingap-en/docs/performance"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="Pingap" href="/pingap-en/opensearch.xml"><link rel="stylesheet" href="/pingap-en/assets/css/styles.975a7111.css">
<script src="/pingap-en/assets/js/runtime~main.4c8b23f2.js" defer="defer"></script>
<script src="/pingap-en/assets/js/main.4bdbaeda.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pingap-en/"><div class="navbar__logo"><img src="/pingap-en/img/pingap.png" alt="Pingap Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pingap-en/img/pingap.png" alt="Pingap Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Pingap</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pingap-en/docs/introduction">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="http://pingap.io/pingap-zh/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">中文<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/vicanso/pingap" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/introduction">What is Pingap?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/getting_started">Getting Started Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/argument">Command-Line Arguments and Environment Variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/config">Detailed Configuration Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/log">Access Log Formatting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/certificate">Easily Manage HTTPS Certificates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/plugin">Plugin System</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pingap-en/docs/plugins/">Plugin Overview and Index</a><button aria-label="Expand sidebar category &#x27;Plugin Overview and Index&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/docker">Deploying Pingap with Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pingap-en/docs/question">Frequently Asked Questions (FAQ)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/pingap-en/docs/performance">性能测试</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pingap-en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">性能测试</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>性能测试</h1></header>
<p>Performance testing is a complex process with scenarios that heavily rely on various configurations, thus the following are only simple test scenarios.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Architecture:     x86_64 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU op-mode(s):   32-bit, 64-bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Byte Order:       Little Endian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU(s):           16       </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">On-line CPU(s) list: 0-15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Thread(s) per core: 2        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Model name:       Intel(R) Core(TM) i5-13400 @ 4.60GHz </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">L3 cache:         20 MiB  </span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ulimit -n 65536</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sysctl -w net.core.somaxconn=65535</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sysctl -w net.ipv4.tcp_tw_reuse=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sysctl -w net.ipv4.ip_local_port_range=&quot;1024 65535&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nginxno-access-log">Nginx（No access log）<a href="#nginxno-access-log" class="hash-link" aria-label="Direct link to Nginx（No access log）" title="Direct link to Nginx（No access log）">​</a></h3>
<p>Nginx is used only for comparison.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 &#x27;http://127.0.0.1:8080/api/json&#x27; --latency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8080/api/json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency    15.97ms   63.05ms   1.02s    95.53%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec    20.22k     1.62k   27.58k    90.20%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%    4.66ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%    4.72ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%    4.81ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%  336.44ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2011820 requests in 10.03s, 640.82MB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Socket errors: connect 0, read 2986, write 0, timeout 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec: 200591.12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:     63.89MB</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pingap-forwarding-to-nginx">Pingap forwarding to nginx<a href="#pingap-forwarding-to-nginx" class="hash-link" aria-label="Direct link to Pingap forwarding to nginx" title="Direct link to Pingap forwarding to nginx">​</a></h3>
<p>Threads: 1</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency http://127.0.0.1:8090/api/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/api/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency    38.75ms   51.25ms 193.70ms   79.22%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec    14.16k     1.91k   20.05k    71.10%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%    1.79ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%   75.46ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%  127.35ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%  161.89ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1408545 requests in 10.02s, 374.78MB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec: 140565.72</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:     37.40MB</span><br></span></code></pre></div></div>
<p>Threads: 2</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency http://127.0.0.1:8090/api/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/api/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency     8.63ms   10.23ms  69.29ms   80.18%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec    23.66k     1.44k   26.51k    87.40%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%    1.72ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%   15.59ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%   25.36ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%   36.10ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2354115 requests in 10.03s, 626.37MB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec: 234789.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:     62.47MB</span><br></span></code></pre></div></div>
<p>Threads: 3</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency http://127.0.0.1:8090/api/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/api/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency     3.97ms    3.91ms  43.27ms   81.21%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec    32.74k     1.13k   35.76k    87.20%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%    1.64ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%    6.51ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%    9.81ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%   15.25ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3257197 requests in 10.02s, 866.66MB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec: 324922.79</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:     86.45MB</span><br></span></code></pre></div></div>
<p>Threads: 4</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency http://127.0.0.1:8090/api/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/api/test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency     2.92ms    2.49ms  24.68ms   78.64%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec    39.91k   813.08    42.53k    69.60%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%    1.71ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%    4.55ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%    6.64ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%   10.23ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3970942 requests in 10.02s, 1.03GB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec: 396274.98</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:    105.44MB</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pingap-responding-with-230kb-css">Pingap responding with 230KB CSS<a href="#pingap-responding-with-230kb-css" class="hash-link" aria-label="Direct link to Pingap responding with 230KB CSS" title="Direct link to Pingap responding with 230KB CSS">​</a></h3>
<p>Threads: 4</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency    67.17ms   34.21ms   1.09s    70.01%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec   744.58    263.37     1.35k    63.00%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%   64.98ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%   90.87ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%  105.10ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%  124.30ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  74121 requests in 10.02s, 16.05GB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Non-2xx or 3xx responses: 198</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec:   7393.88</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:      1.60GB</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compression">Compression<a href="#compression" class="hash-link" aria-label="Direct link to Compression" title="Direct link to Compression">​</a></h3>
<p>Testing the processing performance when the client supports various compression formats. The compression levels used are: gzip(6), br(6), zstd(6). Actual usage should be set as needed. Pingap is set to 4 threads for all cases.</p>
<p>Client supports gzip compression (Response data 30.2KB)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency -H &quot;accept-encoding: gzip&quot; http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency   306.29ms  124.46ms   1.33s    56.06%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec   160.07     76.51   660.00     74.57%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%  310.72ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%  418.42ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%  468.79ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%  525.62ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  15948 requests in 10.02s, 468.26MB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec:   1591.26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:     46.72MB</span><br></span></code></pre></div></div>
<p>Client supports br compression (Response data 26.8KB)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency -H &quot;accept-encoding: br&quot; http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency   481.04ms  188.25ms   1.63s    68.02%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec   102.31     52.41   610.00     84.20%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%  479.02ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%  630.50ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%  727.51ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%  825.87ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10058 requests in 10.02s, 254.64MB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec:   1003.75</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:     25.41MB</span><br></span></code></pre></div></div>
<p>Client supports zstd compression (Response data 29.0KB)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency -H &quot;accept-encoding: zstd&quot; http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency   295.13ms  129.33ms   1.45s    66.63%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec   166.25     53.38   510.00     76.48%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%  284.72ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%  391.32ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%  466.32ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%  574.70ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  16562 requests in 10.03s, 464.94MB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec:   1651.31</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:     46.36MB</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="caching">Caching<a href="#caching" class="hash-link" aria-label="Direct link to Caching" title="Direct link to Caching">​</a></h3>
<p>Using the caching plugin, data is cached by compression type. Since compression is only executed on the first access, all compression methods heavily utilize resources on first access. Pingap is set to 4 threads for all cases.</p>
<p>The following test results show that with the same 4-thread setting, Requests/sec increased from 1651 to 160583, nearly a hundred-fold improvement.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wrk -c 1000 -t 10 --latency -H &quot;accept-encoding: zstd&quot; http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running 10s test @ http://127.0.0.1:8090/bootstrap.min.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10 threads and 1000 connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latency     6.42ms    4.55ms  32.84ms   69.08%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Req/Sec    16.17k   472.05    17.52k    68.70%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Latency Distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     50%    4.46ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     75%   10.18ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     90%   13.01ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     99%   17.80ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1608492 requests in 10.02s, 45.01GB read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requests/sec: 160583.24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Transfer/sec:      4.49GB</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/performance.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pingap-en/docs/question"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Frequently Asked Questions (FAQ)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#nginxno-access-log" class="table-of-contents__link toc-highlight">Nginx（No access log）</a></li><li><a href="#pingap-forwarding-to-nginx" class="table-of-contents__link toc-highlight">Pingap forwarding to nginx</a></li><li><a href="#pingap-responding-with-230kb-css" class="table-of-contents__link toc-highlight">Pingap responding with 230KB CSS</a></li><li><a href="#compression" class="table-of-contents__link toc-highlight">Compression</a></li><li><a href="#caching" class="table-of-contents__link toc-highlight">Caching</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024-2025 Tree Xie.</div></div></div></footer></div>
</body>
</html>