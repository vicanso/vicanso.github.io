"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[5899],{7974:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"introduction","title":"Pingap Overview","description":"Pingap is a reverse proxy service developed based on pingora. While pingora provides rich modules for Rust developers, it\'s not very friendly for non-Rust developers. Therefore, Pingap offers simple and easy-to-use reverse proxy functionality through TOML configuration files, supporting multiple locations forwarding for a single service and extensibility through plugins. Pre-compiled executables for various architectures can be downloaded from the releases page.","source":"@site/docs/introduction.md","sourceDirName":".","slug":"/introduction","permalink":"/pingap-en/docs/introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/introduction.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","next":{"title":"Getting Started","permalink":"/pingap-en/docs/getting_started"}}');var t=i(4848),o=i(8453);const r={sidebar_position:1},a="Pingap Overview",l={},c=[{value:"Processing Flow",id:"processing-flow",level:2},{value:"Plugin System",id:"plugin-system",level:2},{value:"Access Log Formatting",id:"access-log-formatting",level:2},{value:"Application Configuration",id:"application-configuration",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"pingap-overview",children:"Pingap Overview"})}),"\n",(0,t.jsxs)(n.p,{children:["Pingap is a reverse proxy service developed based on ",(0,t.jsx)(n.a,{href:"https://github.com/cloudflare/pingora",children:"pingora"}),". While pingora provides rich modules for Rust developers, it's not very friendly for non-Rust developers. Therefore, Pingap offers simple and easy-to-use reverse proxy functionality through TOML configuration files, supporting multiple locations forwarding for a single service and extensibility through plugins. Pre-compiled executables for various architectures can be downloaded from the ",(0,t.jsx)(n.a,{href:"https://github.com/vicanso/pingap/releases",children:"releases"})," page."]}),"\n",(0,t.jsx)(n.p,{children:"Key Features:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Multiple Location Support: Each service can configure multiple Locations, matched by host and path, with weight-based selection"}),"\n",(0,t.jsx)(n.li,{children:"Flexible Path Rewriting: Supports regex-based Path rewriting for prefix-based forwarding"}),"\n",(0,t.jsxs)(n.li,{children:["Complete HTTP Support:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"HTTP/HTTPS transparent proxy"}),"\n",(0,t.jsx)(n.li,{children:"Full HTTP 1.0/1.1/2.0 support (including h2c)"}),"\n",(0,t.jsx)(n.li,{children:"grpc-web reverse proxy"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Diverse Service Discovery: Supports static configuration, DNS, and docker label methods"}),"\n",(0,t.jsx)(n.li,{children:"Simple Configuration: Based on TOML format, can be stored in files or etcd"}),"\n",(0,t.jsxs)(n.li,{children:["Rich Monitoring Metrics:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Built-in 10+ Prometheus metrics"}),"\n",(0,t.jsx)(n.li,{children:"Supports both pull and push collection methods"}),"\n",(0,t.jsx)(n.li,{children:"OpenTelemetry support (w3c context trace and jaeger trace)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Dynamic Configuration Updates:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Upstream, Location, and Plugin configurations take effect within 10 seconds, without request interruption"}),"\n",(0,t.jsx)(n.li,{children:"Other configuration updates through graceful restart, ensuring service continuity"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Customizable Access Logs: Supports template configuration with 30+ attributes"}),"\n",(0,t.jsx)(n.li,{children:"Convenient Management Interface: Provides Web admin panel with simple and intuitive operations"}),"\n",(0,t.jsxs)(n.li,{children:["Comprehensive TLS Support:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Out-of-the-box Let's Encrypt certificates"}),"\n",(0,t.jsx)(n.li,{children:"Support for multi-domain certificates"}),"\n",(0,t.jsx)(n.li,{children:"Single-port multi-domain certificates with automatic SNI matching"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Event Notification Mechanism: Supports event pushing for ",(0,t.jsx)(n.code,{children:"lets_encrypt"}),", ",(0,t.jsx)(n.code,{children:"backend_status"}),", ",(0,t.jsx)(n.code,{children:"diff_config"}),", ",(0,t.jsx)(n.code,{children:"restart"}),", etc."]}),"\n",(0,t.jsx)(n.li,{children:"Rich Plugin Ecosystem: Provides various functional components including caching, compression, authentication, rate limiting, etc."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"processing-flow",children:"Processing Flow"}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TD;\n    server["HTTP Server"];\n    locationA["Location A"];\n    locationB["Location B"];\n    locationPluginListA["Forward Plugin List A"];\n    locationPluginListB["Forward Plugin List B"];\n    upstreamA1["Upstream Service A1"];\n    upstreamA2["Upstream Service A2"];\n    upstreamB1["Upstream Service B1"];\n    upstreamB2["Upstream Service B2"];\n    locationResponsePluginListA["Response Plugin List A"];\n    locationResponsePluginListB["Response Plugin List B"];\n\n    start("New Request") --\x3e server\n\n    server -- "host:HostA, Path:/api/*" --\x3e locationA\n\n    server -- "Path:/rest/*"--\x3e locationB\n\n    locationA -- "Execute Forward Plugins Sequentially" --\x3e locationPluginListA\n\n    locationB -- "Execute Forward Plugins Sequentially" --\x3e locationPluginListB\n\n    locationPluginListA -- "Forward to: 10.0.0.1:8001" --\x3e upstreamA1\n\n    locationPluginListA -- "Forward to: 10.0.0.2:8001" --\x3e upstreamA2\n\n    locationPluginListA -- "Processing Complete" --\x3e response\n\n    locationPluginListB -- "Forward to: 10.0.0.1:8002" --\x3e upstreamB1\n\n    locationPluginListB -- "Forward to: 10.0.0.2:8002" --\x3e upstreamB2\n\n    locationPluginListB -- "Processing Complete" --\x3e response\n\n    upstreamA1 -- "Execute Response Plugins Sequentially" --\x3e locationResponsePluginListA\n    upstreamA2 -- "Execute Response Plugins Sequentially" --\x3e locationResponsePluginListA\n\n    upstreamB1 -- "Execute Response Plugins Sequentially" --\x3e locationResponsePluginListB\n    upstreamB2 -- "Execute Response Plugins Sequentially" --\x3e locationResponsePluginListB\n\n    locationResponsePluginListA --\x3e response\n    locationResponsePluginListB --\x3e response\n\n    response["HTTP Response"] --\x3e stop("Log Recording");'}),"\n",(0,t.jsx)(n.p,{children:"Pingap's core functionality mainly handles the following logic (richer features are implemented through various plugins):"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Selects corresponding location based on path and host, with path supporting prefix, regex, and exact matching"}),"\n",(0,t.jsx)(n.li,{children:"Location rewrites path according to configuration and adds corresponding request headers"}),"\n",(0,t.jsx)(n.li,{children:"Executes corresponding forward middleware"}),"\n",(0,t.jsx)(n.li,{children:"Executes corresponding response middleware"}),"\n",(0,t.jsx)(n.li,{children:"Outputs access logs according to configured log format"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"plugin-system",children:"Plugin System"}),"\n",(0,t.jsx)(n.p,{children:"Pingap's plugins are mainly divided into two categories: pre-request and post-response processing, providing compression, caching, authentication, flow control, and various other application requirements. Plugins are added to locations, and different plugins can be configured according to different needs, then added to locations to achieve different feature combinations. Note that plugins are executed in order, adjust their sequence as needed."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"/pingap-en/docs/plugin",children:"Plugin System"})}),"\n",(0,t.jsx)(n.h2,{id:"access-log-formatting",children:"Access Log Formatting"}),"\n",(0,t.jsx)(n.p,{children:"Logs are now configured per server, so all locations under that server share the configuration. Various placeholders are supported, configure different access log outputs as needed."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"/pingap-en/docs/log",children:"Detailed Log Formatting Documentation"})}),"\n",(0,t.jsx)(n.h2,{id:"application-configuration",children:"Application Configuration"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"/pingap-en/docs/config",children:"Detailed Application Configuration Documentation"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);