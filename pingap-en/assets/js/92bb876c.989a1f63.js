"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[9184],{8863:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"getting_started","title":"Getting Started Tutorial","description":"Welcome to Pingap! This tutorial will guide you from scratch, step by step, to build, configure, and run a fully-featured, high-performance reverse proxy service. We will start with the simplest launch, complete all core configurations through the Web admin interface, and finally run it stably in daemon mode.","source":"@site/docs/getting_started.md","sourceDirName":".","slug":"/getting_started","permalink":"/pingap-en/docs/getting_started","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/getting_started.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"tutorialSidebar","previous":{"title":"What is Pingap?","permalink":"/pingap-en/docs/introduction"},"next":{"title":"Command-Line Arguments and Environment Variables","permalink":"/pingap-en/docs/argument"}}');var r=t(4848),s=t(8453);const o={sidebar_position:11},a="Getting Started Tutorial",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: First Start and the Web Admin Interface",id:"step-1-first-start-and-the-web-admin-interface",level:3},{value:"Step 2: Understanding the Core Configuration Flow",id:"step-2-understanding-the-core-configuration-flow",level:3},{value:"Step 3: Completing the Proxy Configuration via the Web UI",id:"step-3-completing-the-proxy-configuration-via-the-web-ui",level:3},{value:"1. Add an Upstream",id:"1-add-an-upstream",level:4},{value:"2. Add a Location",id:"2-add-a-location",level:4},{value:"3. Configure a Server",id:"3-configure-a-server",level:4},{value:"Step 4: Running in the Background and Auto-Updating",id:"step-4-running-in-the-background-and-auto-updating",level:3},{value:"When to use <code>--autorestart</code>?",id:"when-to-use---autorestart",level:4},{value:"Step 5: Verifying the Configuration",id:"step-5-verifying-the-configuration",level:3},{value:"1. Accessing the Service:",id:"1-accessing-the-service",level:4},{value:"2. Testing Hot-Reloading:",id:"2-testing-hot-reloading",level:4}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"getting-started-tutorial",children:"Getting Started Tutorial"})}),"\n",(0,r.jsx)(n.p,{children:"Welcome to Pingap! This tutorial will guide you from scratch, step by step, to build, configure, and run a fully-featured, high-performance reverse proxy service. We will start with the simplest launch, complete all core configurations through the Web admin interface, and finally run it stably in daemon mode."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.p,{children:["Before we begin, please ensure you have downloaded and installed the ",(0,r.jsx)(n.code,{children:"pingap"})," binary executable."]}),"\n",(0,r.jsxs)(n.p,{children:["This tutorial will use the filesystem to store all configuration information, which is the most straightforward method for most scenarios. We will store all configuration files in the ",(0,r.jsx)(n.code,{children:"/opt/pingap/conf"})," directory."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create the configuration directory\nmkdir -p /opt/pingap/conf\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-1-first-start-and-the-web-admin-interface",children:"Step 1: First Start and the Web Admin Interface"}),"\n",(0,r.jsx)(n.p,{children:"For beginners, the quickest way to get started is to launch Pingap with its built-in Web admin interface enabled. This allows us to complete all configurations in a graphical interface."}),"\n",(0,r.jsxs)(n.p,{children:["Execute the following command to start ",(0,r.jsx)(n.code,{children:"pingap"})," for the first time:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# -c specifies the configuration directory\n# --admin enables the Web admin interface, format: <user>:<password>@<listen_addr>\nRUST_LOG=INFO pingap -c /opt/pingap/conf --admin=pingap:YourSecurePassword@127.0.0.1:3018\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Breakdown"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RUST_LOG=INFO"}),": Sets the log level to ",(0,r.jsx)(n.code,{children:"INFO"})," to easily observe the program's running status. If you need more detailed logs, you can set it to ",(0,r.jsx)(n.code,{children:"DEBUG"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-c /opt/pingap/conf"}),": Specifies the storage directory for configuration files. ",(0,r.jsx)(n.code,{children:"pingap"})," will automatically read and write ",(0,r.jsx)(n.code,{children:"*.toml"})," configuration files in this directory."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--admin=pingap:YourSecurePassword@127.0.0.1:3018"}),": Enables the admin interface.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Username"}),": pingap"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Password"}),": YourSecurePassword (Please be sure to replace this with your own strong password!)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Listen Address"}),": ",(0,r.jsx)(n.code,{children:"127.0.0.1:3018"}),", which means it only listens on port 3018 locally. For a server, you can set this to ",(0,r.jsx)(n.code,{children:"0.0.0.0:3018"})," or the server's IP."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udd12 ",(0,r.jsx)(n.strong,{children:"Security Tip"}),"\nTo prevent brute-force attacks, the admin interface has a built-in login protection mechanism: if the same IP enters the wrong password multiple times, it will be temporarily locked for 5 minutes."]}),"\n",(0,r.jsxs)(n.p,{children:["Now, open your browser and navigate to ",(0,r.jsx)(n.code,{children:"http://127.0.0.1:3018"}),". You will see the login page. Enter the username and password you just set to access the admin interface."]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-understanding-the-core-configuration-flow",children:"Step 2: Understanding the Core Configuration Flow"}),"\n",(0,r.jsxs)(n.p,{children:["In ",(0,r.jsx)(n.code,{children:"pingap"}),", a complete proxy service is composed of three core concepts with a dependency relationship:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Upstream"}),": Defines the addresses and properties of the real backend services (e.g., health checks, timeouts)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": Defines the matching rules for requests (e.g., domain, path) and which ",(0,r.jsx)(n.strong,{children:"Upstream"})," to forward them to."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Server"}),": Defines the port and protocol that Pingap listens on and binds a set of ",(0,r.jsx)(n.strong,{children:"Location"})," rules to it."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Therefore, our configuration sequence should be: first create an Upstream \u2192 then create a Location \u2192 and finally create a Server."}),"\n",(0,r.jsx)(n.h3,{id:"step-3-completing-the-proxy-configuration-via-the-web-ui",children:"Step 3: Completing the Proxy Configuration via the Web UI"}),"\n",(0,r.jsxs)(n.p,{children:["Next, we will use the Web interface to complete a classic configuration that proxies requests from ",(0,r.jsx)(n.code,{children:"http://<your-domain>/app/"})," to the backend service ",(0,r.jsx)(n.code,{children:"http://127.0.0.1:8080/"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"1-add-an-upstream",children:"1. Add an Upstream"}),"\n",(0,r.jsx)(n.p,{children:"The Upstream is the foundation of all configurations."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:['Click on "Upstream Configuration" in the left-hand menu. It defaults to adding a new one; to modify, select the corresponding ',(0,r.jsx)(n.code,{children:"Upstream"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Name"}),": Enter a meaningful name, for example, ",(0,r.jsx)(n.code,{children:"my-app-service"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Addresses"}),": Enter the actual address of the backend service, for example, ",(0,r.jsx)(n.code,{children:"127.0.0.1:8080"}),". The weight is generally not needed. If there are multiple nodes, configure them one by one. If the upstream is an HTTPS node, SNI needs to be configured."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,r.jsx)(n.strong,{children:"Best Practice"}),': It is strongly recommended that you expand the "Advanced Configuration" panel to configure settings.']}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeout Settings"}),": Set reasonable connection, read, and write timeouts based on your application's characteristics to prevent the proxy from being dragged down by unresponsive backend services."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Health Check"}),": Set a health check endpoint (e.g., ",(0,r.jsx)(n.code,{children:"http://host/ping"}),"). ",(0,r.jsx)(n.code,{children:"pingap"})," will automatically remove unhealthy backend nodes to improve service availability. The ",(0,r.jsx)(n.code,{children:"host"})," part will be automatically replaced with the ",(0,r.jsx)(n.code,{children:"ip:port"})," form during the check. If not set, it defaults to a TCP port check."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"2-add-a-location",children:"2. Add a Location"}),"\n",(0,r.jsx)(n.p,{children:"The Location is responsible for forwarding requests that meet certain conditions to a specified upstream."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:['Click on "Location Configuration" in the left-hand menu. It defaults to adding a new one; to modify, select the corresponding ',(0,r.jsx)(n.code,{children:"Location"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Name"}),": Enter a meaningful name, for example, ",(0,r.jsx)(n.code,{children:"route-for-my-app"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Upstream"}),": Select the ",(0,r.jsx)(n.code,{children:"my-app-service"})," we just created from the dropdown."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Host"}),": Enter the domain name you want to serve externally, for example, ",(0,r.jsx)(n.code,{children:"app.example.com"}),". This can be left blank if matching by ",(0,r.jsx)(n.code,{children:"Path"})," is sufficient."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Path"}),": Enter the path matching rule, for example, ",(0,r.jsx)(n.code,{children:"/app"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,r.jsx)(n.strong,{children:"Best Practice"}),": Enable reverse proxy headers\nIf ",(0,r.jsx)(n.code,{children:"Pingap"})," is the entry node, it is recommended to check ",(0,r.jsx)(n.code,{children:"Enable Reverse Proxy Headers"}),". This will automatically add standard proxy headers like ",(0,r.jsx)(n.code,{children:"X-Forwarded-For"})," and ",(0,r.jsx)(n.code,{children:"X-Forwarded-Proto"}),", making it convenient for the backend application to get real client information."]}),"\n",(0,r.jsxs)(n.p,{children:["\u2757 ",(0,r.jsx)(n.strong,{children:"Note"}),": If your Upstream service is also a reverse proxy (like Nginx) and it relies on the ",(0,r.jsx)(n.code,{children:"Host"})," for routing, be sure to set the ",(0,r.jsx)(n.code,{children:"Host"}),' to the value expected by the upstream service in "Set Forwarded Request Headers".']}),"\n",(0,r.jsx)(n.h4,{id:"3-configure-a-server",children:"3. Configure a Server"}),"\n",(0,r.jsx)(n.p,{children:"The Server is the entry point of the proxy. It listens on a specified port and passes requests to the Locations for processing."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:['Click on "Server Configuration" in the left-hand menu. It defaults to adding a new one; to modify, select the corresponding ',(0,r.jsx)(n.code,{children:"Server"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Name"}),": Enter a meaningful name, for example, ",(0,r.jsx)(n.code,{children:"main-http-server"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Listen Address"}),": Enter the address and port for Pingap to serve externally, for example, ",(0,r.jsx)(n.code,{children:"0.0.0.0:6188"})," (listens on port 6188 of all network interfaces)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Locations"}),": Check the ",(0,r.jsx)(n.code,{children:"route-for-my-app"})," we just created in the dropdown. If you select multiple locations, they will be matched based on each location's weight."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,r.jsx)(n.strong,{children:"Best Practice"}),": Configure access logs. To facilitate troubleshooting, it is recommended to configure access logs. Choose a preset template (like ",(0,r.jsx)(n.code,{children:"common"})," or ",(0,r.jsx)(n.code,{children:"combined"}),') in "Access Log Format" or customize the format as needed.']}),"\n",(0,r.jsxs)(n.p,{children:["At this point, all basic configurations are complete! These settings have been automatically saved to ",(0,r.jsx)(n.code,{children:".toml"})," files in the ",(0,r.jsx)(n.code,{children:"/opt/pingap/conf"})," directory."]}),"\n",(0,r.jsx)(n.h3,{id:"step-4-running-in-the-background-and-auto-updating",children:"Step 4: Running in the Background and Auto-Updating"}),"\n",(0,r.jsxs)(n.p,{children:["Now, we want ",(0,r.jsx)(n.code,{children:"pingap"})," to run in the background like a real service and automatically apply new configurations when they change."]}),"\n",(0,r.jsxs)(n.p,{children:["First, press ",(0,r.jsx)(n.code,{children:"Ctrl+C"})," to stop the currently running foreground ",(0,r.jsx)(n.code,{children:"pingap"})," process."]}),"\n",(0,r.jsx)(n.p,{children:"Then, start it with this more complete command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"RUST_LOG=INFO pingap -c /opt/pingap/conf \\\n  -d \\\n  --log=/opt/pingap/pingap.log \\\n  --autoreload \\\n  --admin=pingap:YourSecurePassword@127.0.0.1:3018\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"New Argument Breakdown"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-d"}),": Daemonize, runs the program as a background daemon process."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--log=/opt/pingap/pingap.log"}),": Outputs logs to the specified file instead of the terminal."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--autoreload"}),": Hot-reload mode (recommended for production). ",(0,r.jsx)(n.code,{children:"pingap"})," will periodically (about every 10 seconds) check for changes in the configuration files. When configurations for ",(0,r.jsx)(n.code,{children:"Upstream"}),", ",(0,r.jsx)(n.code,{children:"Location"}),", ",(0,r.jsx)(n.code,{children:"Plugin"}),", and ",(0,r.jsx)(n.code,{children:"Certificate"})," change, it will apply the new settings without restarting and without interrupting service."]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"when-to-use---autorestart",children:["When to use ",(0,r.jsx)(n.code,{children:"--autorestart"}),"?"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--autorestart"})," is a restart-based update mode. It is used for changing more fundamental configurations, such as a Server's listening port. This mode automatically uses the ",(0,r.jsx)(n.code,{children:"upgrade"})," method to transfer requests from the old instance to the new one, but if you change the listening port, the old port might not be closed. It is recommended only for testing environments or when frequent changes to basic configurations are needed. In production, for changes to basic configurations (which are typically infrequent), it is recommended to perform a graceful restart (",(0,r.jsx)(n.code,{children:"upgrade"}),") manually."]}),"\n",(0,r.jsx)(n.h3,{id:"step-5-verifying-the-configuration",children:"Step 5: Verifying the Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Now that ",(0,r.jsx)(n.code,{children:"pingap"})," is running stably in the background, let's verify that our configuration is working."]}),"\n",(0,r.jsx)(n.h4,{id:"1-accessing-the-service",children:"1. Accessing the Service:"}),"\n",(0,r.jsxs)(n.p,{children:["Open a browser or use ",(0,r.jsx)(n.code,{children:"curl"})," to visit ",(0,r.jsx)(n.code,{children:"http://<pingap-server-ip>:6188/app/some/path"}),". If everything is correct, the request should be successfully forwarded to the backend at ",(0,r.jsx)(n.code,{children:"http://127.0.0.1:8080/app/some/path"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"2-testing-hot-reloading",children:"2. Testing Hot-Reloading:"}),"\n",(0,r.jsxs)(n.p,{children:["Log in to the Web admin interface at ",(0,r.jsx)(n.code,{children:"http://127.0.0.1:3018"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:['Go to the "Location" management page, change the path of ',(0,r.jsx)(n.code,{children:"route-for-my-app"})," from ",(0,r.jsx)(n.code,{children:"/app"})," to ",(0,r.jsx)(n.code,{children:"/pingap-app"}),", and save."]}),"\n",(0,r.jsxs)(n.p,{children:["Wait a moment (about 10 seconds) and watch the log file ",(0,r.jsx)(n.code,{children:"tail -f /opt/pingap/pingap.log-YYYY-MM-DD"}),". You should see a log entry similar to ",(0,r.jsx)(n.code,{children:"reload location success"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["At this point, visiting ",(0,r.jsx)(n.code,{children:"http://<pingap-server-ip>:6188/app/"})," will fail, while visiting ",(0,r.jsx)(n.code,{children:"http://<pingap-server-ip>:6188/pingap-app/"})," will succeed."]}),"\n",(0,r.jsx)(n.p,{children:"This proves that Pingap's dynamic hot-reloading capability is working, and you can adjust routing and upstream policies at any time without interrupting the service."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);