"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[3662],{2986:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"plugins/ping","title":"Health Check (Ping)","description":"Provides a lightweight HTTP endpoint for service Liveness Probes and Readiness Probes, forming the basis for high availability and automated operations.","source":"@site/docs/plugins/ping.md","sourceDirName":"plugins","slug":"/plugins/ping","permalink":"/pingap-en/docs/plugins/ping","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/plugins/ping.md","tags":[],"version":"current","sidebarPosition":94,"frontMatter":{"sidebar_position":94,"title":"Health Check (Ping)","description":"Provides a lightweight HTTP endpoint for service Liveness Probes and Readiness Probes, forming the basis for high availability and automated operations."},"sidebar":"tutorialSidebar","previous":{"title":"Mock Service","permalink":"/pingap-en/docs/plugins/mock"},"next":{"title":"HTTP Redirect","permalink":"/pingap-en/docs/plugins/redirect"}}');var s=i(4848),r=i(8453);const l={sidebar_position:94,title:"Health Check (Ping)",description:"Provides a lightweight HTTP endpoint for service Liveness Probes and Readiness Probes, forming the basis for high availability and automated operations."},o="Health Check (Ping) Plugin",a={},c=[{value:"Feature Introduction",id:"feature-introduction",level:2},{value:"Use Cases",id:"use-cases",level:2},{value:"Configuration Parameters",id:"configuration-parameters",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"How to Verify",id:"how-to-verify",level:3}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"health-check-ping-plugin",children:"Health Check (Ping) Plugin"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ping"})," plugin is an extremely simple yet essential tool whose sole function is to provide an HTTP endpoint that, when accessed, immediately returns a ",(0,s.jsx)(n.code,{children:"200 OK"})," response with the plain text body ",(0,s.jsx)(n.code,{children:"pong"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"feature-introduction",children:"Feature Introduction"}),"\n",(0,s.jsxs)(n.p,{children:["This plugin listens on a specific path you configure (e.g., ",(0,s.jsx)(n.code,{children:"/ping"}),"). Any ",(0,s.jsx)(n.code,{children:"GET"})," request to this path will be ",(0,s.jsx)(n.strong,{children:"intercepted"})," and ",(0,s.jsx)(n.strong,{children:"responded to immediately"})," by the plugin, without forwarding the request to any upstream service."]}),"\n",(0,s.jsx)(n.p,{children:'This quick "ping-pong" mechanism is the ideal way to implement service health checks.'}),"\n",(0,s.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Container Orchestration Health Checks (Kubernetes, Docker Swarm)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Liveness Probe"}),": K8s can periodically request the ",(0,s.jsx)(n.code,{children:"/ping"})," endpoint. If a Pingap instance does not respond, K8s will consider it deadlocked or crashed and will automatically restart the container, achieving service self-healing."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Readiness Probe"}),": K8s can use this endpoint to determine if a Pingap instance is ready to receive traffic. Only when the ",(0,s.jsx)(n.code,{children:"/ping"})," endpoint returns a success will K8s forward traffic to that instance."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Load Balancer Health Checks (AWS ELB, Nginx)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A load balancer periodically sends health check requests to each backend Pingap instance. If an instance's ",(0,s.jsx)(n.code,{children:"/ping"})," endpoint fails to return ",(0,s.jsx)(n.code,{children:"200 OK"}),", the load balancer will temporarily remove it from the pool of available nodes until it recovers."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Service Monitoring and Alerting (Prometheus, Zabbix)"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Monitoring systems can periodically request this endpoint to monitor the availability of the Pingap service and send out alerts in a timely manner if the service is down."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Connectivity Testing"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Developers or operations personnel can quickly access this endpoint via a ",(0,s.jsx)(n.code,{children:"curl"})," command to verify that the Pingap service is running and network-reachable."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration-parameters",children:"Configuration Parameters"}),"\n",(0,s.jsxs)(n.p,{children:["Configuration is done in the ",(0,s.jsx)(n.code,{children:"plugin.ping.toml"})," file."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Parameter"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Type"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Required"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Default"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"path"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"String"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Yes"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"-"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(n.strong,{children:"(Required)"})," The URL path for the health check. The plugin will perform an exact match on this path."]})]})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Goal"}),": Add a health check endpoint at ",(0,s.jsx)(n.code,{children:"/healthz"})," for our Pingap service."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Configure the plugin (",(0,s.jsx)(n.code,{children:"plugin.ping-healthcheck.toml"}),")"]}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'# Specify the path for the health check endpoint\npath = "/healthz"\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Apply the plugin in a Location (",(0,s.jsx)(n.code,{children:"location.toml"}),")"]}),":"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,s.jsx)(n.strong,{children:"Best Practice"}),": The ",(0,s.jsx)(n.code,{children:"Location"})," for a health check should be a separate rule without an ",(0,s.jsx)(n.code,{children:"upstream"})," configured, as it is handled directly by the plugin. Typically, this endpoint should only be exposed on an internal network or a specific admin port."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'# location.toml\n[locations.route-for-healthcheck]\npath = "/"\nupstream = "my-main-service"\nplugins = [\n    "ping-healthcheck",\n]\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"how-to-verify",children:"How to Verify"}),"\n",(0,s.jsxs)(n.p,{children:["After starting Pingap, you can test the endpoint using ",(0,s.jsx)(n.code,{children:"curl"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl http://<your-pingap-address>/healthz\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var t=i(6540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);