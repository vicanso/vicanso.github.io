"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[5412],{8233:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"argument","title":"Command Line Arguments","description":"Pingap is configured through TOML files, but certain startup parameters need to be specified via command line arguments or environment variables:","source":"@site/docs/argument.md","sourceDirName":".","slug":"/argument","permalink":"/pingap-en/docs/argument","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/argument.md","tags":[],"version":"current","sidebarPosition":21,"frontMatter":{"sidebar_position":21},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/pingap-en/docs/getting_started"},"next":{"title":"Configuration Guide","permalink":"/pingap-en/docs/config"}}');var t=r(4848),i=r(8453);const s={sidebar_position:21},c="Command Line Arguments",a={},o=[{value:"Command Line Arguments",id:"command-line-arguments-1",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"File Configuration Mode Startup Example",id:"file-configuration-mode-startup-example",level:2},{value:"etcd Configuration Mode Startup Example",id:"etcd-configuration-mode-startup-example",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"command-line-arguments",children:"Command Line Arguments"})}),"\n",(0,t.jsx)(n.p,{children:"Pingap is configured through TOML files, but certain startup parameters need to be specified via command line arguments or environment variables:"}),"\n",(0,t.jsx)(n.h2,{id:"command-line-arguments-1",children:"Command Line Arguments"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Short"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"conf"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"c"})}),(0,t.jsxs)(n.td,{children:["Configuration file or directory path, defaults to current directory. Supported formats:",(0,t.jsx)("br",{}),"- Single file: ",(0,t.jsx)(n.code,{children:"/opt/pingap/conf/pingap.toml"}),(0,t.jsx)("br",{}),"- Multi-file directory: ",(0,t.jsx)(n.code,{children:"/opt/pingap/conf"}),(0,t.jsx)("br",{}),"- Split config directory: ",(0,t.jsx)(n.code,{children:"/opt/pingap/conf?separation"}),(0,t.jsx)("br",{}),"- etcd: ",(0,t.jsx)(n.code,{children:"etcd://user:pass@ip:port/path?timeout=10s"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"daemon"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"d"})}),(0,t.jsx)(n.td,{children:"Run as a daemon process (required for upgrade feature)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"upgrade"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"u"})}),(0,t.jsx)(n.td,{children:"Zero-downtime update mode, receives requests from original program via unix socket"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"test"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"t"})}),(0,t.jsx)(n.td,{children:"Only test configuration validity"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"log"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Log output directory"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"admin"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsxs)(n.td,{children:["Admin panel address, supports authentication formats:",(0,t.jsx)("br",{}),"- Base64: ",(0,t.jsx)(n.code,{children:"base64(user:pass)@ip:port"}),(0,t.jsx)("br",{}),"- Plaintext: ",(0,t.jsx)(n.code,{children:"user:pass@ip:port/prefix"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cp"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Mark as control panel node (etcd mode only)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"autorestart"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"a"})}),(0,t.jsx)(n.td,{children:"Automatically restart on config updates (includes autoreload functionality)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"autoreload"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Automatically update partial configurations (only supports upstream, location, plugin, certificate)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"sync"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Sync configuration to other storage and exit"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"template"})}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Output configuration template and exit"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,t.jsx)(n.p,{children:"All command line parameters can be set through environment variables:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Environment Variable"}),(0,t.jsx)(n.th,{children:"Corresponding Parameter"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_CONF"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--conf"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_DAEMON"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--daemon"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_UPGRADE"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--upgrade"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_LOG"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--log"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_ADMIN_ADDR"})}),(0,t.jsx)(n.td,{children:"Admin panel address"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_ADMIN_USER"})}),(0,t.jsx)(n.td,{children:"Admin panel username"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_ADMIN_PASSWORD"})}),(0,t.jsx)(n.td,{children:"Admin panel password"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_CP"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--cp"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_AUTORESTART"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--autorestart"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"PINGAP_AUTORELOAD"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"--autoreload"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"file-configuration-mode-startup-example",children:"File Configuration Mode Startup Example"}),"\n",(0,t.jsxs)(n.p,{children:["Configuration directory located at ",(0,t.jsx)(n.code,{children:"/opt/pingap/conf"}),", with automatic restart on configuration changes:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"RUST_LOG=INFO pingap \\\n  -c=/opt/pingap/conf -d \\\n  --log=/opt/pingap/pingap.log \\\n  --autorestart\n"})}),"\n",(0,t.jsx)(n.h2,{id:"etcd-configuration-mode-startup-example",children:"etcd Configuration Mode Startup Example"}),"\n",(0,t.jsx)(n.p,{children:"For multi-node deployments, it's recommended to use separate management and application nodes."}),"\n",(0,t.jsx)(n.p,{children:"Management node:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'RUST_LOG=INFO pingap \\\n  -c="etcd://127.0.0.1:2379/pingap?timeout=10s&connect_timeout=5s&user=pingap&password=123123" \\\n  --cp \\\n  --admin=pingap:123123@127.0.0.1:3018\n'})}),"\n",(0,t.jsx)(n.p,{children:"Application node:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'RUST_LOG=INFO pingap \\\n  -c="etcd://127.0.0.1:2379/pingap?timeout=10s&connect_timeout=5s&user=pingap&password=123123" \\\n  -d --log=/opt/pingap/pingap.log \\\n  --autorestart\n'})}),"\n",(0,t.jsx)(n.p,{children:"Important notes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["etcd connection format: ",(0,t.jsx)(n.code,{children:"etcd://ip1:port1,ip2:port2/path?user=xx&password=xx"}),", where ",(0,t.jsx)(n.code,{children:"/path"})," should correspond to different application instances"]}),"\n",(0,t.jsxs)(n.li,{children:["admin parameter format is ",(0,t.jsx)(n.code,{children:"user:password"}),", recommended to configure to enable Basic Auth authentication"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);