"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[8458],{1577:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"docker","title":"Deploying Pingap with Docker","description":"We provide an official Docker image for Pingap, allowing you to complete deployments quickly and consistently in any environment that supports Docker.","source":"@site/docs/docker.md","sourceDirName":".","slug":"/docker","permalink":"/pingap-en/docs/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/docker.md","tags":[],"version":"current","sidebarPosition":141,"frontMatter":{"sidebar_position":141},"sidebar":"tutorialSidebar","previous":{"title":"User-Agent Restriction","permalink":"/pingap-en/docs/plugins/ua-restriction"},"next":{"title":"Frequently Asked Questions (FAQ)","permalink":"/pingap-en/docs/question"}}');var r=i(4848),s=i(8453);const o={sidebar_position:141},a="Deploying Pingap with Docker",c={},d=[{value:"1. Pull the Image",id:"1-pull-the-image",level:3},{value:"Available Image Tags",id:"available-image-tags",level:4},{value:"2. Quick Start (using docker run)",id:"2-quick-start-using-docker-run",level:3},{value:"3. Core Concept: Configuration Updates in a Docker Environment",id:"3-core-concept-configuration-updates-in-a-docker-environment",level:3},{value:"4. Recommended Method: Using Docker Compose",id:"4-recommended-method-using-docker-compose",level:3},{value:"5. Advanced: Integrating with Docker Service Discovery",id:"5-advanced-integrating-with-docker-service-discovery",level:3}];function l(e){const n={code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deploying-pingap-with-docker",children:"Deploying Pingap with Docker"})}),"\n",(0,r.jsxs)(n.p,{children:["We provide an official ",(0,r.jsx)(n.code,{children:"Docker"})," image for ",(0,r.jsx)(n.code,{children:"Pingap"}),", allowing you to complete deployments quickly and consistently in any environment that supports ",(0,r.jsx)(n.code,{children:"Docker"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["To simplify operational success, deploying ",(0,r.jsx)(n.code,{children:"Pingap"})," with ",(0,r.jsx)(n.code,{children:"Docker"})," is our recommended method. It offers numerous advantages, including environment isolation, easy migration, and rapid scaling."]}),"\n",(0,r.jsx)(n.h3,{id:"1-pull-the-image",children:"1. Pull the Image"}),"\n",(0,r.jsxs)(n.p,{children:["First, pull the ",(0,r.jsx)(n.code,{children:"Pingap"})," image from ",(0,r.jsx)(n.code,{children:"Docker Hub"}),". ",(0,r.jsx)(n.code,{children:"Pingap"})," offers various image tags to meet the needs of different scenarios, mainly divided into a standard version and a full-featured version (",(0,r.jsx)(n.code,{children:"full"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["The full-featured (",(0,r.jsx)(n.code,{children:"full"}),") version additionally includes extended features that typically require extra dependencies, such as ",(0,r.jsx)(n.code,{children:"OpenTelemetry"}),", ",(0,r.jsx)(n.code,{children:"Sentry"}),", and an ",(0,r.jsx)(n.code,{children:"image compression plugin"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"available-image-tags",children:"Available Image Tags"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Image Tag"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"vicanso/pingap:latest"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"The latest development version. Built from the most recent code on the main branch, it includes the newest features and fixes but may be unstable."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"vicanso/pingap:full"})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["The full-featured latest development version. Similar to ",(0,r.jsx)(n.code,{children:"latest"}),", but includes all extended features."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"vicanso/pingap:version"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Built by version number, providing stable features. Use this if you don't need features like tracing or image compression."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"vicanso/pingap:version-full"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"The full-featured stable version. Built by version number and includes all extended features. Recommended for use in most scenarios."})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,r.jsx)(n.strong,{children:"Production Environment Recommendation"})]}),"\n",(0,r.jsxs)(n.p,{children:["To ensure the stability and predictability of your deployment, we strongly recommend using image tags with specific version numbers in a production environment (e.g., ",(0,r.jsx)(n.code,{children:"vicanso/pingap:version-full"}),"). Please avoid using ",(0,r.jsx)(n.code,{children:"latest"})," or ",(0,r.jsx)(n.code,{children:"full"}),", as they change with development updates and may introduce incompatible changes."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Pull the latest full-featured stable version (recommended)\ndocker pull vicanso/pingap:0.12.1-full\n\n# Alternatively, if you want to try the latest features, you can pull the development version\ndocker pull vicanso/pingap:latest\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-quick-start-using-docker-run",children:"2. Quick Start (using docker run)"}),"\n",(0,r.jsxs)(n.p,{children:["You can quickly start a ",(0,r.jsx)(n.code,{children:"Pingap"})," container using the ",(0,r.jsx)(n.code,{children:"docker run"})," command."]}),"\n",(0,r.jsxs)(n.p,{children:["Before executing the command, please create a ",(0,r.jsx)(n.code,{children:"pingap"})," folder in your current directory to persist all of ",(0,r.jsx)(n.code,{children:"Pingap's"})," configurations and data."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p $PWD/pingap\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then execute the following command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker run -d \\\n  --name pingap-instance \\\n  --restart=always \\\n  -v $PWD/pingap:/opt/pingap \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -e PINGAP_CONF=/opt/pingap/conf \\\n  -e PINGAP_ADMIN_ADDR="0.0.0.0:80/pingap" \\\n  -e PINGAP_ADMIN_USER=pingap \\\n  -e PINGAP_ADMIN_PASSWORD=<YourSecurePassword> \\\n  vicanso/pingap pingap --autoreload\n'})}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udd12 Security Tip"}),"\n",(0,r.jsxs)(n.p,{children:["Be sure to replace ",(0,r.jsx)(n.code,{children:"<YourSecurePassword>"})," in the command with your own strong password!"]}),"\n",(0,r.jsx)(n.p,{children:"Argument Breakdown"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"-d"}),": Run the container in the background in detached mode."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--name pingap-instance"}),": Assign an easily identifiable name to the container."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--restart=always"}),": Docker will automatically restart the container if it exits, ensuring high service availability."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"-v $PWD/pingap:/opt/pingap"}),": Mount the host's ./pingap directory to the container's /opt/pingap directory. This is key to achieving data persistence; all configurations, certificates, and logs will be saved here."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"-p 80:80"})," and ",(0,r.jsx)(n.code,{children:"-p 443:443"}),": Map ports 80 and 443 of the host to ports 80 and 443 of the container to provide HTTP/HTTPS services externally."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"-e PINGAP_*"}),": Set Pingap's startup parameters via environment variables, which is the best practice for configuring applications in Docker."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"vicanso/pingap pingap --autoreload"}),": Specify the image to use and tell the Pingap program inside the container to start in --autoreload mode."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-core-concept-configuration-updates-in-a-docker-environment",children:"3. Core Concept: Configuration Updates in a Docker Environment"}),"\n",(0,r.jsxs)(n.p,{children:["In a Docker environment, a container's main process is expected to run continuously in the foreground. Pingap's ",(0,r.jsx)(n.code,{children:"--autorestart"})," argument relies on daemon mode, which creates a new background process and exits the main one. This contradicts Docker's expectation and will cause the container to exit immediately."]}),"\n",(0,r.jsx)(n.p,{children:"Therefore, in a Docker environment:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Do not use the ",(0,r.jsx)(n.code,{children:"--autorestart"})," argument."]}),"\n",(0,r.jsxs)(n.li,{children:["Please use the ",(0,r.jsx)(n.code,{children:"--autoreload"})," argument: For most routine configuration changes like upstream, location, and certificate, ",(0,r.jsx)(n.code,{children:"--autoreload"})," can apply updates without restarting the container, which is the ideal method."]}),"\n",(0,r.jsx)(n.li,{children:"For fundamental configuration changes: If you need to modify basic settings that cannot be hot-reloaded, such as a server's listening port, the standard practice is to restart the container:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# After modifying the configuration files, just run the following command\ndocker restart pingap-instance\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-recommended-method-using-docker-compose",children:"4. Recommended Method: Using Docker Compose"}),"\n",(0,r.jsx)(n.p,{children:"For long-running services, we strongly recommend using docker-compose to define and manage them. It makes your configuration declarative, easier to maintain, and more reproducible."}),"\n",(0,r.jsxs)(n.p,{children:["Create a ",(0,r.jsx)(n.code,{children:"docker-compose.yml"})," file in your project's root directory:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.yml\nversion: \'3.8\'\n\nservices:\n  pingap:\n    image: vicanso/pingap:latest\n    container_name: pingap-instance\n    restart: always\n    ports:\n      - "80:80"\n      - "443:443"\n    volumes:\n      # Mount the pingap/ folder from the current directory into the container for data persistence\n      - ./pingap:/opt/pingap\n    environment:\n      # Use environment variables for configuration\n      - PINGAP_CONF=/opt/pingap/conf\n      - PINGAP_ADMIN_ADDR=0.0.0.0:80/pingap\n      - PINGAP_ADMIN_USER=pingap\n      - PINGAP_ADMIN_PASSWORD=<YourSecurePassword> # Again, please replace with a strong password\n    command:\n      # Set the container\'s startup command to enable hot-reloading\n      - pingap\n      - --autoreload\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Then, in the same directory as the ",(0,r.jsx)(n.code,{children:"docker-compose.yml"})," file, run the following command to start:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n",(0,r.jsx)(n.p,{children:"Accessing the Admin Interface"}),"\n",(0,r.jsxs)(n.p,{children:["After a successful startup, you can access the Pingap Web admin interface at ",(0,r.jsx)(n.code,{children:"http://<your-server-ip>/pingap/"})," and begin configuring your proxy services."]}),"\n",(0,r.jsx)(n.h3,{id:"5-advanced-integrating-with-docker-service-discovery",children:"5. Advanced: Integrating with Docker Service Discovery"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Pingap"})," supports service discovery via ",(0,r.jsx)(n.code,{children:"Docker Labels"}),". When you deploy ",(0,r.jsx)(n.code,{children:"Pingap"})," alongside other services in a ",(0,r.jsx)(n.code,{children:"Docker"})," environment, you can use this feature to achieve automatic registration and updates of upstream nodes, greatly simplifying configuration management in a microservices architecture."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(6540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);