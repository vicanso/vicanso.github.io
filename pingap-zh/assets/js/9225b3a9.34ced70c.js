"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[5950],{4470:(e,c,s)=>{s.r(c),s.d(c,{assets:()=>h,contentTitle:()=>r,default:()=>j,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"config","title":"\u914d\u7f6e\u8bf4\u660e","description":"Pingap\u4f7f\u7528toml\u6765\u914d\u7f6e\u76f8\u5173\u53c2\u6570\uff0c\u5bf9\u4e8e\u65f6\u95f4\u7c7b\u7684\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a1s, 1m, 1h\u8fd9\u79cd\u65f6\u95f4\u8868\u793a\u5f62\u5f0f\u3002\u800c\u5bf9\u4e8e\u5b58\u50a8\u5927\u5c0f\u7c7b\u7684\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a1kb, 1mb, 1gb\u8fd9\u79cd\u8868\u793a\u65b9\u5f0f\u3002\u5177\u4f53\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a","source":"@site/docs/config.md","sourceDirName":".","slug":"/config","permalink":"/pingap-zh/docs/config","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/config.md","tags":[],"version":"current","sidebarPosition":31,"frontMatter":{"sidebar_position":31},"sidebar":"tutorialSidebar","previous":{"title":"\u547d\u4ee4\u884c\u53c2\u6570","permalink":"/pingap-zh/docs/argument"},"next":{"title":"\u65e5\u5fd7\u683c\u5f0f\u5316","permalink":"/pingap-zh/docs/log"}}');var n=s(4848),d=s(8453);const l={sidebar_position:31},r="\u914d\u7f6e\u8bf4\u660e",h={},o=[{value:"\u57fa\u7840\u914d\u7f6e",id:"\u57fa\u7840\u914d\u7f6e",level:2},{value:"Upstream",id:"upstream",level:2},{value:"\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e",id:"\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e",level:3},{value:"Algo\u7684hash",id:"algo\u7684hash",level:3},{value:"Location",id:"location",level:2},{value:"Path\u5339\u914d\u89c4\u5219",id:"path\u5339\u914d\u89c4\u5219",level:3},{value:"Path\u91cd\u5199\u8bf7\u6c42\u8def\u5f84",id:"path\u91cd\u5199\u8bf7\u6c42\u8def\u5f84",level:3},{value:"\u8bf7\u6c42\u5934\u8bbe\u7f6e\u652f\u6301\u7684\u53d8\u91cf\u540d",id:"\u8bf7\u6c42\u5934\u8bbe\u7f6e\u652f\u6301\u7684\u53d8\u91cf\u540d",level:3},{value:"Server",id:"server",level:2}];function x(e){const c={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.header,{children:(0,n.jsx)(c.h1,{id:"\u914d\u7f6e\u8bf4\u660e",children:"\u914d\u7f6e\u8bf4\u660e"})}),"\n",(0,n.jsxs)(c.p,{children:["Pingap\u4f7f\u7528toml\u6765\u914d\u7f6e\u76f8\u5173\u53c2\u6570\uff0c\u5bf9\u4e8e\u65f6\u95f4\u7c7b\u7684\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a",(0,n.jsx)(c.code,{children:"1s"}),", ",(0,n.jsx)(c.code,{children:"1m"}),", ",(0,n.jsx)(c.code,{children:"1h"}),"\u8fd9\u79cd\u65f6\u95f4\u8868\u793a\u5f62\u5f0f\u3002\u800c\u5bf9\u4e8e\u5b58\u50a8\u5927\u5c0f\u7c7b\u7684\u914d\u7f6e\uff0c\u683c\u5f0f\u4e3a",(0,n.jsx)(c.code,{children:"1kb"}),", ",(0,n.jsx)(c.code,{children:"1mb"}),", ",(0,n.jsx)(c.code,{children:"1gb"}),"\u8fd9\u79cd\u8868\u793a\u65b9\u5f0f\u3002\u5177\u4f53\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a"]}),"\n",(0,n.jsx)(c.h2,{id:"\u57fa\u7840\u914d\u7f6e",children:"\u57fa\u7840\u914d\u7f6e"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"name"}),": \u5b9e\u4f8b\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a",(0,n.jsx)(c.code,{children:"Pingap"}),"\uff0c\u5982\u679c\u662f\u5728\u540c\u4e00\u673a\u5668\u90e8\u7f72\u591a\u4e2a\u5b9e\u4f8b\uff0c\u53ef\u4ee5\u914d\u7f6e\u4e0d\u540c\u7684\u540d\u79f0"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"error_template"}),": \u53c2\u6570\u53ef\u9009\uff0c\u5f02\u5e38\u51fa\u9519\u65f6\u7684html\u6a21\u677f\uff0c\u53ef\u81ea\u5b9a\u4e49\u51fa\u9519\u7684html\u6a21\u677f\uff0c\u5728\u51fa\u9519\u65f6\u4f1a\u66ff\u6362\u6a21\u677f\u4e2d\u7684",(0,n.jsx)(c.code,{children:"{{version}}"}),"\u4e3apingap\u7684\u7248\u672c\u53f7\uff0c",(0,n.jsx)(c.code,{children:"{{content}}"}),"\u4e3a\u51fa\u9519\u7684\u5177\u4f53\u4fe1\u606f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"pid_file"}),": \u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a",(0,n.jsx)(c.code,{children:"/run/pingap.pid"}),"\uff0c\u6b64\u53c2\u6570\u914d\u7f6e\u8fdb\u7a0bid\u7684\u8bb0\u5f55\u6587\u4ef6\uff0c\u82e5\u5355\u673a\u90e8\u7f72\u591a\u5b9e\u4f8b\uff0c\u5219\u9700\u8981\u914d\u7f6e\u4e0d\u540c\u7684\u8def\u5f84"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"upgrade_sock"}),": \u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a",(0,n.jsx)(c.code,{children:"/tmp/pingap_upgrade.sock"}),"\uff0c\u6b64\u53c2\u6570\u914d\u7f6e\u7a0b\u5e8f\u65e0\u4e2d\u65ad\u5f0f\u66f4\u65b0\u65f6\u7684socket\u8def\u5f84\uff0c\u7528\u4e8e\u65b0\u7684pingap\u8fdb\u7a0b\u4e0e\u65e7\u8fdb\u7a0b\u4e4b\u95f4\u5207\u6362\u65f6\u4f7f\u7528\uff0c\u82e5\u5355\u673a\u90e8\u7f72\u591a\u5b9e\u4f8b\uff0c\u5219\u9700\u8981\u914d\u7f6e\u4e0d\u540c\u7684\u8def\u5f84"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"user"}),": \u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u7528\u4e8e\u8bbe\u7f6e\u5b88\u62a4\u8fdb\u7a0b\u7684\u6267\u884c\u7528\u6237"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"group"}),": \u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u4e0e",(0,n.jsx)(c.code,{children:"user"}),"\u7c7b\u4f3c"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"threads"}),": \u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a1\uff0c\u7528\u4e8e\u8bbe\u7f6e\u6bcf\u4e2a\u670d\u52a1(\u5982server\u76d1\u542c\u7684tcp\u8fde\u63a5)\u4f7f\u7528\u7684\u7ebf\u7a0b\u6570\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u4f7f\u7528cpu\u6838\u6570\u6216cgroup\u9650\u5236\u6838\u6570"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"work_stealing"}),": \u53c2\u6570\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a",(0,n.jsx)(c.code,{children:"true"}),"\uff0c\u662f\u5426\u5141\u8bb8\u540c\u670d\u52a1\u4e2d\u7684\u4e0d\u540c\u7ebf\u7a0b\u7684\u62a2\u5360\u5de5\u4f5c"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"grace_period"}),": \u8bbe\u7f6e\u4f18\u96c5\u9000\u51fa\u7684\u7b49\u5f85\u5468\u671f\uff0c\u9ed8\u8ba4\u4e3a5\u5206\u949f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"graceful_shutdown_timeout"}),": \u8bbe\u7f6e\u4f18\u96c5\u9000\u51fa\u5173\u95ed\u8d85\u65f6\u65f6\u957f\uff0c\u9ed8\u8ba4\u4e3a5\u79d2"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"upstream_keepalive_pool_size"}),": \u8bbe\u7f6eupstream\u4fdd\u6301\u8fde\u63a5\u7684\u8fde\u63a5\u6c60\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a",(0,n.jsx)(c.code,{children:"128"})]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"webhook"}),": Webhook\u7684\u8bf7\u6c42\u8def\u5f84"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"webhook_type"}),": Webhook\u7684\u7c7b\u578b\uff0c\u652f\u6301\u666e\u901a\u7684http\u5f62\u5f0f\u3001",(0,n.jsx)(c.code,{children:"webcom"}),"\u4e0e",(0,n.jsx)(c.code,{children:"dingtalk"}),"\u4e09\u79cd\u7c7b\u578b"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"webhook_notifications"}),": Webhook\u901a\u77e5\u7684\u7c7b\u578b\uff0c\u6709",(0,n.jsx)(c.code,{children:"backend_status"}),"\uff0c",(0,n.jsx)(c.code,{children:"lets_encrypt"}),"\uff0c",(0,n.jsx)(c.code,{children:"diff_config"}),"\uff0c",(0,n.jsx)(c.code,{children:"restart"}),"\uff0c",(0,n.jsx)(c.code,{children:"restart_fail"}),"\u4ee5\u53ca",(0,n.jsx)(c.code,{children:"tls_validity"}),"\u7b49\u7b49"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"log_level"}),": \u5e94\u7528\u65e5\u5fd7\u7684\u8f93\u51fa\u7ea7\u522b\uff0c\u9ed8\u8ba4\u4e3a",(0,n.jsx)(c.code,{children:"INFO"})]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"log_buffered_size"}),": \u65e5\u5fd7\u7f13\u5b58\u533a\u5927\u5c0f\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u82e5\u8bbe\u7f6e\u5c0f\u4e8e4096\u5219\u8868\u793a\u4e0d\u4f7f\u7528buffer"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"log_format_json"}),": \u8bbe\u7f6e\u4e3ajson\u683c\u5f0f\u5316\u65e5\u5fd7"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"sentry"}),": Sentry\u7684DSN\u914d\u7f6e\uff0csentry\u9700\u8981\u4f7f\u7528",(0,n.jsx)(c.code,{children:"full feature"}),"\u7248\u672c"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"pyroscope"}),": Pyroscope\u8fde\u63a5\u5730\u5740\uff0c\u9700\u8981\u6ce8\u610f\u9ed8\u8ba4\u7248\u672c\u5e76\u672a\u7f16\u8bd1\u652f\u6301pyroscpe\uff0c\u9700\u8981\u4f7f\u7528perf\u7684\u7248\u672c"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"auto_restart_check_interval"}),": \u68c0\u6d4b\u914d\u7f6e\u66f4\u65b0\u7684\u95f4\u9694\uff0c\u9ed8\u8ba4\u4e3a\u6bcf90\u79d2\u68c0\u6d4b\u4e00\u6b21\uff0c\u82e5\u914d\u7f6e\u4e3a\u5c0f\u4e8e1\u79d2\u7684\u503c\uff0c\u5219\u4e0d\u68c0\u6d4b"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"cache_directory"}),": \u8bbe\u7f6e\u7f13\u5b58\u76ee\u5f55\uff0c\u8bbe\u7f6e\u4e4b\u540e\u5219\u4f7f\u7528\u6587\u4ef6\u5f62\u5f0f\u7f13\u5b58\uff0c\u6587\u4ef6\u76ee\u5f55\u7f13\u5b58\u4f1a\u5b9a\u671f\u6e05\u9664\u8fc7\u957f\u65f6\u95f4\u672a\u88ab\u8bbf\u95ee\u6587\u4ef6\uff0c\u6587\u4ef6\u7f13\u5b58\u7684\u914d\u7f6e\u5f62\u5f0f\u5982",(0,n.jsx)(c.code,{children:"/opt/pingap/cache?reading_max=1000&writing_max=500&cache_max=200"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"reading_max"}),": \u9650\u5236\u6700\u5927\u6b63\u5728\u8bfb\u53d6\u7f13\u5b58\u7684\u6570\u636e\uff08\u53ea\u5bf9\u4e8e\u6587\u4ef6\u7f13\u5b58\u6709\u6548\uff09"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"writing_max"}),": \u9650\u5236\u6700\u5927\u6b63\u5728\u5199\u5165\u7f13\u5b58\u7684\u6570\u636e\uff08\u53ea\u5bf9\u4e8e\u6587\u4ef6\u7f13\u5b58\u6709\u6548\uff09"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"cache_max"}),": \u6587\u4ef6\u7f13\u5b58\u4e2d\u5bf9\u4e8e\u70ed\u70b9\u6570\u636e\u7684\u7f13\u5b58\u6570\u91cf\u9650\u5236\uff0c\u5185\u5b58\u7f13\u5b58\u4e3atinyufo\uff0c\u9ed8\u8ba4\u4e3a100\uff0c\u82e5\u8bbe\u7f6e\u4e3a0\u5219\u8868\u793a\u4e0d\u4f7f\u7528\u5185\u5b58\u70ed\u70b9\u7f13\u5b58"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"cache_max_size"}),": \u7f13\u5b58\u7a7a\u95f4\u7684\u6700\u5927\u9650\u5236\uff0c\u7f13\u5b58\u662f\u7a0b\u5e8f\u4e2d\u6240\u6709\u670d\u52a1\u5171\u7528\uff0c\u5bf9\u4e8e\u6587\u4ef6\u7f13\u5b58\u6b64\u9650\u5236\u65e0\u6548"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_fast_open"}),": \u662f\u5426\u542f\u7528TCP Fast Open\u529f\u80fd\uff0c\u53ef\u4ee5\u51cf\u5c11TCP\u8fde\u63a5\u5efa\u7acb\u65f6\u7684\u5ef6\u8fdf\u3002\u542f\u7528\u65f6\u9700\u8981\u6307\u5b9abacklog\u5927\u5c0f"]}),"\n"]}),"\n",(0,n.jsx)(c.h2,{id:"upstream",children:"Upstream"}),"\n",(0,n.jsx)(c.p,{children:"Upstream\u914d\u7f6e\u7528\u4e8e\u5b9a\u4e49\u540e\u7aef\u670d\u52a1\u8282\u70b9\u5217\u8868\u3002\u5982\u679c\u914d\u7f6e\u57df\u540d\uff0c\u7cfb\u7edf\u4f1a\u6839\u636eDNS\u89e3\u6790\u7ed3\u679c\u6dfb\u52a0\u6240\u6709\u8282\u70b9\u5730\u5740\uff08\u9700\u8981\u914d\u7f6e\u76f8\u5e94\u7684\u670d\u52a1\u53d1\u73b0\u65b9\u5f0f\u624d\u4f1a\u81ea\u52a8\u66f4\u65b0DNS\u89e3\u6790\uff09\u3002\u5efa\u8bae\u914d\u7f6eHTTP\u5065\u5eb7\u68c0\u67e5\u6765\u76d1\u63a7\u8282\u70b9\u72b6\u6001\u3002"}),"\n",(0,n.jsx)(c.p,{children:"\u4e3b\u8981\u53c2\u6570\u8bf4\u660e\uff1a"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"addrs"}),": \u8282\u70b9\u5730\u5740\u5217\u8868\uff0c\u683c\u5f0f\u4e3a ",(0,n.jsx)(c.code,{children:"ip:port [weight]"}),"\uff0cweight\u4e3a\u53ef\u9009\u7684\u6743\u91cd\u503c(\u9ed8\u8ba4\u4e3a1)"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"discovery"}),": \u670d\u52a1\u53d1\u73b0\u65b9\u5f0f\u3002\u63a8\u8350\u57df\u540d\u4f7f\u7528dns\u65b9\u5f0f\uff0cdocker\u670d\u52a1\u53ef\u4f7f\u7528docker label\u65b9\u5f0f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"update_frequency"}),": \u670d\u52a1\u53d1\u73b0\u7684\u66f4\u65b0\u95f4\u9694\uff0c\u5efa\u8bae\u914d\u7f6e\u4ee5\u5b9e\u73b0\u8282\u70b9\u7684\u52a8\u6001\u66f4\u65b0"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"algo"}),": \u8282\u70b9\u7684\u9009\u62e9\u7b97\u6cd5\uff0c\u652f\u6301",(0,n.jsx)(c.code,{children:"hash"}),"\u4e0e",(0,n.jsx)(c.code,{children:"round_robin"}),"\u4e24\u79cd\u5f62\u5f0f\uff0c\u5982",(0,n.jsx)(c.code,{children:"hash:ip"}),"\u8868\u793a\u6309ip hash\u9009\u62e9\u8282\u70b9\u3002\u9ed8\u8ba4\u4e3a",(0,n.jsx)(c.code,{children:"round_robin"})]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"sni"}),": \u82e5\u914d\u7f6e\u7684\u662fhttps\uff0c\u9700\u8981\u8bbe\u7f6e\u5bf9\u5e94\u7684SNI"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"verify_cert"}),": \u82e5\u914d\u7f6e\u7684\u662fhttps\uff0c\u662f\u5426\u9700\u8981\u6821\u9a8c\u8bc1\u4e66\u6709\u6548\u6027"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"health_check"}),": \u8282\u70b9\u5065\u5eb7\u68c0\u6d4b\u914d\u7f6e\uff0c\u652f\u6301http\u3001tcp\u4e0egrpc\u5f62\u5f0f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"ipv4_only"}),": \u82e5\u914d\u7f6e\u4e3a\u57df\u540d\u65f6\uff0c\u662f\u5426\u4ec5\u6dfb\u52a0\u89e3\u6790\u7684ipv4\u8282\u70b9"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"enable_tracer"}),": \u662f\u5426\u542f\u7528tracer\u529f\u80fd\uff0c\u542f\u7528\u540e\u53ef\u83b7\u53d6\u5f97upstream\u7684\u8fde\u63a5\u6570"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"alpn"}),": \u5728tls\u63e1\u624b\u65f6\uff0calpn\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3aH1"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"connection_timeout"}),": tcp\u8fde\u63a5\u8d85\u65f6\uff0c\u9ed8\u8ba4\u4e3a\u65e0"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"total_connection_timeout"}),": \u8fde\u63a5\u8d85\u65f6\uff0c\u82e5\u662fhttps\u8bf7\u6c42\u5305\u62ectls\u63e1\u624b\u90e8\u5206\uff0c\u9ed8\u8ba4\u4e3a\u65e0"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"read_timeout"}),": \u8bfb\u53d6\u8d85\u65f6\uff0c\u9ed8\u8ba4\u4e3a\u65e0"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"idle_timeout"}),": \u7a7a\u95f2\u8d85\u65f6\uff0c\u6307\u5b9a\u8fde\u63a5\u7a7a\u95f2\u591a\u4e45\u540e\u4f1a\u81ea\u52a8\u56de\u6536\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u8fde\u63a5\u4e0d\u590d\u7528\uff0c\u9700\u8981\u6ce8\u610f\u6709\u4e9b\u7f51\u7edc\u8bbe\u5907\u5bf9\u4e8e\u65e0\u6570\u636e\u7684tcp\u8fde\u63a5\u4f1a\u8fc7\u671f\u81ea\u52a8\u5173\u95ed\uff0c\u56e0\u6b64\u53ef\u6839\u636e\u9700\u8981\u8bbe\u7f6e\u5bf9\u5e94\u7684\u503c\u3002\u9ed8\u8ba4\u4e3a\u65e0"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"write_timeout"}),": \u5199\u8d85\u65f6\uff0c\u9ed8\u8ba4\u4e3a\u65e0"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_idle"}),": tcp\u8fde\u63a5keepalive\u7a7a\u95f2\u56de\u6536\u65f6\u957f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_interval"}),": tcp\u8fde\u63a5keepavlie\u68c0\u6d4b\u65f6\u957f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_probe_count"}),": tcp\u8fde\u63a5keepalvie\u63a2\u9488\u68c0\u6d4b\u6b21\u6570"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_recv_buf"}),": tcp\u63a5\u6536\u7f13\u5b58\u533a\u5927\u5c0f"]}),"\n"]}),"\n",(0,n.jsxs)(c.p,{children:["\u9700\u8981\u6ce8\u610f\uff0c\u82e5\u8981\u8bbe\u7f6etcp\u7684keepalive\uff0c",(0,n.jsx)(c.code,{children:"tcp_idle"}),"\uff0c",(0,n.jsx)(c.code,{children:"tcp_interval"}),"\u4ee5\u53ca",(0,n.jsx)(c.code,{children:"tcp_probe_count"}),"\u5747\u9700\u8981\u8bbe\u7f6e\u3002"]}),"\n",(0,n.jsx)(c.h3,{id:"\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e",children:"\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e"}),"\n",(0,n.jsx)(c.p,{children:"\u652f\u6301\u4ee5\u4e0b\u4e09\u79cd\u5065\u5eb7\u68c0\u67e5\u65b9\u5f0f\uff1a"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"HTTP(S)"}),": ",(0,n.jsx)(c.code,{children:"http://upstream\u540d\u79f0/\u68c0\u67e5\u8def\u5f84?\u53c2\u6570"})]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"TCP"}),": ",(0,n.jsx)(c.code,{children:"tcp://upstream\u540d\u79f0?\u53c2\u6570"})]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"gRPC"}),": ",(0,n.jsx)(c.code,{children:"grpc://upstream\u540d\u79f0?service=\u670d\u52a1\u540d&\u53c2\u6570"})]}),"\n"]}),"\n",(0,n.jsx)(c.p,{children:"\u901a\u7528\u53c2\u6570\u8bf4\u660e\uff1a"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"connection_timeout"}),": \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba43\u79d2"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"read_timeout"}),": \u8bfb\u53d6\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba43\u79d2"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"check_frequency"}),": \u68c0\u67e5\u95f4\u9694\uff0c\u9ed8\u8ba410\u79d2"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"success"}),": \u5224\u5b9a\u4e3a\u5065\u5eb7\u6240\u9700\u7684\u8fde\u7eed\u6210\u529f\u6b21\u6570\uff0c\u9ed8\u8ba41\u6b21"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"failure"}),": \u5224\u5b9a\u4e3a\u4e0d\u5065\u5eb7\u6240\u9700\u7684\u8fde\u7eed\u5931\u8d25\u6b21\u6570\uff0c\u9ed8\u8ba42\u6b21"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"reuse"}),": \u662f\u5426\u590d\u7528\u68c0\u67e5\u8fde\u63a5\uff0c\u9ed8\u8ba4\u5426"]}),"\n"]}),"\n",(0,n.jsx)(c.h3,{id:"algo\u7684hash",children:"Algo\u7684hash"}),"\n",(0,n.jsx)(c.p,{children:"\u82e5\u6307\u5b9a\u901a\u8fc7hash\u7684\u65b9\u5f0f\u9009\u62e9upstream\u7684backend\uff0c\u5219\u53ef\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\uff1a"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"hash:url"}),": \u6839\u636eurl\u8f6c\u53d1\uff0c\u4e3b\u8981\u7528\u4e8eupstream\u4e3a\u57fa\u4e8eurl\u7f13\u5b58\u7684\u670d\u52a1"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"hash:ip"}),": \u6839\u636eip\u8f6c\u53d1\uff0cupstream\u4e3a\u6709\u57fa\u4e8eip\u6570\u636e\u6301\u4e45\u5316\u7684\u670d\u52a1"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"hash:header:X-User"}),": \u6839\u636e\u8bf7\u6c42\u5934\u83b7\u53d6",(0,n.jsx)(c.code,{children:"X-User"}),"\u7684\u503c\u8f6c\u53d1"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"hash:cookie:uid"}),": \u6839\u636eCookie\u7684",(0,n.jsx)(c.code,{children:"uid"}),"\u503c\u8f6c\u53d1"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"hash:query:appKey"}),": \u6839\u636eQuery\u7684",(0,n.jsx)(c.code,{children:"appkey"}),"\u503c\u8f6c\u53d1"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"hash:path"}),": \u6839\u636epath\u8f6c\u53d1\uff0chash\u65b9\u5f0f\u7684\u9ed8\u8ba4\u503c"]}),"\n"]}),"\n",(0,n.jsx)(c.h2,{id:"location",children:"Location"}),"\n",(0,n.jsx)(c.p,{children:"Location\u4e3b\u8981\u914d\u7f6e\u8bf7\u6c42\u7684\u5339\u914d\u89c4\u5219\u3001\u8bf7\u6c42\u5934\u54cd\u5e94\u5934\u7684\u63d2\u5165\uff0c\u4ee5\u53ca\u5404\u79cd\u63d2\u4ef6\u7684\u5173\u8054\uff0c\u662f\u6574\u4e2a\u6d41\u7a0b\u4e2d\u7684\u5173\u8054\u7ec4\u6210\u90e8\u5206\u3002\u4e0b\u9762\u662f\u76f8\u5173\u53c2\u6570\u7684\u8be6\u7ec6\u8bf4\u660e\uff1a"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"upstream"}),": \u914d\u7f6e\u8be5location\u5bf9\u5e94\u7684upstream\uff0c\u82e5\u8be5location\u6240\u6709\u7684\u5904\u7406\u5747\u7531\u63d2\u4ef6\u5b8c\u6210\uff0c\u5219\u53ef\u4e0d\u914d\u7f6e\u3002\u5982\u9488\u5bf9http\u91cd\u5b9a\u5411\u81f3https\u7684\u903b\u8f91\uff0c\u5219\u53ea\u9700\u8981\u6dfb\u52a0\u4e2d\u95f4\u4ef6\u5373\u53ef"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"path"}),": \u5339\u914d\u7684\u8def\u5f84\uff0c\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u540e\u7eed\u5185\u5bb9\u7ec6\u8bf4"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"host"}),": \u5339\u914d\u7684\u57df\u540d\uff0c\u5982\u679c\u662f\u591a\u4e2a\u57df\u540d\u5219\u4f7f\u7528",(0,n.jsx)(c.code,{children:","}),"\u5206\u9694\uff0c\u914d\u7f6e\u4e3a",(0,n.jsx)(c.code,{children:"~"}),"\u5f00\u59cb\u5219\u8868\u793a\u4ee5\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"proxy_set_headers"}),": \u8f6c\u53d1\u81f3upstream\u65f6\u8bbe\u7f6e\u7684\u8bf7\u6c42\u5934\uff0c\u82e5\u8be5\u8bf7\u6c42\u5934\u5df2\u5b58\u5728\u5219\u8986\u76d6"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"proxy_add_headers"}),": \u8f6c\u53d1\u81f3upstream\u65f6\u6dfb\u52a0\u7684\u8bf7\u6c42\u5934"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"rewrite"}),": \u8bf7\u6c42\u8def\u5f84\u7684\u91cd\u5199\u89c4\u5219"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"weight"}),": \u81ea\u5b9a\u4e49\u7684\u6743\u91cd\uff0c\u53ef\u4ee5\u8c03\u6574\u8be5location\u7684\u6743\u91cd\uff0c\u4f8b\u5982mock\u4e3a\u670d\u52a1\u4e0d\u53ef\u7528\u540e\uff0c\u518d\u8c03\u6574\u8be5\u6743\u91cd\u6700\u9ad8\uff0c\u5219\u53ef\u7981\u7528\u6240\u6709\u8bf7\u6c42\u3002\u5982\u975e\u7279\u522b\u5219\u4e0d\u9700\u8981\u8bbe\u7f6e\uff0c\u6743\u91cd\u4f1a\u81ea\u52a8\u8ba1\u7b97\uff08\u8ba1\u7b97\u5f97\u51fa\u7684\u6743\u91cd\u6700\u9ad8\u4e0d\u8d85\u8fc72048\uff09"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"plugins"}),": \u6dfb\u52a0\u81f3\u8be5location\u7684\u63d2\u4ef6\u5217\u8868\uff0c\u6309\u987a\u5e8f\u6267\u884c"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"client_max_body_size"}),": \u5ba2\u6237\u7aef\u8bf7\u6c42\u7684body\u6700\u5927\u957f\u5ea6"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"max_processing"}),": \u6700\u5927\u5904\u7406\u8bf7\u6c42\u6570\uff0c\u82e5\u8bbe\u7f6e\u4e3a0\u5219\u8868\u793a\u4e0d\u9650\u5236"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"grpc_web"}),": \u662f\u5426\u542f\u7528\u652f\u6301grpc-web"]}),"\n"]}),"\n",(0,n.jsx)(c.h3,{id:"path\u5339\u914d\u89c4\u5219",children:"Path\u5339\u914d\u89c4\u5219"}),"\n",(0,n.jsx)(c.p,{children:"Location\u7684path\u5339\u914d\u652f\u6301\u4ee5\u4e0b\u7684\u89c4\u5219\uff0c\u6743\u91cd\u7531\u9ad8\u81f3\u4f4e\uff1a"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:["\u5168\u7b49\u6a21\u5f0f\uff0c\u914d\u7f6e\u4ee5",(0,n.jsx)(c.code,{children:"="}),"\u5f00\u59cb\uff0c\u5982",(0,n.jsx)(c.code,{children:"=/api"}),"\u8868\u793a\u5339\u914dpath\u7b49\u4e8e",(0,n.jsx)(c.code,{children:"/api"}),"\u7684\u8bf7\u6c42"]}),"\n",(0,n.jsxs)(c.li,{children:["\u6b63\u5219\u6a21\u5f0f\uff0c\u914d\u7f6e\u4ee5",(0,n.jsx)(c.code,{children:"~"}),"\u5f00\u59cb\uff0c\u5982",(0,n.jsx)(c.code,{children:"~^/(api|rest)"}),"\u8868\u793a\u5339\u914dpath\u4ee5",(0,n.jsx)(c.code,{children:"/api"}),"\u6216",(0,n.jsx)(c.code,{children:"/rest"}),"\u5f00\u59cb\u8bf7\u6c42"]}),"\n",(0,n.jsxs)(c.li,{children:["\u524d\u7f00\u6a21\u5f0f\uff0c\u5982",(0,n.jsx)(c.code,{children:"/api"}),"\u8868\u793a\u5339\u914dpath\u4e3a",(0,n.jsx)(c.code,{children:"/api"}),"\u5f00\u59cb\u7684\u8bf7\u6c42"]}),"\n"]}),"\n",(0,n.jsx)(c.h3,{id:"path\u91cd\u5199\u8bf7\u6c42\u8def\u5f84",children:"Path\u91cd\u5199\u8bf7\u6c42\u8def\u5f84"}),"\n",(0,n.jsx)(c.p,{children:"\u53ef\u6309\u9700\u914d\u7f6e\u8bf7\u6c42\u8def\u5f84\u91cd\u5199\u89c4\u5219\uff0c\u652f\u6301\u6b63\u5219\u5339\u914d\u5904\u7406(\u4e0enginx\u7c7b\u4f3c)\uff0c\u4ec5\u652f\u6301\u914d\u7f6e\u4e00\u4e2a\u91cd\u5199\u89c4\u5219\uff0c\u82e5\u903b\u8f91\u8fc7\u4e8e\u590d\u6742\u5efa\u8bae\u53ef\u914d\u7f6e\u591a\u4e2alocation\u6765\u5206\u5f00\u5b9e\u73b0\u3002\u914d\u7f6e\u901a\u8fc7\u7a7a\u683c\u5206\u9694\u4e3a\u524d\u540e\u4e24\u90e8\u5206\uff0c\u5904\u7406\u903b\u8f91\u5219\u662f\u6309\u6b63\u5219\u5339\u914d\u5c06\u524d\u90e8\u5206\u66ff\u6362\u4e3a\u540e\u90e8\u5206\uff0c\u4e0b\u9762\u662f\u5e38\u7528\u7684\u4e00\u4e9b\u4f8b\u5982\uff1a"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"^/api/ /"}),": \u8868\u793a\u5c06\u8bf7\u6c42\u524d\u7f00\u7684",(0,n.jsx)(c.code,{children:"/api/"}),"\u66ff\u6362\u4e3a",(0,n.jsx)(c.code,{children:"/"})]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"^/(\\S*?)/ /api/$1/"}),": \u8868\u793a\u5728\u8bf7\u6c42\u8def\u5f84\u6dfb\u52a0\u524d\u7f00",(0,n.jsx)(c.code,{children:"/api"})]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"^/(\\S*?)/api/(\\S*?) /$1/$2"}),": \u8868\u793a\u5c06\u8bf7\u6c42\u8def\u5f84\u4e2d\u7684",(0,n.jsx)(c.code,{children:"/api"}),"\u90e8\u5206\u5220\u9664"]}),"\n"]}),"\n",(0,n.jsx)(c.h3,{id:"\u8bf7\u6c42\u5934\u8bbe\u7f6e\u652f\u6301\u7684\u53d8\u91cf\u540d",children:"\u8bf7\u6c42\u5934\u8bbe\u7f6e\u652f\u6301\u7684\u53d8\u91cf\u540d"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$hostname"}),": \u8868\u793a\u5904\u7406\u8be5\u8bf7\u6c42\u4e3b\u673a\u7684hostname"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$host"}),": \u8868\u793a\u8bf7\u6c42\u7684host"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$scheme"}),": \u8868\u793a\u8bf7\u6c42\u7684scheme, \u5982http\u6216https"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$remote_addr"}),": \u8868\u793a\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u5730\u5740"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$remote_port"}),": \u8868\u793a\u8bf7\u6c42\u7684\u5ba2\u6237\u7aef\u7aef\u53e3"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$server_addr"}),": \u8868\u793a\u8bf7\u6c42\u7684server\u5730\u5740"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$server_port"}),": \u8868\u793a\u8bf7\u6c42\u7684server\u7aef\u53e3"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$proxy_add_x_forwarded_for"}),": \u8868\u793a\u8bf7\u6c42\u7684\u4ee3\u7406\u5730\u5740\uff0c\u6309x-forwarded-for\u7684\u683c\u5f0f\u6dfb\u52a0"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"$upstream_addr"}),": \u8868\u793a\u8bf7\u6c42\u7684upstream\u5730\u5740"]}),"\n"]}),"\n",(0,n.jsx)(c.h2,{id:"server",children:"Server"}),"\n",(0,n.jsxs)(c.ul,{children:["\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"server.x"}),": server\u7684\u914d\u7f6e\uff0c\u5176\u4e2d",(0,n.jsx)(c.code,{children:"x"}),"\u4e3aserver\u7684\u540d\u79f0\uff0c\u9700\u8981\u6ce8\u610f\u540d\u79f0\u4e0d\u8981\u76f8\u540c\uff0c\u76f8\u540c\u540d\u79f0\u7684\u914d\u7f6e\u4f1a\u88ab\u8986\u76d6\u3002"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"addr"}),": \u76d1\u63a7\u7684\u7aef\u53e3\u5730\u5740\uff0c\u5730\u5740\u683c\u5f0f\u4e3a",(0,n.jsx)(c.code,{children:"ip:port"}),"\u7684\u5f62\u5f0f\uff0c\u82e5\u9700\u8981\u76d1\u542c\u591a\u5730\u5740\u5219\u4ee5",(0,n.jsx)(c.code,{children:","}),"\u5206\u9694"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"access_log"}),": \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u4e0d\u8f93\u51fa\u8bbf\u95ee\u65e5\u5fd7\u3002\u8bf7\u6c42\u65e5\u5fd7\u683c\u5f0f\u5316\uff0c\u6307\u5b9a\u8f93\u51fa\u8bbf\u95ee\u65e5\u5fd7\u7684\u5f62\u5f0f\u3002\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u51e0\u79cd\u5e38\u7528\u7684\u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f",(0,n.jsx)(c.code,{children:"combined"}),", ",(0,n.jsx)(c.code,{children:"common"}),", ",(0,n.jsx)(c.code,{children:"short"}),", ",(0,n.jsx)(c.code,{children:"tiny"})]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"locations"}),": location\u7684\u5217\u8868\uff0c\u6307\u5b9a\u8be5server\u4f7f\u7528\u7684location"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"threads"}),": \u8bbe\u7f6e\u670d\u52a1\u9ed8\u8ba4\u7684\u7ebf\u7a0b\u6570\uff0c\u8bbe\u7f6e\u4e3a0\u5219\u7b49\u4e8ecpu\u6838\u6570\uff0c\u9ed8\u8ba4\u4e3a1"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tls_cipher_list"}),": \u6307\u5b9atls1.3\u4e4b\u524d\u7248\u672c\u4f7f\u7528\u7684\u52a0\u5bc6\u5957\u4ef6\uff0c\u53ef\u4ee5\u53c2\u8003nginx\u7b49\u8f6f\u4ef6\u7684\u914d\u7f6e"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tls_ciphersuites"}),": \u6307\u5b9atls1.3\u7248\u672c\u4f7f\u7528\u7684\u52a0\u5bc6\u5957\u4ef6\uff0c\u53ef\u4ee5\u53c2\u8003nginx\u7b49\u8f6f\u4ef6\u7684\u914d\u7f6e"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tls_min_version"}),": \u6307\u5b9atls\u7684\u6700\u4f4e\u7248\u672c\uff0c\u9ed8\u8ba4\u4e3a1.2"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tls_max_version"}),": \u6307\u5b9atls\u7684\u6700\u4f4e\u7248\u672c\uff0c\u9ed8\u8ba4\u4e3a1.3"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"global_certificates"}),": \u542f\u7528\u5168\u5c40\u8bc1\u4e66\u914d\u7f6e\uff0c\u7528\u4e8e\u65e0\u6cd5\u5339\u914d\u5230\u7b26\u5408server name\u7684https\u8bf7\u6c42\u4f7f\u7528"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"enabled_h2"}),": \u662f\u5426\u542f\u7528http2\uff0c\u5efa\u8bae\u914d\u7f6e\u4e3a\u542f\u7528\uff0c\u9700\u8981\u6ce8\u610f\uff0c\u5982\u679c\u662fhttp\u5219\u4f7f\u7528h2c\u7684\u5f62\u5f0f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_idle"}),": tcp\u8fde\u63a5keepalive\u7a7a\u95f2\u56de\u6536\u65f6\u957f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_interval"}),": tcp\u8fde\u63a5keepavlie\u68c0\u6d4b\u65f6\u957f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_probe_count"}),": tcp\u8fde\u63a5keepalvie\u63a2\u9488\u68c0\u6d4b\u6b21\u6570"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"tcp_fastopen"}),": \u542f\u7528tcp\u5feb\u901f\u542f\u52a8\uff0c\u5e76\u8bbe\u7f6ebacklog\u7684\u5927\u5c0f"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"prometheus_metrics"}),": \u8bbe\u7f6e\u542f\u7528prometheus\uff0c\u5982\u679c\u914d\u7f6e\u4e3ahttp\u5f62\u5f0f\u7684\u5219\u4e3apush\u7684\u5f62\u5f0f\uff0c\u5982\u679c\u53ea\u914d\u7f6e\u8def\u5f84\u5219\u63d0\u4f9bpull\u7684\u8bf7\u6c42\u8def\u5f84\uff0c\u5982",(0,n.jsx)(c.code,{children:"/metrics"}),"\u5219\u8868\u793a",(0,n.jsx)(c.code,{children:"http://ip:port/metrics"}),"\u53ef\u83b7\u53d6\u5bf9\u5e94\u7684metrics\u6570\u636e(\u9700\u8981\u6ce8\u610ffull futures\u7248\u672c\u624d\u652f\u6301)"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"otlp_exporter"}),": \u8bbe\u7f6eopentemletry\u6570\u636e\u6536\u96c6\u5668\u7684\u5730\u5740(\u9700\u8981\u6ce8\u610ffull futures\u7248\u672c\u624d\u652f\u6301)"]}),"\n",(0,n.jsxs)(c.li,{children:[(0,n.jsx)(c.code,{children:"modules"}),": \u9009\u62e9\u8981\u542f\u7528\u7684\u6a21\u5757\uff0c\u5bf9\u4e8eweb-grpc\u9700\u8981\u52fe\u9009\u5bf9\u5e94\u6a21\u5757"]}),"\n"]})]})}function j(e={}){const{wrapper:c}={...(0,d.R)(),...e.components};return c?(0,n.jsx)(c,{...e,children:(0,n.jsx)(x,{...e})}):x(e)}}}]);