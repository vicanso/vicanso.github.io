"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[2757],{65:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>r,default:()=>a,frontMatter:()=>c,metadata:()=>l,toc:()=>x});const l=JSON.parse('{"id":"plugin","title":"\u63d2\u4ef6\u4f53\u7cfb","description":"\u63d2\u4ef6\u7cfb\u7edf\u5141\u8bb8\u60a8\u901a\u8fc7\u6dfb\u52a0\u5404\u7c7b\u63d2\u4ef6\u6765\u6269\u5c55 Location \u7684\u529f\u80fd,\u652f\u6301\u9274\u6743\u3001\u6d41\u63a7\u3001\u54cd\u5e94\u5934\u8bbe\u7f6e\u7b49\u591a\u79cd\u573a\u666f\u3002\u901a\u8fc7\u63d2\u4ef6,\u60a8\u53ef\u4ee5\u7075\u6d3b\u5730\u5b9a\u5236\u8bf7\u6c42\u5904\u7406\u6d41\u7a0b\u3002","source":"@site/docs/plugin.md","sourceDirName":".","slug":"/plugin","permalink":"/pingap-zh/docs/plugin","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/plugin.md","tags":[],"version":"current","sidebarPosition":71,"frontMatter":{"sidebar_position":71},"sidebar":"tutorialSidebar","previous":{"title":"HTTPS \u8bc1\u4e66\u7ba1\u7406","permalink":"/pingap-zh/docs/certificate"},"next":{"title":"Docker","permalink":"/pingap-zh/docs/docker"}}');var s=i(4848),d=i(8453);const c={sidebar_position:71},r="\u63d2\u4ef6\u4f53\u7cfb",h={},x=[{value:"\u63d2\u4ef6\u6267\u884c\u65f6\u70b9",id:"\u63d2\u4ef6\u6267\u884c\u65f6\u70b9",level:2},{value:"Stats \u6027\u80fd\u7edf\u8ba1\u63d2\u4ef6",id:"stats-\u6027\u80fd\u7edf\u8ba1\u63d2\u4ef6",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570",level:3},{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f",level:3},{value:"Ping",id:"ping",level:2},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-1",level:3},{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f-1",level:3},{value:"Admin",id:"admin",level:2},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-2",level:3},{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f-2",level:3},{value:"Directory",id:"directory",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-1",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-3",level:3},{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f-3",level:3},{value:"Mock",id:"mock",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-2",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-4",level:3},{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f-4",level:3},{value:"Redirect",id:"redirect",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-3",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-5",level:3},{value:"\u4f7f\u7528\u65b9\u5f0f",id:"\u4f7f\u7528\u65b9\u5f0f-5",level:3},{value:"Cache",id:"cache",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-4",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-6",level:3},{value:"\u754c\u9762\u914d\u7f6e",id:"\u754c\u9762\u914d\u7f6e",level:3},{value:"RequestId",id:"requestid",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-5",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-7",level:3},{value:"\u4f7f\u7528\u573a\u666f",id:"\u4f7f\u7528\u573a\u666f",level:3},{value:"Compression",id:"compression",level:2},{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406",level:3},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-6",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-8",level:3},{value:"\u5185\u7f6e\u914d\u7f6e",id:"\u5185\u7f6e\u914d\u7f6e",level:3},{value:"\u6267\u884c\u9636\u6bb5",id:"\u6267\u884c\u9636\u6bb5",level:3},{value:"AcceptEncoding",id:"acceptencoding",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-7",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-9",level:3},{value:"\u6267\u884c\u9636\u6bb5",id:"\u6267\u884c\u9636\u6bb5-1",level:3},{value:"KeyAuth",id:"keyauth",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-8",level:3},{value:"\u4ece\u8bf7\u6c42\u53c2\u6570\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f",id:"\u4ece\u8bf7\u6c42\u53c2\u6570\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f",level:4},{value:"\u4ece\u8bf7\u6c42\u5934\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f",id:"\u4ece\u8bf7\u6c42\u5934\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f",level:4},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-10",level:3},{value:"\u754c\u9762\u914d\u7f6e",id:"\u754c\u9762\u914d\u7f6e-1",level:3},{value:"BasicAuth",id:"basicauth",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-9",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-11",level:3},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e",level:3},{value:"JWT",id:"jwt",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-10",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-12",level:3},{value:"\u5de5\u4f5c\u6d41\u7a0b",id:"\u5de5\u4f5c\u6d41\u7a0b",level:3},{value:"CombinedAuth",id:"combinedauth",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-11",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-13",level:3},{value:"\u8ba4\u8bc1\u6d41\u7a0b",id:"\u8ba4\u8bc1\u6d41\u7a0b",level:3},{value:"Limit",id:"limit",level:2},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-14",level:3},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-12",level:3},{value:"\u8865\u5145\u8bf4\u660e",id:"\u8865\u5145\u8bf4\u660e",level:3},{value:"IpRestriction",id:"iprestriction",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-13",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-15",level:3},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e-1",level:3},{value:"UaRestriction",id:"uarestriction",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-14",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-16",level:3},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e-2",level:3},{value:"RefererRestriction",id:"refererrestriction",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-15",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-17",level:3},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e-3",level:3},{value:"CSRF",id:"csrf",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-16",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-18",level:3},{value:"\u5de5\u4f5c\u6d41\u7a0b",id:"\u5de5\u4f5c\u6d41\u7a0b-1",level:3},{value:"CORS",id:"cors",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-17",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-19",level:3},{value:"\u5b89\u5168\u5efa\u8bae",id:"\u5b89\u5168\u5efa\u8bae",level:3},{value:"ResponseHeaders",id:"responseheaders",level:2},{value:"\u914d\u7f6e\u793a\u4f8b",id:"\u914d\u7f6e\u793a\u4f8b-18",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-20",level:3},{value:"\u6267\u884c\u987a\u5e8f",id:"\u6267\u884c\u987a\u5e8f",level:3},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e-4",level:3},{value:"SubFilter",id:"subfilter",level:2},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570-21",level:3}];function j(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u63d2\u4ef6\u4f53\u7cfb",children:"\u63d2\u4ef6\u4f53\u7cfb"})}),"\n",(0,s.jsx)(n.p,{children:"\u63d2\u4ef6\u7cfb\u7edf\u5141\u8bb8\u60a8\u901a\u8fc7\u6dfb\u52a0\u5404\u7c7b\u63d2\u4ef6\u6765\u6269\u5c55 Location \u7684\u529f\u80fd,\u652f\u6301\u9274\u6743\u3001\u6d41\u63a7\u3001\u54cd\u5e94\u5934\u8bbe\u7f6e\u7b49\u591a\u79cd\u573a\u666f\u3002\u901a\u8fc7\u63d2\u4ef6,\u60a8\u53ef\u4ee5\u7075\u6d3b\u5730\u5b9a\u5236\u8bf7\u6c42\u5904\u7406\u6d41\u7a0b\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u63d2\u4ef6\u6267\u884c\u65f6\u70b9",children:"\u63d2\u4ef6\u6267\u884c\u65f6\u70b9"}),"\n",(0,s.jsx)(n.p,{children:"\u63d2\u4ef6\u53ef\u4ee5\u5728\u8bf7\u6c42\u5904\u7406\u7684\u4e0d\u540c\u9636\u6bb5\u6267\u884c,\u76ee\u524d\u652f\u6301\u4ee5\u4e0b\u4e09\u4e2a\u65f6\u70b9:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Request"}),": \u8bf7\u6c42\u6700\u5f00\u59cb\u9636\u6bb5"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u9002\u7528\u4e8e\u6743\u9650\u9a8c\u8bc1\u7b49\u9700\u8981\u65e9\u671f\u62e6\u622a\u7684\u573a\u666f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ProxyUpstream"}),": \u8f6c\u53d1\u81f3\u4e0a\u6e38\u8282\u70b9\u4e4b\u524d"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5728\u8bfb\u53d6\u7f13\u5b58\u4e4b\u540e\u6267\u884c"}),"\n",(0,s.jsx)(n.li,{children:"\u9002\u7528\u4e8e\u9700\u8981\u9650\u5236\u4e0a\u6e38\u8bbf\u95ee\u4f46\u5141\u8bb8\u7f13\u5b58\u8bbf\u95ee\u7684\u573a\u666f"}),"\n",(0,s.jsx)(n.li,{children:"\u4f8b\u5982:\u9650\u5236\u5bf9\u4e0a\u6e38\u7684\u8bf7\u6c42\u9891\u7387,\u4f46\u5141\u8bb8\u9ad8\u5e76\u53d1\u8bfb\u53d6\u7f13\u5b58"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Response"}),": \u4e0a\u6e38\u54cd\u5e94\u4e4b\u540e"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7528\u4e8e\u5904\u7406\u548c\u4fee\u6539\u4e0a\u6e38\u8fd4\u56de\u7684\u54cd\u5e94\u6570\u636e"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"#[async_trait]\npub trait Plugin: Sync + Send {\n    // \u8fd4\u56de\u63d2\u4ef6\u7c7b\u578b,\u7528\u4e8e\u5206\u7c7b\u7ba1\u7406\n    fn category(&self) -> PluginCategory;\n    \n    // \u6307\u5b9a\u63d2\u4ef6\u6267\u884c\u65f6\u5e8f(Request/ProxyUpstream/Response)\n    fn step(&self) -> String;\n    \n    // \u5904\u7406\u8bf7\u6c42\u7684\u94a9\u5b50\u51fd\u6570\n    // \u8fd4\u56de Some(response) \u8868\u793a\u8bf7\u6c42\u5904\u7406\u5b8c\u6210,\u76f4\u63a5\u8fd4\u56de\u54cd\u5e94\n    // \u8fd4\u56de None \u8868\u793a\u7ee7\u7eed\u540e\u7eed\u5904\u7406\n    async fn handle_request(...) -> Result<Option<HttpResponse>>;\n    \n    // \u5904\u7406\u54cd\u5e94\u7684\u94a9\u5b50\u51fd\u6570\n    // \u8fd4\u56de Some(bytes) \u8868\u793a\u91cd\u5199\u54cd\u5e94\u4f53\n    // \u8fd4\u56de None \u8868\u793a\u4f7f\u7528\u539f\u54cd\u5e94\n    async fn handle_response(...) -> Result<Option<Bytes>>;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4e3b\u8981\u5206\u4e09\u4e2a\u5b9e\u73b0\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"category"}),": \u63d2\u4ef6\u7c7b\u578b\uff0c\u7528\u4e8e\u533a\u5206\u8be5\u63d2\u4ef6\u662f\u54ea\u7c7b\u5f62\u5f0f\u7684\u63d2\u4ef6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u7684\u6267\u884c\u65f6\u5e8f\uff0c\u6309\u9700\u9009\u62e9\u63d2\u4ef6\u7684\u6267\u884c\u65f6\u5e8f\uff0c\u4e0d\u540c\u7684\u63d2\u4ef6\u53ef\u9009\u62e9\u7684\u9009\u62e9\u4e0d\u4e00\u6837"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"handle_request"}),": \u63d2\u4ef6\u7684\u8f6c\u53d1\u524d\u6267\u884c\u903b\u8f91\uff0c\u82e5\u8fd4\u56de\u7684\u662f",(0,s.jsx)(n.code,{children:"Ok(Some(HttpResponse))"}),"\uff0c\u5219\u8868\u793a\u8bf7\u6c42\u5df2\u5904\u7406\u5b8c\u6210\uff0c\u4e0d\u518d\u8f6c\u53d1\u5230\u4e0a\u6e38\u8282\u70b9\uff0c\u5e76\u5c06\u8be5\u54cd\u5e94\u4f20\u8f93\u81f3\u8bf7\u6c42\u7aef"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"handle_response"}),": \u63d2\u4ef6\u7684\u54cd\u5e94\u524d\u6267\u903b\u8f91\uff0c\u82e5\u8fd4\u56de\u7684\u662f",(0,s.jsx)(n.code,{children:"Ok(Some(Bytes))"}),"\uff0c\u5219\u8868\u793a\u8981\u91cd\u5199\u54cd\u5e94\u6570\u636e"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"stats-\u6027\u80fd\u7edf\u8ba1\u63d2\u4ef6",children:"Stats \u6027\u80fd\u7edf\u8ba1\u63d2\u4ef6"}),"\n",(0,s.jsx)(n.p,{children:"Stats\u63d2\u4ef6\u7528\u4e8e\u66b4\u9732\u5e94\u7528\u7684\u6027\u80fd\u6307\u6807\u6570\u636e,\u65b9\u4fbf\u7b2c\u4e09\u65b9\u7cfb\u7edf\u91c7\u96c6\u76d1\u63a7\u3002\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u4f7f\u7528:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528\u5185\u7f6e\u7684 ",(0,s.jsx)(n.code,{children:"pingap:stats"})," \u63d2\u4ef6"]}),"\n",(0,s.jsx)(n.li,{children:"\u81ea\u5b9a\u4e49\u914d\u7f6e\u65b0\u7684 Stats \u63d2\u4ef6"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.stats]\ncategory = "stats"\npath = "/stats"  # \u8bbf\u95ee\u8def\u5f84\nremark = "\u6027\u80fd\u6307\u6807\u91c7\u96c6"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"}),": \u6307\u6807\u6570\u636e\u8bbf\u95ee\u8def\u5f84,\u5982\u914d\u7f6e\u4e3a ",(0,s.jsx)(n.code,{children:"/stats"})," \u5219\u53ef\u901a\u8fc7\u8be5\u8def\u5f84\u83b7\u53d6\u6027\u80fd\u6307\u6807"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a,\u53ef\u9009 ",(0,s.jsx)(n.code,{children:"request"})," \u6216 ",(0,s.jsx)(n.code,{children:"proxy_upstream"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u65b9\u5f0f",children:"\u4f7f\u7528\u65b9\u5f0f"}),"\n",(0,s.jsxs)(n.p,{children:["\u914d\u7f6e\u5b8c\u6210\u540e,\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u5bf9\u5e94 location \u4e0b\u7684 ",(0,s.jsx)(n.code,{children:"/stats"})," \u8def\u5f84\u83b7\u53d6\u6027\u80fd\u6307\u6807\u6570\u636e\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Stats\u63d2\u4ef6\u914d\u7f6e\u754c\u9762",src:i(3853).A+"",width:"1984",height:"1266"})}),"\n",(0,s.jsx)(n.h2,{id:"ping",children:"Ping"}),"\n",(0,s.jsxs)(n.p,{children:["Ping\u63d2\u4ef6\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9,\u7528\u4e8e\u76d1\u63a7\u670d\u52a1\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u3002\u5f53\u914d\u7f6e\u4e86\u53cd\u5411\u4ee3\u7406\u65f6,\u4e5f\u53ef\u4ee5\u4f5c\u4e3a pingap \u7684\u5065\u5eb7\u68c0\u67e5\u673a\u5236\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.pingpong]\ncategory = "ping" \npath = "/ping"  # \u5065\u5eb7\u68c0\u67e5\u8def\u5f84\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-1",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"}),': \u5065\u5eb7\u68c0\u67e5\u7684\u8bbf\u95ee\u8def\u5f84,\u8bbf\u95ee\u8be5\u8def\u5f84\u65f6\u4f1a\u8fd4\u56de "pong" \u54cd\u5e94']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a,\u4ec5\u652f\u6301 ",(0,s.jsx)(n.code,{children:"request"})," \u9636\u6bb5"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u65b9\u5f0f-1",children:"\u4f7f\u7528\u65b9\u5f0f"}),"\n",(0,s.jsxs)(n.p,{children:["\u914d\u7f6e\u5b8c\u6210\u540e,\u8bbf\u95ee\u5bf9\u5e94\u7684 path \u8def\u5f84(\u5982 ",(0,s.jsx)(n.code,{children:"/ping"}),')\u5373\u53ef\u83b7\u5f97 "pong" \u54cd\u5e94,\u7528\u4e8e\u9a8c\u8bc1\u670d\u52a1\u662f\u5426\u5b58\u6d3b\u3002']}),"\n",(0,s.jsx)(n.h2,{id:"admin",children:"Admin"}),"\n",(0,s.jsx)(n.p,{children:"Admin \u63d2\u4ef6\u7528\u4e8e\u4e3a\u73b0\u6709 location \u6dfb\u52a0\u7ba1\u7406\u540e\u53f0\u529f\u80fd\u3002\u914d\u7f6e\u793a\u4f8b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.admin]\nauthorizations = ["YWRtaW46MTIzMTIz"] # base64(admin:123123)\ncategory = "admin"\nip_fail_limit = 10\nmax_age = "7d" \npath = "/pingap"\nremark = "\u7ba1\u7406\u540e\u53f0"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-2",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"authorizations"}),": Basic \u8ba4\u8bc1\u7684\u5bc6\u94a5\u5217\u8868\uff0c\u4f7f\u7528 base64 \u7f16\u7801\u7684 ",(0,s.jsx)(n.code,{children:"\u7528\u6237\u540d:\u5bc6\u7801"})," \u683c\u5f0f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ip_fail_limit"}),": \u5355\u4e2a IP \u5141\u8bb8\u7684\u6700\u5927\u8ba4\u8bc1\u5931\u8d25\u6b21\u6570"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"}),": \u7ba1\u7406\u540e\u53f0\u8bbf\u95ee\u8def\u5f84"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"max_age"}),": \u767b\u5f55\u4f1a\u8bdd\u6709\u6548\u671f\uff0c\u9ed8\u8ba4\u4e3a 2 \u5929"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a\uff0c\u53ef\u9009 ",(0,s.jsx)(n.code,{children:"request"})," \u6216 ",(0,s.jsx)(n.code,{children:"proxy_upstream"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u65b9\u5f0f-2",children:"\u4f7f\u7528\u65b9\u5f0f"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u5c06\u63d2\u4ef6\u914d\u7f6e\u5173\u8054\u5230\u6307\u5b9a location"}),"\n",(0,s.jsxs)(n.li,{children:["\u8bbf\u95ee\u8be5 location \u4e0b\u7684\u914d\u7f6e\u8def\u5f84(\u5982 ",(0,s.jsx)(n.code,{children:"/pingap/"}),")\u5373\u53ef\u8fdb\u5165\u7ba1\u7406\u540e\u53f0"]}),"\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528\u914d\u7f6e\u7684\u8d26\u53f7\u5bc6\u7801\u767b\u5f55(\u793a\u4f8b\u4e2d\u4e3a ",(0,s.jsx)(n.code,{children:"admin/123123"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Admin",src:i(8761).A+"",width:"1976",height:"1414"})}),"\n",(0,s.jsx)(n.h2,{id:"directory",children:"Directory"}),"\n",(0,s.jsx)(n.p,{children:"Directory \u63d2\u4ef6\u63d0\u4f9b\u9759\u6001\u6587\u4ef6\u670d\u52a1\u529f\u80fd\uff0c\u652f\u6301\u6587\u4ef6\u6d4f\u89c8\u548c\u4e0b\u8f7d\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-1",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.downloadsServe]\ncategory = "directory"\npath = "~/Downloads"\nchunk_size = "4kb"\nmax_age = "1h"\nprivate = true\nindex = "index.html"\ncharset = "utf-8"\nautoindex = true\ndownload = true\nheaders = [\n    "X-Server:pingap",\n]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-3",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"}),": \u9759\u6001\u6587\u4ef6\u76ee\u5f55\u8def\u5f84"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"chunk_size"}),": HTTP \u5206\u5757\u4f20\u8f93\u5927\u5c0f\uff0c\u9ed8\u8ba4 ",(0,s.jsx)(n.code,{children:"8kb"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"max_age"}),": HTTP \u7f13\u5b58\u65f6\u95f4","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u9ed8\u8ba4\u4e0d\u8bbe\u7f6e\u7f13\u5b58"}),"\n",(0,s.jsxs)(n.li,{children:["\u5bf9 ",(0,s.jsx)(n.code,{children:"text/html"})," \u7c7b\u578b\u59cb\u7ec8\u7981\u7528\u7f13\u5b58"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5982 ",(0,s.jsx)(n.code,{children:"1h"})," \u8868\u793a\u7f13\u5b58 1 \u5c0f\u65f6"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"private"}),": \u662f\u5426\u5c06\u7f13\u5b58\u8bbe\u4e3a ",(0,s.jsx)(n.code,{children:"private"}),"\uff08\u9ed8\u8ba4\u4e3a ",(0,s.jsx)(n.code,{children:"public"}),"\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"index"}),": \u9ed8\u8ba4\u7d22\u5f15\u6587\u4ef6\u540d\uff0c\u9ed8\u8ba4\u4e3a ",(0,s.jsx)(n.code,{children:"index.html"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"charset"}),": \u6307\u5b9a\u5b57\u7b26\u96c6\u7f16\u7801\uff0c\u9ed8\u8ba4\u4e0d\u8bbe\u7f6e"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"autoindex"}),": \u662f\u5426\u542f\u7528\u76ee\u5f55\u6d4f\u89c8","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u542f\u7528\u540e ",(0,s.jsx)(n.code,{children:"index"})," \u53c2\u6570\u5c06\u5931\u6548"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"download"}),": \u662f\u5426\u542f\u7528\u6587\u4ef6\u4e0b\u8f7d","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u542f\u7528\u540e\u5c06\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"Content-Disposition"})," \u54cd\u5e94\u5934"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"headers"}),": \u81ea\u5b9a\u4e49 HTTP \u54cd\u5e94\u5934\u5217\u8868"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a\uff0c\u53ef\u9009 ",(0,s.jsx)(n.code,{children:"request"})," \u6216 ",(0,s.jsx)(n.code,{children:"proxy_upstream"}),"\uff0c\u82e5\u8bbe\u7f6e\u4e3a",(0,s.jsx)(n.code,{children:"proxy_upstream"}),"\u5e76\u6dfb\u52a0\u76f8\u5e94\u7684\u7f13\u5b58\u63d2\u4ef6\uff0c\u53ef\u5927\u5e45\u5ea6\u63d0\u4f9b\u6027\u80fd"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u65b9\u5f0f-3",children:"\u4f7f\u7528\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u754c\u9762\u4e2d\u914d\u7f6e\u9759\u6001\u6587\u4ef6\u76ee\u5f55\u8def\u5f84\uff0c\u6839\u636e\u9700\u8981\u8c03\u6574\u5176\u4ed6\u53c2\u6570\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Directory",src:i(2809).A+"",width:"1980",height:"1404"})}),"\n",(0,s.jsx)(n.h2,{id:"mock",children:"Mock"}),"\n",(0,s.jsxs)(n.p,{children:["Mock \u63d2\u4ef6\u7528\u4e8e\u6a21\u62df HTTP \u54cd\u5e94\uff0c\u53ef\u7528\u4e8e\u6d4b\u8bd5\u6216\u4e34\u65f6\u670d\u52a1\u964d\u7ea7\u3002\u652f\u6301\u81ea\u5b9a\u4e49\u54cd\u5e94\u5185\u5bb9\u3001\u72b6\u6001\u7801\u548c\u54cd\u5e94\u5934\uff0c\u8bbf\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-2",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.errorMock]\ncategory = "mock"\ndata = \'{"error": "error message"}\'\ndelay = "1s"\nheaders = [\n    "X-Error:CustomRrror",\n    "Content-Type:application/json",\n]\npath = "/"\nstatus = 500\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-4",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data"}),": \u6a21\u62df\u7684\u54cd\u5e94\u6570\u636e","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5bf9\u4e8e\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\uff0c\u9700\u5728 ",(0,s.jsx)(n.code,{children:"headers"})," \u4e2d\u6307\u5b9a\u5bf9\u5e94\u7684 ",(0,s.jsx)(n.code,{children:"Content-Type"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"headers"}),": \u81ea\u5b9a\u4e49\u54cd\u5e94\u5934\u5217\u8868"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"}),": \u9700\u8981\u6a21\u62df\u54cd\u5e94\u7684\u8bf7\u6c42\u8def\u5f84","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e0d\u914d\u7f6e\u5219\u5339\u914d\u6240\u6709\u8def\u5f84"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"status"}),": HTTP \u54cd\u5e94\u72b6\u6001\u7801"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"delay"}),": \u54cd\u5e94\u5ef6\u8fdf\u65f6\u95f4"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u65b9\u5f0f-4",children:"\u4f7f\u7528\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u754c\u9762\u4e2d\u914d\u7f6e\u54cd\u5e94\u6570\u636e\u548c\u76f8\u5173\u53c2\u6570\uff0c\u6ce8\u610f\u6839\u636e\u54cd\u5e94\u6570\u636e\u7c7b\u578b\u8bbe\u7f6e\u6b63\u786e\u7684 Content-Type\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Mock",src:i(116).A+"",width:"1984",height:"1502"})}),"\n",(0,s.jsx)(n.h2,{id:"redirect",children:"Redirect"}),"\n",(0,s.jsxs)(n.p,{children:["Redirect \u63d2\u4ef6\u7528\u4e8e HTTP \u8bf7\u6c42\u91cd\u5b9a\u5411\uff0c\u652f\u6301\u6dfb\u52a0 URL \u524d\u7f00\u6216\u5c06 HTTP \u8bf7\u6c42\u91cd\u5b9a\u5411\u81f3 HTTPS\uff0c\u8bbf\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-3",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.http2https]\ncategory = "redirect"\nhttp_to_https = true\nprefix = "/api"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-5",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"http_to_https"}),": \u662f\u5426\u5c06 HTTP \u8bf7\u6c42\u91cd\u5b9a\u5411\u81f3 HTTPS"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prefix"}),": \u91cd\u5b9a\u5411\u65f6\u8981\u6dfb\u52a0\u7684 URL \u524d\u7f00"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a\uff0c\u4ec5\u652f\u6301 ",(0,s.jsx)(n.code,{children:"request"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u65b9\u5f0f-5",children:"\u4f7f\u7528\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u754c\u9762\u4e2d\u914d\u7f6e\u91cd\u5b9a\u5411\u53c2\u6570\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u542f\u7528 HTTPS \u91cd\u5b9a\u5411\uff1a\u52fe\u9009 ",(0,s.jsx)(n.code,{children:"http_to_https"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u6dfb\u52a0 URL \u524d\u7f00\uff1a\u5728 ",(0,s.jsx)(n.code,{children:"prefix"})," \u5b57\u6bb5\u4e2d\u586b\u5199\uff08\u53ef\u9009\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Redirect Https",src:i(8154).A+"",width:"1982",height:"908"})}),"\n",(0,s.jsx)(n.h2,{id:"cache",children:"Cache"}),"\n",(0,s.jsxs)(n.p,{children:["\u7f13\u5b58\u4e2d\u95f4\u4ef6\uff0c\u7528\u4e8e\u7f13\u5b58 HTTP \u8bf7\u6c42\u3002\u7531\u4e8e\u7f13\u5b58\u6682\u65f6\u4ec5\u652f\u6301\u5168\u5c40\u521d\u59cb\u5316\uff0c\u4e3a\u907f\u514d\u76f8\u540c URL \u7684\u51b2\u7a81\uff0c\u5efa\u8bae\u6bcf\u4e2a location \u4f7f\u7528\u4e0d\u540c\u7684\u63d2\u4ef6\u8bbe\u7f6e\u4e0d\u540c\u7684 namespace\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u6267\u884c\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-4",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.chartsCache]\ncategory = "cache"\neviction = true\nheaders = ["Accept-Encoding"]\nlock = "3s"\nmax_file_size = "100kb"\nmax_ttl = "1h"\nnamespace = "charts"\npredictor = true\npurge_ip_list = [\n    "127.0.0.1",\n    "192.168.1.1/24"\n]\ncheck_cache_control = false\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-6",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"lock"}),": \u7f13\u5b58\u4e0d\u5b58\u5728\u8bf7\u6c42\u8f6c\u53d1\u81f3upstream\u7b49\u5f85\u65f6\uff0c\u76f8\u540c\u8bf7\u6c42\u7684\u7b49\u5f85\u65f6\u957f\uff0c\u9ed8\u8ba4\u4e3a 1 \u79d2","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7528\u4e8e\u907f\u514d\u7f13\u5b58\u51fb\u7a7f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"max_file_size"}),": \u5355\u4e2a\u7f13\u5b58\u6587\u4ef6\u7684\u6700\u5927\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a 1MB","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5efa\u8bae\u8bbe\u7f6e\u5408\u7406\u7684\u503c\uff0c\u907f\u514d\u8fc7\u5927\u7684\u54cd\u5e94\u5360\u7528\u8fc7\u591a\u5185\u5b58"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"namespace"}),": \u7f13\u5b58\u547d\u540d\u7a7a\u95f4","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7f13\u5b58\u952e\u57fa\u4e8e namespace + path + querystring \u751f\u6210"}),"\n",(0,s.jsx)(n.li,{children:"\u591a\u57df\u540d\u573a\u666f\u5efa\u8bae\u4f7f\u7528\u4e0d\u540c\u7684\u547d\u540d\u7a7a\u95f4"}),"\n",(0,s.jsx)(n.li,{children:"\u6587\u4ef6\u7f13\u5b58\u65f6\u5bf9\u5e94\u5355\u72ec\u7684\u6587\u4ef6\u76ee\u5f55"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"max_ttl"}),": \u7f13\u5b58\u7684\u6700\u957f\u6709\u6548\u671f","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5f53\u4e0a\u6e38\u54cd\u5e94\u7684 ",(0,s.jsx)(n.code,{children:"Cache-Control"})," \u7684 ",(0,s.jsx)(n.code,{children:"max-age"})," \u8f83\u957f\u65f6\uff0c\u5efa\u8bae\u8bbe\u7f6e\u8f83\u77ed\u7684 ",(0,s.jsx)(n.code,{children:"s-maxage"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u5f53\u4e0a\u6e38\u672a\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"s-maxage"})," \u65f6\uff0c\u53ef\u901a\u8fc7\u6b64\u914d\u7f6e\u9650\u5236\u7f13\u5b58\u65f6\u95f4"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"eviction"}),": \u662f\u5426\u542f\u7528\u7f13\u5b58\u6e05\u9664\u673a\u5236","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5f53\u7f13\u5b58\u8d85\u9650\u65f6\u89e6\u53d1\u6e05\u9664"}),"\n",(0,s.jsx)(n.li,{children:"\u6587\u4ef6\u7f13\u5b58\u4f1a\u81ea\u52a8\u6e05\u9664\u957f\u671f\u672a\u8bbf\u95ee\u7684\u7f13\u5b58\uff0c\u53ef\u4e0d\u8bbe\u7f6e"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"predictor"}),": \u662f\u5426\u8bb0\u5f55\u65e0\u6cd5\u7f13\u5b58\u7684\u8bf7\u6c42","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u907f\u514d\u91cd\u590d\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u53ef\u7f13\u5b58"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"headers"}),": \u4f5c\u4e3a\u7f13\u5b58\u952e\u4e00\u90e8\u5206\u7684\u8bf7\u6c42\u5934\u5217\u8868","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5f53\u54cd\u5e94\u7684\u7f13\u5b58\u4f9d\u8d56\u7279\u5b9a\u8bf7\u6c42\u5934\u65f6\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.li,{children:["\u4f8b\u5982\uff1a\u4e0a\u6e38\u652f\u6301\u4e0d\u540c\u538b\u7f29\u7b97\u6cd5\u65f6\uff0c\u9700\u5305\u542b ",(0,s.jsx)(n.code,{children:"Accept-Encoding"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"purge_ip_list"}),": \u5141\u8bb8\u6267\u884c purge \u8bf7\u6c42\u7684 IP \u5217\u8868\uff0c\u9ed8\u8ba4\u4e3a\u7a7a"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"skip"}),": \u8df3\u8fc7\u7f13\u5b58\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u8bf7\u6c42url\u5339\u914d\u5219\u8df3\u8fc7\u7f13\u5b58\u63d2\u4ef6\uff0c\u9ed8\u8ba4\u4e3a\u7a7a","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7528\u4e8e\u5feb\u901f\u8df3\u8fc7\u67d0\u4e9b\u8bf7\u6c42\u7684\u7f13\u5b58\u5224\u65ad"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"check_cache_control"}),": \u6821\u9a8ccache-control\u54cd\u5e94\u5934\uff0c\u82e5\u65e0\u5747\u8ba4\u4e3a\u4e0d\u53ef\u7f13\u5b58"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u754c\u9762\u914d\u7f6e",children:"\u754c\u9762\u914d\u7f6e"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Cache",src:i(5430).A+"",width:"1976",height:"1188"})}),"\n",(0,s.jsx)(n.h2,{id:"requestid",children:"RequestId"}),"\n",(0,s.jsxs)(n.p,{children:["\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u6dfb\u52a0\u552f\u4e00\u6807\u8bc6\u7b26\u3002\u9ed8\u8ba4\u6dfb\u52a0\u5230 ",(0,s.jsx)(n.code,{children:"X-Request-Id"})," \u8bf7\u6c42\u5934\u4e2d(\u53ef\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\u540d\u79f0)\u3002\u5982\u679c\u8bf7\u6c42\u4e2d\u5df2\u5b58\u5728\u8be5\u8bf7\u6c42\u5934\uff0c\u5219\u4fdd\u7559\u539f\u503c\u4e0d\u505a\u4fee\u6539\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-5",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.customReqId]\nalgorithm = "nanoid"  # \u53ef\u9009: uuid \u6216 nanoid\ncategory = "request_id"\nsize = 8              # nanoid \u957f\u5ea6\uff0c\u4ec5\u5728 algorithm=nanoid \u65f6\u6709\u6548\nheader = "X-Request-Id"  # \u53ef\u9009\uff1a\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\u540d\u79f0\nstep = "request"      # \u53ef\u9009: request \u6216 proxy_upstream\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-7",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"algorithm"}),": \u751f\u6210\u8bf7\u6c42 ID \u7684\u7b97\u6cd5","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"uuid"}),": \u4f7f\u7528 UUID v4 \u683c\u5f0f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"nanoid"}),": \u4f7f\u7528 NanoID \u683c\u5f0f(\u66f4\u77ed\u3001URL \u5b89\u5168)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"size"}),": NanoID \u957f\u5ea6\uff0c\u4ec5\u5f53 algorithm=nanoid \u65f6\u6709\u6548"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"header"}),": \u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e3a ",(0,s.jsx)(n.code,{children:"X-Request-Id"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a\uff0c\u53ef\u9009 ",(0,s.jsx)(n.code,{children:"request"})," \u6216 ",(0,s.jsx)(n.code,{children:"proxy_upstream"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u573a\u666f",children:"\u4f7f\u7528\u573a\u666f"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8bf7\u6c42\u8ffd\u8e2a\uff1a\u65b9\u4fbf\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u8ffd\u8e2a\u8bf7\u6c42\u94fe\u8def"}),"\n",(0,s.jsx)(n.li,{children:"\u65e5\u5fd7\u5173\u8054\uff1a\u901a\u8fc7\u8bf7\u6c42 ID \u5173\u8054\u4e0d\u540c\u670d\u52a1\u7684\u65e5\u5fd7"}),"\n",(0,s.jsx)(n.li,{children:"\u95ee\u9898\u6392\u67e5\uff1a\u4f7f\u7528\u8bf7\u6c42 ID \u5feb\u901f\u5b9a\u4f4d\u95ee\u9898"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Request Id",src:i(8397).A+"",width:"1974",height:"908"})}),"\n",(0,s.jsx)(n.h2,{id:"compression",children:"Compression"}),"\n",(0,s.jsx)(n.p,{children:"HTTP \u54cd\u5e94\u538b\u7f29\u63d2\u4ef6\uff0c\u7528\u4e8e\u5904\u7406\u4e0a\u6e38\u8fd4\u56de\u6570\u636e\u7684\u538b\u7f29\u3002\u652f\u6301 gzip\u3001brotli(br) \u548c zstd \u4e09\u79cd\u538b\u7f29\u7b97\u6cd5\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u5de5\u4f5c\u539f\u7406",children:"\u5de5\u4f5c\u539f\u7406"}),"\n",(0,s.jsxs)(n.p,{children:["\u7531\u4e8e Pingora \u9ed8\u8ba4\u7684\u538b\u7f29\u7b97\u6cd5\u5339\u914d\u987a\u5e8f\u4e3a ",(0,s.jsx)(n.code,{children:"gzip --\x3e br --\x3e zstd"}),"\uff0c\u800c\u73b0\u4ee3\u6d4f\u89c8\u5668\u5bf9\u8fd9\u4e9b\u7b97\u6cd5\u7684\u652f\u6301\u60c5\u51b5\u4e3a\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"gzip: \u57fa\u672c\u5168\u90e8\u652f\u6301"}),"\n",(0,s.jsx)(n.li,{children:"br(brotli): \u5927\u90e8\u5206\u652f\u6301"}),"\n",(0,s.jsx)(n.li,{children:"zstd: \u90e8\u5206\u652f\u6301"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e3a\u4e86\u4f18\u5316\u538b\u7f29\u6548\u679c\uff0cpingap\u4f1a\u6839\u636e\u914d\u7f6e\u4ee5\u53ca\u6d4f\u89c8\u5668\u652f\u6301\u7684\u538b\u7f29\u7b97\u6cd5\uff0c\u6309",(0,s.jsx)(n.code,{children:"zstd --\x3e br --\x3e gzip"}),"\u7684\u89c4\u5219\u8bbe\u7f6e\uff0c\u53ea\u8bbe\u7f6e\u4e00\u4e2a\u538b\u7f29\u7b97\u6cd5\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-6",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.commonCompression]\ncategory = "compression"\nbr_level = 6      # brotli \u538b\u7f29\u7ea7\u522b (0-11)\ngzip_level = 6    # gzip \u538b\u7f29\u7ea7\u522b (0-9)\nzstd_level = 5    # zstd \u538b\u7f29\u7ea7\u522b (0-22)\ndecompression = true\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-8",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"br_level"}),": brotli \u538b\u7f29\u7ea7\u522b\uff0c\u8303\u56f4 0-11\uff0c0 \u8868\u793a\u7981\u7528"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gzip_level"}),": gzip \u538b\u7f29\u7ea7\u522b\uff0c\u8303\u56f4 0-9\uff0c0 \u8868\u793a\u7981\u7528"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"zstd_level"}),": zstd \u538b\u7f29\u7ea7\u522b\uff0c\u8303\u56f4 0-22\uff0c0 \u8868\u793a\u7981\u7528"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"decompression"}),": \u662f\u5426\u89e3\u538b\u4e0a\u6e38\u8fd4\u56de\u7684\u538b\u7f29\u6570\u636e"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5185\u7f6e\u914d\u7f6e",children:"\u5185\u7f6e\u914d\u7f6e"}),"\n",(0,s.jsxs)(n.p,{children:["\u53ef\u4ee5\u4f7f\u7528\u5185\u7f6e\u7684 ",(0,s.jsx)(n.code,{children:"pingap:compression"})," \u63d2\u4ef6\uff0c\u5176\u9ed8\u8ba4\u914d\u7f6e\u4e3a\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"gzip_level = 6"}),"\n",(0,s.jsx)(n.li,{children:"br_level = 6"}),"\n",(0,s.jsx)(n.li,{children:"zstd_level = 3"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6267\u884c\u9636\u6bb5",children:"\u6267\u884c\u9636\u6bb5"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d2\u4ef6\u56fa\u5b9a\u5728 ",(0,s.jsx)(n.code,{children:"early_request"})," \u9636\u6bb5\u6267\u884c\uff0c\u65e0\u9700\u624b\u52a8\u6307\u5b9a\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Compression",src:i(2890).A+"",width:"1976",height:"896"})}),"\n",(0,s.jsx)(n.h2,{id:"acceptencoding",children:"AcceptEncoding"}),"\n",(0,s.jsx)(n.p,{children:"\u7528\u4e8e\u7ba1\u7406\u548c\u4f18\u5316 HTTP \u8bf7\u6c42\u7684 Accept-Encoding \u5934\uff0c\u5141\u8bb8\u81ea\u5b9a\u4e49\u652f\u6301\u7684\u538b\u7f29\u7b97\u6cd5\u53ca\u5176\u4f18\u5148\u987a\u5e8f\uff0c\u987a\u5e8f\u5efa\u8bae\u4e3azdt > br > gzip\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-7",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.acceptEncoding]\ncategory = "accept_encoding"\nencodings = "zstd, br, gzip"    # \u652f\u6301\u7684\u7f16\u7801\u53ca\u4f18\u5148\u987a\u5e8f\nonly_one_encoding = true        # \u662f\u5426\u4ec5\u4f7f\u7528\u5355\u4e00\u7f16\u7801\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-9",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"encodings"}),": \u6307\u5b9a\u652f\u6301\u7684\u538b\u7f29\u7b97\u6cd5\u53ca\u5176\u4f18\u5148\u987a\u5e8f","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u591a\u4e2a\u7b97\u6cd5\u7528\u9017\u53f7\u5206\u9694"}),"\n",(0,s.jsx)(n.li,{children:"\u987a\u5e8f\u4ece\u5de6\u5230\u53f3\u8868\u793a\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u7684\u7b97\u6cd5: zstd\u3001br\u3001gzip"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"only_one_encoding"}),": \u662f\u5426\u4ec5\u4fdd\u7559\u4e00\u79cd\u7f16\u7801\u65b9\u5f0f","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"true"}),": \u4ec5\u4f7f\u7528\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u652f\u6301\u7684\u7f16\u7801"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"false"}),": \u4fdd\u7559\u6240\u6709\u652f\u6301\u7684\u7f16\u7801\uff0c\u6309\u4f18\u5148\u7ea7\u6392\u5e8f"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6267\u884c\u9636\u6bb5-1",children:"\u6267\u884c\u9636\u6bb5"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d2\u4ef6\u56fa\u5b9a\u5728 ",(0,s.jsx)(n.code,{children:"early_request"})," \u9636\u6bb5\u6267\u884c\uff0c\u65e0\u9700\u624b\u52a8\u6307\u5b9a\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"keyauth",children:"KeyAuth"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b\u7b80\u5355\u7684 API \u5bc6\u94a5\u8ba4\u8bc1\u673a\u5236\uff0c\u652f\u6301\u4ece\u8bf7\u6c42\u53c2\u6570(query)\u6216\u8bf7\u6c42\u5934(header)\u4e2d\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f\u3002\u53ef\u914d\u7f6e\u591a\u4e2a\u6709\u6548\u5bc6\u94a5\uff0c\u65b9\u4fbf\u591a\u7cfb\u7edf\u63a5\u5165\uff0c\u8bbf\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-8",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.h4,{id:"\u4ece\u8bf7\u6c42\u53c2\u6570\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f",children:"\u4ece\u8bf7\u6c42\u53c2\u6570\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.queryAuth]\ncategory = "key_auth"\nquery = "app"           # \u4ece URL \u53c2\u6570 app \u4e2d\u83b7\u53d6\u5bc6\u94a5\nkeys = [               # \u5141\u8bb8\u7684\u5bc6\u94a5\u5217\u8868\n    "KOXQaw",\n    "GKvXY2",\n]\ndelay = "1s"\nhide_credentials = true\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u4ece\u8bf7\u6c42\u5934\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f",children:"\u4ece\u8bf7\u6c42\u5934\u83b7\u53d6\u8ba4\u8bc1\u4fe1\u606f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.headerAuth]\ncategory = "key_auth"\nheader = "X-App"        # \u4ece\u8bf7\u6c42\u5934 X-App \u4e2d\u83b7\u53d6\u5bc6\u94a5\nkeys = [               # \u5141\u8bb8\u7684\u5bc6\u94a5\u5217\u8868\n    "KOXQaw",\n    "GKvXY2",\n]\ndelay = "1s"\nhide_credentials = true\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-10",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"query"}),": \u4ece\u8bf7\u6c42\u53c2\u6570\u4e2d\u83b7\u53d6\u5bc6\u94a5\u7684\u53c2\u6570\u540d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"header"}),": \u4ece\u8bf7\u6c42\u5934\u4e2d\u83b7\u53d6\u5bc6\u94a5\u7684\u5934\u90e8\u540d\u79f0","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"query"})," \u548c ",(0,s.jsx)(n.code,{children:"header"})," \u4e8c\u9009\u4e00\uff0c\u540c\u65f6\u914d\u7f6e\u65f6\u4f18\u5148\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"query"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"keys"}),": \u5141\u8bb8\u7684\u5bc6\u94a5\u5217\u8868"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"delay"}),": \u8ba4\u8bc1\u5931\u8d25\u65f6\u7684\u54cd\u5e94\u5ef6\u8fdf\u65f6\u95f4"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"hide_credentials"}),": \u662f\u5426\u5728\u8f6c\u53d1\u8bf7\u6c42\u65f6\u79fb\u9664\u8ba4\u8bc1\u4fe1\u606f"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u754c\u9762\u914d\u7f6e-1",children:"\u754c\u9762\u914d\u7f6e"}),"\n",(0,s.jsx)(n.p,{children:"\u914d\u7f6e\u5bc6\u94a5\u83b7\u53d6\u65b9\u5f0f\uff08\u8bf7\u6c42\u53c2\u6570\u6216\u8bf7\u6c42\u5934\uff09\u53ca\u5bf9\u5e94\u7684\u6709\u6548\u5bc6\u94a5\u5217\u8868\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Key Auth",src:i(8558).A+"",width:"1978",height:"1344"})}),"\n",(0,s.jsx)(n.h2,{id:"basicauth",children:"BasicAuth"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b HTTP Basic Authentication \u8ba4\u8bc1\u529f\u80fd\u3002\u652f\u6301\u914d\u7f6e\u591a\u7ec4\u7528\u6237\u540d/\u5bc6\u7801\u5bf9,\u9700\u4ee5 base64 \u7f16\u7801\u683c\u5f0f\u914d\u7f6e\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u6267\u884c\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-9",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.testBasicAuth]\nauthorizations = [\n    "YWRtaW46dGVzdA==",    # admin:test\n    "YWRtaW46MTIzMTIz",    # admin:123123\n]\ncategory = "basic_auth"\ndelay = "1s"\nhide_credentials = true\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-11",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"authorizations"}),": \u8ba4\u8bc1\u51ed\u636e\u5217\u8868","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u683c\u5f0f\u4e3a ",(0,s.jsx)(n.code,{children:"base64(username:password)"})]}),"\n",(0,s.jsx)(n.li,{children:"\u53ef\u914d\u7f6e\u591a\u7ec4\u51ed\u636e"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"delay"}),": \u8ba4\u8bc1\u5931\u8d25\u65f6\u7684\u54cd\u5e94\u5ef6\u8fdf\u65f6\u95f4"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"hide_credentials"}),": \u662f\u5426\u5728\u8f6c\u53d1\u8bf7\u6c42\u65f6\u79fb\u9664\u8ba4\u8bc1\u4fe1\u606f"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u8bf4\u660e",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5c06\u7528\u6237\u540d\u548c\u5bc6\u7801\u6309 ",(0,s.jsx)(n.code,{children:"username:password"})," \u683c\u5f0f\u62fc\u63a5"]}),"\n",(0,s.jsx)(n.li,{children:"\u5bf9\u62fc\u63a5\u7ed3\u679c\u8fdb\u884c base64 \u7f16\u7801"}),"\n",(0,s.jsxs)(n.li,{children:["\u5c06\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32\u6dfb\u52a0\u5230 ",(0,s.jsx)(n.code,{children:"authorizations"})," \u5217\u8868\u4e2d"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u4f8b\u5982:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"admin:test"})," -> ",(0,s.jsx)(n.code,{children:"YWRtaW46dGVzdA=="})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"admin:123123"})," -> ",(0,s.jsx)(n.code,{children:"YWRtaW46MTIzMTIz"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Basic Auth",src:i(1207).A+"",width:"1984",height:"1164"})}),"\n",(0,s.jsx)(n.h2,{id:"jwt",children:"JWT"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b JWT (JSON Web Token) \u8ba4\u8bc1\u529f\u80fd\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u3002\u5305\u542b\u4e24\u4e2a\u4e3b\u8981\u529f\u80fd:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u5728\u6307\u5b9a\u8def\u5f84\u751f\u6210 JWT token"}),"\n",(0,s.jsx)(n.li,{children:"\u9a8c\u8bc1\u8bf7\u6c42\u4e2d\u643a\u5e26\u7684 JWT token \u662f\u5426\u6709\u6548"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-10",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.jwtAuth]\nalgorithm = "HS256"\nauth_path = "/jwt-sign"\ncategory = "jwt"\ndelay = "1s"\nheader = "X-Jwt"\nsecret = "123123"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-12",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"auth_path"}),": \u7528\u4e8e\u751f\u6210 JWT token \u7684\u8def\u5f84","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8bbf\u95ee\u8be5\u8def\u5f84\u65f6,\u4f1a\u5c06\u54cd\u5e94\u6570\u636e\u4f5c\u4e3a payload \u751f\u6210 token"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"algorithm"}),": JWT \u7b7e\u540d\u7b97\u6cd5,\u76ee\u524d\u652f\u6301 HS256"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"secret"}),": \u7b7e\u540d\u5bc6\u94a5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"header"}),": \u4ece\u8bf7\u6c42\u5934\u83b7\u53d6 token \u7684\u5b57\u6bb5\u540d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cookie"}),": \u4ece cookie \u83b7\u53d6 token \u7684\u5b57\u6bb5\u540d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"query"}),": \u4ece URL \u53c2\u6570\u83b7\u53d6 token \u7684\u5b57\u6bb5\u540d","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"token \u83b7\u53d6\u4f18\u5148\u7ea7: header > cookie > query"}),"\n",(0,s.jsx)(n.li,{children:"\u4e09\u4e2a\u53c2\u6570\u81f3\u5c11\u914d\u7f6e\u5176\u4e2d\u4e00\u4e2a"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"delay"}),": \u8ba4\u8bc1\u5931\u8d25\u65f6\u7684\u54cd\u5e94\u5ef6\u8fdf\u65f6\u95f4"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5de5\u4f5c\u6d41\u7a0b",children:"\u5de5\u4f5c\u6d41\u7a0b"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u751f\u6210 token:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"auth_path"})," \u914d\u7f6e\u7684\u8def\u5f84"]}),"\n",(0,s.jsx)(n.li,{children:"\u5c06\u54cd\u5e94\u6570\u636e\u4f5c\u4e3a payload \u7b7e\u540d\u751f\u6210 token"}),"\n",(0,s.jsx)(n.li,{children:"\u8fd4\u56de\u751f\u6210\u7684 token"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u9a8c\u8bc1 token:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8bbf\u95ee\u5176\u4ed6\u8def\u5f84\u65f6,\u6309\u4f18\u5148\u7ea7\u83b7\u53d6 token"}),"\n",(0,s.jsx)(n.li,{children:"\u9a8c\u8bc1 token \u7684\u7b7e\u540d\u548c\u6709\u6548\u6027"}),"\n",(0,s.jsx)(n.li,{children:"\u9a8c\u8bc1\u901a\u8fc7\u5219\u7ee7\u7eed\u5904\u7406,\u5426\u5219\u8fd4\u56de\u8ba4\u8bc1\u9519\u8bef"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Jwt",src:i(3588).A+"",width:"1982",height:"1404"})}),"\n",(0,s.jsx)(n.h2,{id:"combinedauth",children:"CombinedAuth"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b\u57fa\u4e8e\u5e94\u7528 ID\u3001\u5bc6\u94a5\u548c\u65f6\u95f4\u6233\u7684\u7ec4\u5408\u5f0f\u8ba4\u8bc1\u673a\u5236\u3002\u652f\u6301\u4e3a\u6bcf\u4e2a\u5e94\u7528\u914d\u7f6e\u72ec\u7acb\u7684\u8ba4\u8bc1\u53c2\u6570\u548c IP \u767d\u540d\u5355\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u6267\u884c\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-11",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.appAuth]\ncategory = "combined_auth"\n\n[[plugins.appAuth.authorizations]]\napp_id = "pingap"\ndeviation = 10\nip_list = [\n    "192.168.1.1/24",\n    "127.0.0.1",\n]\nsecret = "123123"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-13",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"app_id"}),": \u5e94\u7528\u6807\u8bc6\u7b26"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"secret"}),": \u7528\u4e8e\u751f\u6210\u6458\u8981\u7684\u5bc6\u94a5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deviation"}),": \u5141\u8bb8\u7684\u65f6\u95f4\u6233\u504f\u5dee(\u5355\u4f4d:\u79d2)","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7528\u4e8e\u5904\u7406\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u65f6\u95f4\u4e0d\u5b8c\u5168\u540c\u6b65\u7684\u60c5\u51b5"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ip_list"}),": \u5141\u8bb8\u8bbf\u95ee\u7684 IP \u767d\u540d\u5355","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u5355\u4e2a IP \u548c CIDR \u683c\u5f0f\u7684\u7f51\u6bb5"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a,\u4ec5\u652f\u6301 ",(0,s.jsx)(n.code,{children:"request"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u8ba4\u8bc1\u6d41\u7a0b",children:"\u8ba4\u8bc1\u6d41\u7a0b"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u5ba2\u6237\u7aef\u6784\u9020\u8bf7\u6c42\u53c2\u6570:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"app_id"}),": \u914d\u7f6e\u7684\u5e94\u7528\u6807\u8bc6\u7b26"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ts"}),": \u5f53\u524d\u65f6\u95f4\u6233"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"digest"}),": \u901a\u8fc7 SHA256 \u7b97\u6cd5\u8ba1\u7b97\u5f97\u51fa\u7684\u6458\u8981\u503c","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u8ba1\u7b97\u516c\u5f0f: ",(0,s.jsx)(n.code,{children:"SHA256(secret:timestamp)"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u8bf7\u6c42\u793a\u4f8b:"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GET /api?app_id=pingap&ts=1727582506&digest=85c623c389177a69860adfd572212507ef98c197ba5105677919e0663eeae091\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["\u670d\u52a1\u7aef\u9a8c\u8bc1:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u68c0\u67e5\u8bf7\u6c42 IP \u662f\u5426\u5728\u767d\u540d\u5355\u4e2d"}),"\n",(0,s.jsx)(n.li,{children:"\u9a8c\u8bc1\u65f6\u95f4\u6233\u662f\u5426\u5728\u5141\u8bb8\u7684\u504f\u5dee\u8303\u56f4\u5185"}),"\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528\u76f8\u540c\u7b97\u6cd5\u8ba1\u7b97\u6458\u8981\u5e76\u6bd4\u5bf9"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"limit",children:"Limit"}),"\n",(0,s.jsx)(n.p,{children:"\u63d0\u4f9b\u57fa\u4e8e\u591a\u79cd\u6761\u4ef6\u7684\u8bbf\u95ee\u9650\u5236\u529f\u80fd\u3002\u652f\u6301\u5e76\u53d1\u6570(inflight)\u548c\u8bbf\u95ee\u9891\u7387(rate)\u4e24\u79cd\u9650\u5236\u7c7b\u578b\uff0c\u53ef\u4ee5\u6839\u636e Cookie\u3001\u8bf7\u6c42\u5934\u3001URL \u53c2\u6570\u6216 IP \u5730\u5740\u8fdb\u884c\u9650\u5236\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-14",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"type"}),": \u9650\u5236\u7c7b\u578b","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"inflight"}),": \u5e76\u53d1\u8bbf\u95ee\u6570\u9650\u5236"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rate"}),": \u8bbf\u95ee\u9891\u7387\u9650\u5236"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tag"}),": \u9650\u5236\u6761\u4ef6\u6765\u6e90","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"cookie"}),": \u4ece Cookie \u83b7\u53d6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"header"}),": \u4ece\u8bf7\u6c42\u5934\u83b7\u53d6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"query"}),": \u4ece URL \u53c2\u6570\u83b7\u53d6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ip"}),": \u57fa\u4e8e\u8bbf\u95ee\u8005 IP"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"key"}),": \u83b7\u53d6\u9650\u5236\u503c\u7684\u5b57\u6bb5\u540d\u79f0","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"ip"})," \u7c7b\u578b\u65f6\u65e0\u9700\u6307\u5b9a"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"max"}),": \u6700\u5927\u5141\u8bb8\u503c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"interval"}),": \u7edf\u8ba1\u65f6\u95f4\u95f4\u9694(\u4ec5\u7528\u4e8e rate \u7c7b\u578b)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a\uff0c\u53ef\u9009 ",(0,s.jsx)(n.code,{children:"request"})," \u6216 ",(0,s.jsx)(n.code,{children:"proxy_upstream"}),"\u3002\u82e5\u8bbe\u7f6e\u4e3a",(0,s.jsx)(n.code,{children:"proxy_upstream"}),"\u518d\u589e\u52a0\u5bf9\u5e94\u7684\u7f13\u5b58\u63d2\u4ef6\uff0c\u5219\u53ef\u53ea\u9488\u5bf9\u8f6c\u53d1\u81f3upstream\u7684\u8bf7\u6c42\u624d\u4f1a\u589e\u52a0\u6b21\u6570"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-12",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u57fa\u4e8e Cookie \u7684\u5e76\u53d1\u9650\u5236:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.cookieBigTreeLimit]\ncategory = "limit"\ntype = "inflight"\ntag = "cookie"\nkey = "bigtree"\nmax = 10\nstep = "request"\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"\u57fa\u4e8e\u8bf7\u6c42\u5934\u7684\u5e76\u53d1\u9650\u5236:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.headerAppLimit]\ncategory = "limit"\ntype = "inflight"\ntag = "header"\nkey = "X-App"\nmax = 10\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"\u57fa\u4e8e URL \u53c2\u6570\u7684\u9891\u7387\u9650\u5236:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.queryAppLimit]\ncategory = "limit"\ntype = "rate"\ntag = "query"\nkey = "app"\nmax = 10\ninterval = "1s"\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:"\u57fa\u4e8e IP \u7684\u9891\u7387\u9650\u5236:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.ipLimit]\ncategory = "limit"\ntype = "rate"\ntag = "ip"\nmax = 10\ninterval = "1m"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u8865\u5145\u8bf4\u660e",children:"\u8865\u5145\u8bf4\u660e"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"IP \u83b7\u53d6\u4f18\u5148\u7ea7: X-Forwarded-For > X-Real-Ip > Remote Addr"}),"\n",(0,s.jsx)(n.li,{children:"\u5f53\u9650\u5236\u6761\u4ef6\u503c\u4e3a\u7a7a\u65f6\u4e0d\u8fdb\u884c\u9650\u5236"}),"\n",(0,s.jsxs)(n.li,{children:["\u9891\u7387\u9650\u5236\u9700\u8981\u914d\u7f6e ",(0,s.jsx)(n.code,{children:"interval"})," \u53c2\u6570"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5e76\u53d1\u9650\u5236\u4e0d\u9700\u8981\u914d\u7f6e ",(0,s.jsx)(n.code,{children:"interval"})," \u53c2\u6570"]}),"\n",(0,s.jsx)(n.li,{children:"rate\u9650\u5236\u73b0\u4ec5\u7b80\u5355\u7684\u5206\u533a\u95f4\u9650\u5236\uff0c\u6bcf\u6b21\u4ec5\u8ba1\u7b97\u4e0a\u4e00\u533a\u95f4\u7684\u8bbf\u95ee\u9891\u7387\u662f\u5426\u8d85\u9650\uff0c\u540e\u7eed\u8c03\u6574\u4e3a\u4e24\u4e2a\u533a\u95f4\u6309\u6743\u91cd\u8ba1\u7b97"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Limit",src:i(4925).A+"",width:"1980",height:"1206"})}),"\n",(0,s.jsx)(n.h2,{id:"iprestriction",children:"IpRestriction"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b\u57fa\u4e8e IP \u5730\u5740\u7684\u8bbf\u95ee\u63a7\u5236\u529f\u80fd\u3002\u652f\u6301\u8bbe\u7f6e\u5141\u8bb8(allow)\u6216\u7981\u6b62(deny)\u4e24\u79cd\u6a21\u5f0f\uff0c\u53ef\u914d\u7f6e\u5355\u4e2a IP \u5730\u5740\u6216 CIDR \u683c\u5f0f\u7684\u7f51\u6bb5\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-13",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.ipDeny]\ncategory = "ip_restriction"\nip_list = [\n    "192.168.1.1",      # \u5355\u4e2a IP \u5730\u5740\n    "1.1.1.0/24",       # CIDR \u683c\u5f0f\u7f51\u6bb5\n]\nmessage = "\u7981\u6b62\u8be5IP\u8bbf\u95ee"\ntype = "deny"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-15",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"type"}),": \u8bbf\u95ee\u63a7\u5236\u6a21\u5f0f","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"allow"}),": \u4ec5\u5141\u8bb8\u5217\u8868\u4e2d\u7684 IP \u8bbf\u95ee"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deny"}),": \u7981\u6b62\u5217\u8868\u4e2d\u7684 IP \u8bbf\u95ee"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ip_list"}),": IP \u5730\u5740\u5217\u8868","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u5355\u4e2a IP \u5730\u5740"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301 CIDR \u683c\u5f0f\u7684\u7f51\u6bb5"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"message"}),": \u8bbf\u95ee\u88ab\u62d2\u7edd\u65f6\u7684\u63d0\u793a\u4fe1\u606f"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u8bf4\u660e-1",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u9009\u62e9\u8bbf\u95ee\u63a7\u5236\u6a21\u5f0f(\u5141\u8bb8/\u7981\u6b62)"}),"\n",(0,s.jsx)(n.li,{children:"\u6dfb\u52a0\u9700\u8981\u63a7\u5236\u7684 IP \u5730\u5740\u6216\u7f51\u6bb5"}),"\n",(0,s.jsx)(n.li,{children:"\u914d\u7f6e\u88ab\u62d2\u7edd\u8bbf\u95ee\u65f6\u7684\u63d0\u793a\u4fe1\u606f"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Ip Restriction",src:i(5588).A+"",width:"1982",height:"1312"})}),"\n",(0,s.jsx)(n.h2,{id:"uarestriction",children:"UaRestriction"}),"\n",(0,s.jsx)(n.p,{children:"\u63d0\u4f9b\u57fa\u4e8e User-Agent \u7684\u8bbf\u95ee\u63a7\u5236\u529f\u80fd\u3002\u652f\u6301\u8bbe\u7f6e\u5141\u8bb8(allow)\u6216\u7981\u6b62(deny)\u4e24\u79cd\u6a21\u5f0f\uff0c\u53ef\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5339\u914d\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-14",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.userAgentDeny]\ncategory = "ua_restriction"\nua_list = [\n    "go-http-client/1.1",                  # \u7cbe\u786e\u5339\u914d\n    "(Twitterspider)/(\\\\d+)\\\\.(\\\\d+)"     # \u6b63\u5219\u5339\u914d\n]\nmessage = "\u7981\u6b62\u8bbf\u95ee"\nstep = "request"\ntype = "deny"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-16",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"type"}),": \u8bbf\u95ee\u63a7\u5236\u6a21\u5f0f","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"allow"}),": \u4ec5\u5141\u8bb8\u5217\u8868\u4e2d\u5339\u914d\u7684 User-Agent"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deny"}),": \u7981\u6b62\u5217\u8868\u4e2d\u5339\u914d\u7684 User-Agent"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ua_list"}),": User-Agent \u5339\u914d\u89c4\u5219\u5217\u8868","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u7cbe\u786e\u5339\u914d"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"message"}),": \u8bbf\u95ee\u88ab\u62d2\u7edd\u65f6\u7684\u63d0\u793a\u4fe1\u606f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a\uff0c\u4ec5\u652f\u6301 ",(0,s.jsx)(n.code,{children:"request"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u8bf4\u660e-2",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u9009\u62e9\u8bbf\u95ee\u63a7\u5236\u6a21\u5f0f(\u5141\u8bb8/\u7981\u6b62)"}),"\n",(0,s.jsxs)(n.li,{children:["\u6dfb\u52a0 User-Agent \u5339\u914d\u89c4\u5219","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u76f4\u63a5\u586b\u5199\u5b8c\u6574\u7684 User-Agent \u5b57\u7b26\u4e32\u8fdb\u884c\u7cbe\u786e\u5339\u914d"}),"\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7279\u5b9a\u6a21\u5f0f\u7684 User-Agent"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u914d\u7f6e\u88ab\u62d2\u7edd\u8bbf\u95ee\u65f6\u7684\u63d0\u793a\u4fe1\u606f"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin User Agent Restriction",src:i(129).A+"",width:"1942",height:"1308"})}),"\n",(0,s.jsx)(n.h2,{id:"refererrestriction",children:"RefererRestriction"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b\u57fa\u4e8e HTTP Referer \u7684\u8bbf\u95ee\u63a7\u5236\u529f\u80fd\u3002\u652f\u6301\u8bbe\u7f6e\u5141\u8bb8(allow)\u6216\u7981\u6b62(deny)\u4e24\u79cd\u6a21\u5f0f\uff0c\u53ef\u4f7f\u7528\u901a\u914d\u7b26(*)\u8fdb\u884c\u57df\u540d\u5339\u914d\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-15",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.referer]\ncategory = "referer_restriction"\nreferer_list = [\n    "*.github.com",     # \u5339\u914d\u6240\u6709 github.com \u7684\u5b50\u57df\u540d\n    "example.com"       # \u7cbe\u786e\u5339\u914d\n]\nmessage = "\u7981\u6b62\u8bbf\u95ee"\ntype = "allow"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-17",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"type"}),": \u8bbf\u95ee\u63a7\u5236\u6a21\u5f0f","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"allow"}),": \u4ec5\u5141\u8bb8\u5217\u8868\u4e2d\u5339\u914d\u7684 Referer"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"deny"}),": \u7981\u6b62\u5217\u8868\u4e2d\u5339\u914d\u7684 Referer"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"referer_list"}),": Referer \u5339\u914d\u89c4\u5219\u5217\u8868","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u7cbe\u786e\u5339\u914d"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u4f7f\u7528 * \u4f5c\u4e3a\u901a\u914d\u7b26\u5339\u914d\u5b50\u57df\u540d"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"message"}),": \u8bbf\u95ee\u88ab\u62d2\u7edd\u65f6\u7684\u63d0\u793a\u4fe1\u606f"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u8bf4\u660e-3",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u9009\u62e9\u8bbf\u95ee\u63a7\u5236\u6a21\u5f0f(\u5141\u8bb8/\u7981\u6b62)"}),"\n",(0,s.jsxs)(n.li,{children:["\u6dfb\u52a0 Referer \u5339\u914d\u89c4\u5219","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u76f4\u63a5\u586b\u5199\u57df\u540d\u8fdb\u884c\u7cbe\u786e\u5339\u914d"}),"\n",(0,s.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"*.domain.com"})," \u683c\u5f0f\u5339\u914d\u6240\u6709\u5b50\u57df\u540d"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"\u914d\u7f6e\u88ab\u62d2\u7edd\u8bbf\u95ee\u65f6\u7684\u63d0\u793a\u4fe1\u606f"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Referer Restriction",src:i(1754).A+"",width:"1978",height:"1208"})}),"\n",(0,s.jsx)(n.h2,{id:"csrf",children:"CSRF"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020(Cross-Site Request Forgery)\u9632\u62a4\u529f\u80fd\u3002\u901a\u8fc7\u6bd4\u5bf9\u8bf7\u6c42\u4e2d\u7684 cookie \u548c\u8bf7\u6c42\u5934\u4e2d\u7684 token \u503c\u6765\u9a8c\u8bc1\u8bf7\u6c42\u7684\u5408\u6cd5\u6027\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u6267\u884c\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-16",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.csrf]\ncategory = "csrf"\nkey = "WjrXUG47wu"\nname = "x-csrf-token"\ntoken_path = "/csrf-token"\nttl = "1h"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-18",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"key"}),": \u7528\u4e8e\u751f\u6210 token \u7684\u5bc6\u94a5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": CSRF token \u7684\u540d\u79f0","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7528\u4f5c cookie \u540d\u548c\u8bf7\u6c42\u5934\u540d"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"token_path"}),": \u83b7\u53d6 token \u7684\u8def\u5f84","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u8bbf\u95ee\u8be5\u8def\u5f84\u65f6\u4f1a\u751f\u6210\u65b0\u7684 token"}),"\n",(0,s.jsx)(n.li,{children:"\u540c\u65f6\u8bbe\u7f6e\u540c\u540d\u7684 cookie\uff0c\u542f\u7528 SameSite \u4fdd\u62a4"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ttl"}),": token \u7684\u6709\u6548\u671f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"step"}),": \u63d2\u4ef6\u6267\u884c\u65f6\u673a\uff0c\u4ec5\u652f\u6301 ",(0,s.jsx)(n.code,{children:"request"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5de5\u4f5c\u6d41\u7a0b-1",children:"\u5de5\u4f5c\u6d41\u7a0b"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u83b7\u53d6 token:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u5ba2\u6237\u7aef\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"token_path"})," \u914d\u7f6e\u7684\u8def\u5f84"]}),"\n",(0,s.jsx)(n.li,{children:"\u670d\u52a1\u5668\u751f\u6210 token \u5e76\u8bbe\u7f6e\u5230 cookie \u4e2d"}),"\n",(0,s.jsx)(n.li,{children:"cookie \u8bbe\u7f6e\u4e3a SameSite \u6a21\u5f0f\u4ee5\u589e\u5f3a\u5b89\u5168\u6027"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u8bf7\u6c42\u9a8c\u8bc1:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5ba2\u6237\u7aef\u5728\u8bf7\u6c42\u5934\u4e2d\u643a\u5e26 token"}),"\n",(0,s.jsx)(n.li,{children:"\u670d\u52a1\u5668\u6bd4\u5bf9\u8bf7\u6c42\u5934\u548c cookie \u4e2d\u7684 token"}),"\n",(0,s.jsx)(n.li,{children:"\u82e5\u4e0d\u4e00\u81f4\u5219\u62d2\u7edd\u8bf7\u6c42"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Csrf",src:i(8588).A+"",width:"1982",height:"1062"})}),"\n",(0,s.jsx)(n.h2,{id:"cors",children:"CORS"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b\u8de8\u57df\u8d44\u6e90\u5171\u4eab(Cross-Origin Resource Sharing)\u914d\u7f6e\u529f\u80fd\uff0c\u7528\u4e8e\u63a7\u5236\u6d4f\u89c8\u5668\u8de8\u57df\u8bbf\u95ee\u7b56\u7565\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u5728",(0,s.jsx)(n.code,{children:"request"}),"\u9636\u6bb5\u6267\u884c\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-17",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.cors]\nallow_credentials = true\nallow_headers = "Content-Type, X-User-Id"\nallow_methods = "GET, POST, OPTIONS"\nallow_origin = "$http_origin"\ncategory = "cors"\nexpose_headers = "Content-Type, X-Device"\nmax_age = "1h"\npath = "^/api"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-19",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"allow_origin"}),": \u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684\u6e90","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u53ef\u4ee5\u6307\u5b9a\u5177\u4f53\u57df\u540d\uff0c\u5982 ",(0,s.jsx)(n.code,{children:"https://example.com"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u8bbe\u7f6e\u4e3a ",(0,s.jsx)(n.code,{children:"$http_origin"})," \u8868\u793a\u5141\u8bb8\u8bf7\u6c42\u6765\u6e90\uff0c\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5efa\u8bae\u660e\u786e\u6307\u5b9a\u5141\u8bb8\u7684\u57df\u540d\u5217\u8868\uff0c\u4e0d\u5efa\u8bae\u76f4\u63a5\u4f7f\u7528",(0,s.jsx)(n.code,{children:"*"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"allow_credentials"}),": \u662f\u5426\u5141\u8bb8\u643a\u5e26\u8ba4\u8bc1\u4fe1\u606f","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5305\u62ec Cookie\u3001HTTP \u8ba4\u8bc1\u53ca\u5ba2\u6237\u7aef SSL \u8bc1\u4e66"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"allow_methods"}),": \u5141\u8bb8\u7684 HTTP \u8bf7\u6c42\u65b9\u6cd5","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u591a\u4e2a\u65b9\u6cd5\u7528\u9017\u53f7\u5206\u9694\uff0c\u5982 ",(0,s.jsx)(n.code,{children:"GET, POST, OPTIONS"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"allow_headers"}),": \u5141\u8bb8\u7684\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\uff0c\u82e5\u4e0d\u8bbe\u7f6e\u5219\u9ed8\u8ba4\u6240\u6709","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u591a\u4e2a\u8bf7\u6c42\u5934\u7528\u9017\u53f7\u5206\u9694"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"expose_headers"}),": \u5141\u8bb8\u6d4f\u89c8\u5668\u8bbf\u95ee\u7684\u54cd\u5e94\u5934","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6d4f\u89c8\u5668\u53ea\u80fd\u8bbf\u95ee\u57fa\u672c\u54cd\u5e94\u5934"}),"\n",(0,s.jsx)(n.li,{children:"\u901a\u8fc7\u6b64\u53c2\u6570\u53ef\u4ee5\u66b4\u9732\u81ea\u5b9a\u4e49\u54cd\u5e94\u5934"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"max_age"}),": \u9884\u68c0\u8bf7\u6c42\u7ed3\u679c\u7684\u7f13\u5b58\u65f6\u95f4"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"}),": CORS \u914d\u7f6e\u751f\u6548\u7684\u8def\u5f84\u8303\u56f4","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5b89\u5168\u5efa\u8bae",children:"\u5b89\u5168\u5efa\u8bae"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u907f\u514d\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"$http_origin"}),"\uff0c\u5e94\u660e\u786e\u6307\u5b9a\u5141\u8bb8\u7684\u57df\u540d"]}),"\n",(0,s.jsx)(n.li,{children:"\u4ec5\u914d\u7f6e\u5fc5\u8981\u7684\u8bf7\u6c42\u65b9\u6cd5\u548c\u8bf7\u6c42\u5934"}),"\n",(0,s.jsxs)(n.li,{children:["\u8c28\u614e\u914d\u7f6e ",(0,s.jsx)(n.code,{children:"allow_credentials"}),"\uff0c\u53ef\u80fd\u5e26\u6765\u5b89\u5168\u98ce\u9669"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5408\u7406\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"max_age"})," \u4ee5\u5e73\u8861\u6027\u80fd\u548c\u5b89\u5168\u6027"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Cors",src:i(4577).A+"",width:"1980",height:"1392"})}),"\n",(0,s.jsx)(n.h2,{id:"responseheaders",children:"ResponseHeaders"}),"\n",(0,s.jsxs)(n.p,{children:["\u63d0\u4f9b HTTP \u54cd\u5e94\u5934\u7684\u7ba1\u7406\u529f\u80fd\uff0c\u652f\u6301\u6dfb\u52a0\u3001\u8bbe\u7f6e\u548c\u5220\u9664\u54cd\u5e94\u5934\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"response"}),"\u9636\u6bb5\u3002\u652f\u6301\u4f7f\u7528\u53d8\u91cf\u5f15\u7528:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$hostname"}),": \u5f15\u7528\u670d\u52a1\u5668\u4e3b\u673a\u540d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$\u53d8\u91cf\u540d"}),": \u5f15\u7528\u73af\u5883\u53d8\u91cf\u503c"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u793a\u4f8b-18",children:"\u914d\u7f6e\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[plugins.commonResponseHeaders]\nadd_headers = ["X-Server:pingap"]\ncategory = "response_headers"\nremove_headers = ["X-User"]\nset_headers = ["X-Response-Id:123"]\nrename_headers = ["x-old-header:x-new-header"]\nset_headers_not_exists = ["x-server-ip:192.168.1.1"]\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-20",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"add_headers"}),": \u9700\u8981\u6dfb\u52a0\u7684\u54cd\u5e94\u5934","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e0d\u4f1a\u8986\u76d6\u5df2\u5b58\u5728\u7684\u540c\u540d\u54cd\u5e94\u5934"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"set_headers"}),": \u9700\u8981\u8bbe\u7f6e\u7684\u54cd\u5e94\u5934","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4f1a\u8986\u76d6\u5df2\u5b58\u5728\u7684\u540c\u540d\u54cd\u5e94\u5934"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"remove_headers"}),": \u9700\u8981\u5220\u9664\u7684\u54cd\u5e94\u5934","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5220\u9664\u6307\u5b9a\u540d\u79f0\u7684\u54cd\u5e94\u5934"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rename_headers"}),": \u9700\u8981\u91cd\u547d\u540d\u7684\u54cd\u5e94\u5934"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"set_headers_not_exists"}),": \u5982\u679c\u54cd\u5e94\u5934\u4e0d\u5b58\u5728\u624d\u8bbe\u7f6e"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6267\u884c\u987a\u5e8f",children:"\u6267\u884c\u987a\u5e8f"}),"\n",(0,s.jsx)(n.p,{children:"\u64cd\u4f5c\u6309\u4ee5\u4e0b\u987a\u5e8f\u6267\u884c:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"add_headers"}),": \u6dfb\u52a0\u65b0\u7684\u54cd\u5e94\u5934"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"remove_headers"}),": \u5220\u9664\u6307\u5b9a\u7684\u54cd\u5e94\u5934"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"set_headers"}),": \u8bbe\u7f6e(\u8986\u76d6)\u54cd\u5e94\u5934"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rename_headers"}),": \u91cd\u547d\u540d\u54cd\u5e94\u5934"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"set_headers_not_exists"}),": \u8bbe\u7f6e\u4e0d\u5b58\u5728\u7684\u54cd\u5e94\u5934"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u8bf4\u660e-4",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u6839\u636e\u9700\u8981\u914d\u7f6e\u8981\u6dfb\u52a0\u3001\u8bbe\u7f6e\u6216\u5220\u9664\u7684\u54cd\u5e94\u5934"}),"\n",(0,s.jsx)(n.li,{children:"\u6bcf\u4e2a\u914d\u7f6e\u9879\u90fd\u662f\u53ef\u9009\u7684\uff0c\u4e0d\u9700\u8981\u7684\u53ef\u4ee5\u4e0d\u8bbe\u7f6e"}),"\n",(0,s.jsxs)(n.li,{children:["\u54cd\u5e94\u5934\u7684\u503c\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$hostname"})," \u83b7\u53d6\u670d\u52a1\u5668\u4e3b\u673a\u540d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$VARIABLE_NAME"})," \u83b7\u53d6\u73af\u5883\u53d8\u91cf\u503c"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Pingap Plugin Response Headers",src:i(8886).A+"",width:"1976",height:"1250"})}),"\n",(0,s.jsx)(n.h2,{id:"subfilter",children:"SubFilter"}),"\n",(0,s.jsxs)(n.p,{children:["\u652f\u6301\u5e38\u89c4\u6216\u6b63\u5219\u5f62\u5f0f\u7684\u6587\u672c\u5339\u914d\uff0c\u7528\u4e8e\u66ff\u6362http\u7684\u54cd\u5e94\u5185\u5bb9\uff0c\u8be5\u63d2\u4ef6\u56fa\u5b9a\u6267\u884c\u5728",(0,s.jsx)(n.code,{children:"response"}),"\u9636\u6bb5\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:"[plugins.textReplace]\ncategory = \"sub_filter\"\nfilters = [\n    \"subs_filter 'mobile' 'Mobile' ig\",\n    \"sub_filter 'online' 'ONLINE'\",\n]\npath = \"^/api/\"\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570-21",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"path"}),": \u5339\u914d\u9700\u8981\u5bf9\u54cd\u5e94\u6539\u9020\u7684\u8def\u5f84\uff0c\u6309\u6b63\u5219\u5339\u914d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"filters"}),": \u914d\u7f6e\u5185\u5bb9\u66ff\u6362\u89c4\u5219\uff0c\u53ef\u4ee5\u914d\u7f6e\u591a\u6761\u89c4\u5219\uff0c\u652f\u6301\u4e24\u79cd\u7c7b\u578b","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"subs_filter"}),": \u6b63\u5219\u5339\u914d\u66ff\u6362\u6a21\u5f0f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"sub_filter"}),": \u666e\u901a\u6587\u672c\u66ff\u6362\u6a21\u5f0f"]}),"\n"]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(j,{...e})}):j(e)}},8761:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-admin-7b7f00d541be19f4f937de40455e549a.jpg"},1207:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-basic-auth-b82d10df2c920a3dc48fe43663b4c775.jpg"},5430:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-cache-3521d7ea6c9e8e7f9fe0dd9a5f41810a.jpg"},2890:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-compression-5b4c2d60570f33ea2bc289ed1ee0a215.jpg"},4577:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-cors-5d47a63ecbbd547499a4e1f246b14de9.jpg"},8588:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-csrf-41d4179053152b208abb8bc829ba3e36.jpg"},2809:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-directory-9d893ef23a6f62735ac1fec859372023.jpg"},5588:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-ip-restriction-422c90c9ffe03bd8391a44a873f34e9d.jpg"},3588:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-jwt-9c8b576d7298c6ad5299e1e89bebf90b.jpg"},8558:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-key-auth-debf3560dc2c102e574de9cb7946562a.jpg"},4925:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-limit-65becc584e8ba4f355fc3478c2fe4167.jpg"},116:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-mock-1a6527a151e843a0829a681e03530032.jpg"},8154:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-redirect-https-645046ed833d3919e9c0ee356080916e.jpg"},1754:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-referer-restriction-0614ca00ede446f45ca56f5dacf5158b.jpg"},8397:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-request-id-90c58507972a8f17fd31be1f21878998.jpg"},8886:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-response-headers-eceba3cc3c0dfa694a9cdd4146060020.jpg"},3853:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-stats-5ff87bc9937068be03763c8e278d2a57.jpg"},129:(e,n,i)=>{i.d(n,{A:()=>l});const l=i.p+"assets/images/plugin-ua-restriction-1c88d52d40cf96ab5822190cbf5a86e3.jpg"}}]);