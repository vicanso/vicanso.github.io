"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[5412],{8233:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"argument","title":"\u547d\u4ee4\u884c\u53c2\u6570","description":"Pingap\u7684\u5927\u90e8\u5206\u53c2\u6570\u5747\u662ftoml\u914d\u7f6e\u6587\u4ef6\u6765\u6307\u5b9a\uff0c\u800c\u6709\u4e00\u4e9b\u53c2\u6570\u5219\u662f\u9700\u8981\u5728\u542f\u52a8\u7a0b\u5e8f\u65f6\u6307\u5b9a\u7684\uff0c\u5177\u4f53\u5982\u4e0b\uff1a","source":"@site/docs/argument.md","sourceDirName":".","slug":"/argument","permalink":"/pingap-zh/docs/argument","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/argument.md","tags":[],"version":"current","sidebarPosition":21,"frontMatter":{"sidebar_position":21},"sidebar":"tutorialSidebar","previous":{"title":"\u5165\u95e8\u6559\u7a0b","permalink":"/pingap-zh/docs/getting_started"},"next":{"title":"\u914d\u7f6e\u8bf4\u660e","permalink":"/pingap-zh/docs/config"}}');var d=c(4848),i=c(8453);const r={sidebar_position:21},l="\u547d\u4ee4\u884c\u53c2\u6570",o={},t=[{value:"\u914d\u7f6e\u4ee5\u6587\u4ef6\u5f62\u5f0f\u7684\u542f\u7528\u547d\u4ee4",id:"\u914d\u7f6e\u4ee5\u6587\u4ef6\u5f62\u5f0f\u7684\u542f\u7528\u547d\u4ee4",level:2},{value:"\u914d\u7f6e\u4fdd\u5b58\u5728etcd",id:"\u914d\u7f6e\u4fdd\u5b58\u5728etcd",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"\u547d\u4ee4\u884c\u53c2\u6570",children:"\u547d\u4ee4\u884c\u53c2\u6570"})}),"\n",(0,d.jsx)(n.p,{children:"Pingap\u7684\u5927\u90e8\u5206\u53c2\u6570\u5747\u662ftoml\u914d\u7f6e\u6587\u4ef6\u6765\u6307\u5b9a\uff0c\u800c\u6709\u4e00\u4e9b\u53c2\u6570\u5219\u662f\u9700\u8981\u5728\u542f\u52a8\u7a0b\u5e8f\u65f6\u6307\u5b9a\u7684\uff0c\u5177\u4f53\u5982\u4e0b\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"conf"}),"\u6216\u8005",(0,d.jsx)(n.code,{children:"c"}),": \u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\uff0c\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u6216\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff0c\u5efa\u8bae\u4f7f\u7528\u76ee\u5f55\u7684\u5f62\u5f0f\uff0c\u4fbf\u4e8e\u914d\u7f6e\u6309\u7c7b\u578b\u7ba1\u7406","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5355\u6587\u4ef6\u5f62\u5f0f\uff1a",(0,d.jsx)(n.code,{children:"/opt/pingap/conf/pingap.toml"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u76ee\u5f55\u591a\u6587\u4ef6\u5f62\u5f0f\uff1a",(0,d.jsx)(n.code,{children:"/opt/pingap/conf"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u76ee\u5f55\u5404\u914d\u7f6e\u62c6\u5206\u5f62\u5f0f\uff1a",(0,d.jsx)(n.code,{children:"/opt/pingap/conf?separation"})]}),"\n",(0,d.jsxs)(n.li,{children:["etcd\u5f62\u5f0f\uff1a",(0,d.jsx)(n.code,{children:"etcd://user:password@ip:port/path?timeout=10s&connect_timeout=5s"})]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"daemon"}),"\u6216\u8005",(0,d.jsx)(n.code,{children:"d"}),": \u53ef\u9009\uff0c\u662f\u5426\u6307\u5b9a\u4ee5\u540e\u53f0\u670d\u52a1\u7684\u5f62\u5f0f\u542f\u7528\uff0c\u82e5\u9700\u8981\u4f7f\u7528upgrade\u65e0\u4e2d\u65ad\u5f0f\u52a0\u8f7d\u65b0\u914d\u7f6e\uff0c\u5219\u9700\u8981\u4f7f\u7528\u6b64\u6a21\u5f0f"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"upgrade"}),"\u6216",(0,d.jsx)(n.code,{children:"u"}),": \u53ef\u9009\uff0c\u4ee5\u66f4\u65b0\u7a0b\u5e8f\u6a21\u5f0f\u542f\u7528\uff0c\u6b64\u6a21\u5f0f\u4e0b\u65b0\u7684\u7a0b\u5e8f\u4f1a\u901a\u8fc7unix socket\u63a5\u6536\u539f\u6709\u7684\u7a0b\u5e8f\u7684\u8bf7\u6c42\uff0c\u907f\u514d\u8bf7\u6c42\u4e2d\u65ad\u3002\u6b64\u6a21\u5f0f\u53ea\u5141\u8bb8\u5728",(0,d.jsx)(n.code,{children:"daemon"}),"\u4e0b\u6709\u6548"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"test"}),"\u6216",(0,d.jsx)(n.code,{children:"t"}),": \u53ef\u9009\uff0c\u4ec5\u6d4b\u8bd5\u914d\u7f6e\u662f\u5426\u6b63\u786e"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"log"}),": \u53ef\u9009\uff0c\u6307\u5b9a\u65e5\u5fd7\u8f93\u5165\u76ee\u5f55"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"admin"}),": \u53ef\u9009\uff0c\u914d\u7f6eadmin\u7684\u76d1\u542c\u5730\u5740\uff0c\u5176\u4e2d\u8ba4\u8bc1\u90e8\u5206\u662fbasic auth\uff0c\u82e5\u4e0d\u914d\u7f6e\u5219\u4e0d\u6821\u9a8c\uff0c\u5efa\u8bae\u914d\u7f6e","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["base64\u5f62\u5f0f\uff1a\u8ba4\u8bc1\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528base64\uff0c\u5f62\u5f0f\u4e3a",(0,d.jsx)(n.code,{children:"base64(user:pass)@ip:port"}),"\uff0c\u5982",(0,d.jsx)(n.code,{children:"cGluZ2FwOjEyMzEyMw==@127.0.0.1:3018"})]}),"\n",(0,d.jsxs)(n.li,{children:["\u5e38\u89c4\u5f62\u5f0f\uff1a\u8d26\u53f7\u4e0e\u5bc6\u7801\u5747\u4e3a\u660e\u6587\uff0c\u8fd8\u53ef\u6307\u5b9a\u524d\u7f00\uff0c\u5982",(0,d.jsx)(n.code,{children:"pingap:123123@127.0.0.1:3018/pingap"})]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"cp"}),": \u53ef\u9009\uff0c\u662f\u5426\u4e3a\u63a7\u5236\u9762\u677f\u8282\u70b9\uff0c\u5bf9\u4e8e\u4f7f\u7528etcd\u5b58\u50a8\u914d\u7f6e\u7684\u90e8\u7f72\u4f7f\u7528\uff0c\u8bbe\u7f6e\u540e\u6b64\u8282\u70b9\u53ea\u7528\u4e8e\u914d\u7f6e\u53c2\u6570\uff0c\u907f\u514d\u914d\u7f6e\u6709\u8bef\u5bfc\u81f4\u8282\u70b9\u65e0\u6cd5\u542f\u52a8\uff0c\u5176\u5b83\u8282\u70b9\u5219\u52a0\u8f7d\u5bf9\u5e94\u914d\u7f6e\u8fd0\u884c\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"autorestart"}),"\u6216",(0,d.jsx)(n.code,{children:"a"}),": \u53ef\u9009\uff0c\u662f\u5426\u5728\u914d\u7f6e\u6709\u66f4\u65b0\u65f6\u81ea\u52a8\u91cd\u542f\uff0c\u5efa\u8bae\u4f7f\u7528\u6b64\u65b9\u5f0f\u8fbe\u5230\u51c6\u5b9e\u65f6\u66f4\u65b0\u914d\u7f6e\u7684\u6548\u679c(\u9700\u8981\u5728daemon\u6a21\u5f0f\u4e0b)\uff0c\u5176\u5305\u62ec\u4e86autoreload\u7684\u903b\u8f91"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"autoreload"}),": \u53ef\u9009\uff0c\u662f\u5426\u81ea\u52a8\u66f4\u65b0\u914d\u7f6e\uff0c\u4ec5\u9002\u7528\u4e8eupstream\u3001location\u3001plugin\u4ee5\u53cacertificate\u7684\u914d\u7f6e\u53d8\u66f4\uff0c\u82e5\u7a0b\u5e8f\u57fa\u672c\u53ea\u53d8\u66f4\u6b64\u7c7b\u914d\u7f6e\u53ef\u4ec5\u542f\u7528\u6b64\u53c2\u6570\uff0c\u800c\u975e",(0,d.jsx)(n.code,{children:"autorestart"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"sync"}),": \u53ef\u9009\uff0c\u662f\u5426\u5c06\u5f53\u524d\u914d\u7f6e\u540c\u6b65\u81f3\u5176\u5b83\u5b58\u50a8\uff0c\u9700\u8981\u6ce8\u610f\u6307\u5b9a\u540e\u4ec5\u8fd0\u884c\u540c\u6b65\uff0c\u5b8c\u6210\u540e\u7a0b\u5e8f\u5373\u9000\u51fa"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"template"}),": \u8f93\u5165\u914d\u7f6e\u6a21\u677f\u6587\u4ef6\u5e76\u9000\u51fa"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"\u4e5f\u53ef\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u6307\u5b9a\uff0c\u5bf9\u7167\u5173\u7cfb\u5982\u4e0b\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_CONF"}),": \u7b49\u540c\u4e8e",(0,d.jsx)(n.code,{children:"--conf"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_DAEMON"}),": \u7b49\u540c\u4e8e",(0,d.jsx)(n.code,{children:"--daemon"}),"\uff0c\u53ea\u8981\u6709\u8bbe\u7f6e\u5219\u8868\u793a",(0,d.jsx)(n.code,{children:"true"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_UPGRADE"}),": \u7b49\u540c\u4e8e",(0,d.jsx)(n.code,{children:"--upgrade"}),"\uff0c\u53ea\u8981\u6709\u8bbe\u7f6e\u5219\u8868\u793a",(0,d.jsx)(n.code,{children:"true"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_LOG"}),": ",(0,d.jsx)(n.code,{children:"--log"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_ADMIN_ADDR"}),": \u8bbe\u7f6e\u6307\u5b9a\u7684\u7ba1\u7406\u540e\u53f0\u76d1\u542c\u5730\u5740"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_ADMIN_USER"}),": \u8bbe\u7f6e\u6307\u5b9a\u7684\u7ba1\u7406\u540e\u53f0\u7684\u7528\u6237\u540d(\u9700\u8981\u4e0e\u5bc6\u7801\u4e00\u8d77\u8bbe\u7f6e)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_ADMIN_PASSWORD"}),": \u8bbe\u7f6e\u6307\u5b9a\u7684\u7ba1\u7406\u540e\u53f0\u7684\u7528\u6237\u540d"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_CP"}),": \u7b49\u540c\u4e8e",(0,d.jsx)(n.code,{children:"--cp"}),"\uff0c\u53ea\u8981\u6709\u8bbe\u7f6e\u5219\u8868\u793a",(0,d.jsx)(n.code,{children:"true"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_AUTORESTART"}),": \u7b49\u540c\u4e8e",(0,d.jsx)(n.code,{children:"--autorestart"}),"\uff0c\u53ea\u8981\u6709\u8bbe\u7f6e\u5219\u8868\u793a",(0,d.jsx)(n.code,{children:"true"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"PINGAP_AUTORELOAD"}),": \u7b49\u540c\u4e8e",(0,d.jsx)(n.code,{children:"--autoreload"}),"\uff0c\u53ea\u8981\u6709\u8bbe\u7f6e\u5219\u8868\u793a",(0,d.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u914d\u7f6e\u4ee5\u6587\u4ef6\u5f62\u5f0f\u7684\u542f\u7528\u547d\u4ee4",children:"\u914d\u7f6e\u4ee5\u6587\u4ef6\u5f62\u5f0f\u7684\u542f\u7528\u547d\u4ee4"}),"\n",(0,d.jsxs)(n.p,{children:["\u914d\u7f6e\u76ee\u5f55\u4fdd\u5b58\u5728",(0,d.jsx)(n.code,{children:"/opt/pingap/conf"}),"\uff0c\u914d\u7f6e\u53d8\u66f4\u65f6\u81ea\u52a8\u91cd\u542f\u7a0b\u5e8f\uff0c\u542f\u52a8\u547d\u4ee4\u5982\u4e0b\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"RUST_LOG=INFO pingap \\\n  -c=/opt/pingap/conf -d \\\n  --log=/opt/pingap/pingap.log \\\n  --autorestart -d\n"})}),"\n",(0,d.jsx)(n.h2,{id:"\u914d\u7f6e\u4fdd\u5b58\u5728etcd",children:"\u914d\u7f6e\u4fdd\u5b58\u5728etcd"}),"\n",(0,d.jsx)(n.p,{children:"\u4e00\u822c\u5982\u679c\u662f\u591a\u8282\u70b9\u90e8\u7f72\uff0c\u4e5f\u6709\u73b0\u6210etcd\uff0c\u5efa\u8bae\u4f7f\u7528\u7ba1\u7406\u8282\u70b9\u4e0e\u5e94\u7528\u8282\u70b9\u5206\u79bb\u7684\u5f62\u5f0f\u3002"}),"\n",(0,d.jsx)(n.p,{children:"\u7ba1\u7406\u8282\u70b9\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'RUST_LOG=INFO pingap \\\n  -c="etcd://127.0.0.1:2379/pingap?timeout=10s&connect_timeout=5s&user=pingap&password=123123" \\\n  --cp \\\n  --admin=pingap:123123@127.0.0.1:3018\n'})}),"\n",(0,d.jsxs)(n.p,{children:["etcd\u7684\u8fde\u63a5\u53c2\u6570\uff1a",(0,d.jsx)(n.code,{children:"etcd://ip1:port1,ip2:port2/path?user=xx&password=xx"}),"\u7684\u5f62\u5f0f\uff0c\u9700\u8981\u6ce8\u610f",(0,d.jsx)(n.code,{children:"/path"}),"\u90e8\u5206\u6309\u9700\u8981\u5bf9\u5e94\u4e0d\u540c\u7684\u5e94\u7528\u5b9e\u4f8b\u3002\nadmin\u7684\u914d\u7f6e\u53c2\u6570\uff1apingap:123123\uff0c\u6307\u5b9a\u540e\u8bbf\u95ee\u7ba1\u7406\u540e\u53f0\u4f1a\u4f7f\u7528basic auth\u6821\u9a8c\uff0c\u82e5\u4e0d\u914d\u7f6e\u5219\u65e0\u9700\u6821\u9a8c\uff0c\u5efa\u8bae\u914d\u7f6e\u3002"]}),"\n",(0,d.jsx)(n.p,{children:"\u5e94\u7528\u8282\u70b9\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'RUST_LOG=INFO pingap \\\n  -c="etcd://127.0.0.1:2379/pingap?timeout=10s&connect_timeout=5s&user=pingap&password=123123" \\\n  -d --log=/opt/pingap/pingap.log \\\n  --autorestart\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}}}]);