"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[209],{9979:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>l,default:()=>x,frontMatter:()=>d,metadata:()=>r,toc:()=>o});var c=n(4848),i=n(8453);const d={sidebar_position:61},l="\u65e5\u5fd7\u683c\u5f0f\u5316",r={id:"log",title:"\u65e5\u5fd7\u683c\u5f0f\u5316",description:"Pingap\u683c\u5f0f\u5316\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u51e0\u79cd\u9ed8\u8ba4\u5f62\u5f0fcombined\uff0ccommon\uff0cshort\u4ee5\u53catiny\u3002\u4e5f\u53ef\u81ea\u5b9a\u4e49\u5b8c\u6574\u7684\u65e5\u5fd7\u683c\u5f0f\u5316\u8f93\u51fa\uff0c\u5177\u4f53\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a",source:"@site/docs/log.md",sourceDirName:".",slug:"/log",permalink:"/pingap-zh/docs/log",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/log.md",tags:[],version:"current",sidebarPosition:61,frontMatter:{sidebar_position:61},sidebar:"tutorialSidebar",previous:{title:"Upsteam\u8bf4\u660e",permalink:"/pingap-zh/docs/upstream"},next:{title:"\u63d2\u4ef6\u4f53\u7cfb",permalink:"/pingap-zh/docs/plugin"}},h={},o=[{value:"context",id:"context",level:2}];function t(e){const s={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.h1,{id:"\u65e5\u5fd7\u683c\u5f0f\u5316",children:"\u65e5\u5fd7\u683c\u5f0f\u5316"}),"\n",(0,c.jsxs)(s.p,{children:["Pingap\u683c\u5f0f\u5316\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u51e0\u79cd\u9ed8\u8ba4\u5f62\u5f0f",(0,c.jsx)(s.code,{children:"combined"}),"\uff0c",(0,c.jsx)(s.code,{children:"common"}),"\uff0c",(0,c.jsx)(s.code,{children:"short"}),"\u4ee5\u53ca",(0,c.jsx)(s.code,{children:"tiny"}),"\u3002\u4e5f\u53ef\u81ea\u5b9a\u4e49\u5b8c\u6574\u7684\u65e5\u5fd7\u683c\u5f0f\u5316\u8f93\u51fa\uff0c\u5177\u4f53\u53c2\u6570\u8bf4\u660e\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{host}"}),": \u8bf7\u6c42\u7684host\u5c5e\u6027"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{method}"}),": \u8bf7\u6c42\u7684method"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{path}"}),": \u8bf7\u6c42\u7684\u8def\u5f84"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{proto}"}),": \u534f\u8bae\u7c7b\u578b\uff0c",(0,c.jsx)(s.code,{children:"HTTP/1.1"}),"\u6216",(0,c.jsx)(s.code,{children:"HTTP/2.0"})]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{query}"}),": \u8bf7\u6c42\u7684querystring"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{remote}"}),": \u8bf7\u6c42\u7684\u6e90ip"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{client_ip}"}),": \u5ba2\u6237ip\uff0c\u83b7\u53d6\u7684\u987a\u5e8f\u4e3a",(0,c.jsx)(s.code,{children:"X-Forwarded-For"})," --\x3e ",(0,c.jsx)(s.code,{children:"X-Real-Ip"})," --\x3e ",(0,c.jsx)(s.code,{children:"remote"})]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{scheme}"}),": \u534f\u8bae\u7c7b\u578b\uff0chttps\u6216http"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{uri}"}),": \u8bf7\u6c42\u7684\u5b8c\u6574\u5730\u5740"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{referer}"}),": \u8bf7\u6c42\u5934\u4e2d\u7684referer"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{user_agent}"}),": \u8bf7\u6c42\u7684user-agent"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{when}"}),": \u65e5\u5fd7\u7684\u8f93\u51fa\u65f6\u95f4"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{when_utc_iso}"}),": \u65e5\u5fd7\u7684\u8f93\u51fa\u7684utc\u65f6\u95f4"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{when_unix}"}),": \u65e5\u5fd7\u7684\u8f93\u51fa\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u65f6\u95f4\u6233"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{size}"}),": \u54cd\u5e94\u6570\u636e\u7684\u5b57\u8282\u6570"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{size_human}"}),": \u54cd\u5e94\u6570\u636e\u7684\u5927\u5c0f\uff0c\u6309\u6570\u636e\u5927\u5c0f\u683c\u5f0f\u5316\u5b57\u7b26\u4e32"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{status}"}),": \u54cd\u5e94\u72b6\u6001\u7801"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{latency}"}),": \u54cd\u5e94\u65f6\u95f4\u7684ms"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{latency_human}"}),": \u54cd\u5e94\u65f6\u95f4\uff0c\u6309\u65f6\u95f4\u683c\u5f0f\u5316"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{payload_size}"}),": \u8bf7\u6c42\u6570\u636e\u7684\u5b57\u8282\u5927\u5c0f"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{payload_size_human}"}),": \u8bf7\u6c42\u6570\u636e\u7684\u5927\u5c0f\uff0c\u6309\u6570\u636e\u5927\u5c0f\u683c\u5f0f\u5316\u5b57\u7b26\u4e32"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{request_id}"}),": \u8bf7\u6c42\u7684id\uff0c\u9700\u8981\u6dfb\u52a0\u4e86\u5bf9\u5e94\u7684\u4e2d\u95f4\u4ef6"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{~name}"}),": \u4ececookie\u4e2d\u83b7\u53d6",(0,c.jsx)(s.code,{children:"name"}),"\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u83b7\u53d6cookie\u4e2d\u7684uid\u5219\u662f",(0,c.jsx)(s.code,{children:"{~uid}"})]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{>name}"}),": \u8bf7\u6c42\u5934\u4e2d\u83b7\u53d6",(0,c.jsx)(s.code,{children:"name"}),"\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u83b7\u53d6\u8bf7\u6c42\u5934\u4e2d\u7684",(0,c.jsx)(s.code,{children:"X-User-Id"}),"\u5219\u662f",(0,c.jsx)(s.code,{children:"{>X-User-Id}"})]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{<name}"}),": \u54cd\u5e94\u5934\u4e2d\u83b7\u53d6",(0,c.jsx)(s.code,{children:"name"}),"\u5bf9\u5e94\u7684\u503c\uff0c\u5982\u83b7\u53d6\u54cd\u5e94\u5934\u4e2d\u7684",(0,c.jsx)(s.code,{children:"X-Server"}),"\u5219\u662f",(0,c.jsx)(s.code,{children:"{<X-Server}"})]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{:name}"}),": \u4ececontext\u4e2d\u83b7\u53d6\u5bf9\u5e94\u7684\u503c\uff0c\u652f\u6301\u7684\u5c5e\u6027\u53ef\u53c2\u8003\u540e\u9762\u7684\u8bf4\u660e"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{$name}"}),": \u4ece\u73af\u5883\u53d8\u91cf\u4e2d\u83b7\u53d6",(0,c.jsx)(s.code,{children:"name"}),"\u5bf9\u5e94\u7684\u503c\uff0c\u4ec5\u542f\u52a8\u65f6\u83b7\u53d6\u5bf9\u5e94\u7684\u503c\u540e\u4fdd\u5b58\uff0c\u975e\u5b9e\u65f6\u83b7\u53d6"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"{$hostname}"}),": \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u7684hostname"]}),"\n"]}),"\n",(0,c.jsx)(s.h2,{id:"context",children:"context"}),"\n",(0,c.jsx)(s.p,{children:"\u73b0\u5df2\u652f\u6301\u83b7\u53d6context\u4e2d\u8bb0\u5f55\u7684\u4ee5\u4e0b\u76f8\u5173\u5c5e\u6027\uff1a"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"upstream_reused"}),": \u4e0eupstream\u7684\u8fde\u63a5\u662f\u5426\u4e3a\u590d\u7528\u8bf7\u6c42"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"upstream_addr"}),": \u8fde\u63a5\u7684upstream\u5730\u5740"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"processing"}),": \u8be5\u670d\u52a1\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u8bf7\u6c42\u6570"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"upstream_connect_time"}),": \u8fdeupstream\u7684\u8fde\u63a5\u8017\u65f6(\u5305\u62ectcp\u4e0etls\u8fde\u63a5\uff0c\u82e5\u662f\u8fde\u63a5\u590d\u7528\uff0c\u5219\u503c\u8f83\u5c0f)"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"upstream_tcp_connect_time"}),": \u4e0eupstream\u7684tcp\u8fde\u63a5\u8017\u65f6\uff0c\u82e5\u662f\u8fde\u63a5\u590d\u7528\uff0c\u5219\u4e3aNone"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"upstream_tls_handshake_time"}),": \u4e0eupstream\u7684tls\u8fde\u63a5\u8017\u65f6\uff0c\u82e5\u662f\u8fde\u63a5\u590d\u7528\u6216upstream\u975ehttps\uff0c\u5219\u4e3aNone"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"upstream_connected"}),": \u5f53\u524dlocation\u4e0eupstream\u7684\u8fde\u63a5\u6570"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"upstream_processing_time"}),": upstream\u5904\u7406\u8bf7\u6c42\u7684\u65f6\u957f"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"location"}),": \u5bf9\u5e94\u7684location"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"established"}),": \u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u65f6\u95f4"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"tls_version"}),": tls\u7684\u7248\u672c(http\u8fde\u63a5\u5219\u4e3a\u7a7a)"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"tls_cipher"}),": tls\u7684\u52a0\u89e3\u5bc6\u7b97\u6cd5(http\u8fde\u63a5\u5219\u4e3a\u7a7a)"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"tls_handshake_time"}),": tls\u63e1\u624b\u8017\u65f6"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"compression_time"}),": \u6570\u636e\u538b\u7f29\u7684\u8017\u65f6"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"compression_ratio"}),": \u6570\u636e\u538b\u7f29\u6bd4"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"cache_lookup_time"}),": \u7f13\u5b58\u7684\u67e5\u8be2\u8017\u65f6"]}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"cache_lock_time"}),": \u7f13\u5b58\u7684\u9501\u5b9a\u8017\u65f6"]}),"\n"]})]})}function x(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}}}]);