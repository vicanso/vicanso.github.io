"use strict";(self.webpackChunkpingap=self.webpackChunkpingap||[]).push([[209],{8031:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>r,default:()=>t,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"log","title":"\u65e5\u5fd7\u683c\u5f0f\u5316","description":"Pingap\u63d0\u4f9b\u4e86\u591a\u79cd\u65e5\u5fd7\u683c\u5f0f\u5316\u9009\u9879\uff0c\u5305\u62ec\u4ee5\u4e0b\u9884\u8bbe\u683c\u5f0f\uff1acombined\u3001common\u3001short\u548ctiny\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u81ea\u5b9a\u4e49\u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f\u3002\u652f\u6301\u7684\u53c2\u6570\u5982\u4e0b\uff1a","source":"@site/docs/log.md","sourceDirName":".","slug":"/log","permalink":"/pingap-zh/docs/log","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/log.md","tags":[],"version":"current","sidebarPosition":61,"frontMatter":{"sidebar_position":61},"sidebar":"tutorialSidebar","previous":{"title":"\u914d\u7f6e\u8bf4\u660e","permalink":"/pingap-zh/docs/config"},"next":{"title":"HTTPS \u8bc1\u4e66\u7ba1\u7406","permalink":"/pingap-zh/docs/certificate"}}');var c=s(4848),d=s(8453);const l={sidebar_position:61},r="\u65e5\u5fd7\u683c\u5f0f\u5316",h={},o=[{value:"\u57fa\u7840\u53c2\u6570",id:"\u57fa\u7840\u53c2\u6570",level:2},{value:"\u8bf7\u6c42\u76f8\u5173",id:"\u8bf7\u6c42\u76f8\u5173",level:2},{value:"\u65f6\u95f4\u76f8\u5173",id:"\u65f6\u95f4\u76f8\u5173",level:2},{value:"\u54cd\u5e94\u76f8\u5173",id:"\u54cd\u5e94\u76f8\u5173",level:2},{value:"\u53d8\u91cf\u83b7\u53d6",id:"\u53d8\u91cf\u83b7\u53d6",level:2},{value:"Context\u53c2\u6570",id:"context\u53c2\u6570",level:2},{value:"\u8fde\u63a5\u76f8\u5173",id:"\u8fde\u63a5\u76f8\u5173",level:3},{value:"TLS\u76f8\u5173",id:"tls\u76f8\u5173",level:3},{value:"Upstream\u76f8\u5173",id:"upstream\u76f8\u5173",level:3},{value:"\u6027\u80fd\u6307\u6807",id:"\u6027\u80fd\u6307\u6807",level:3}];function x(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"\u65e5\u5fd7\u683c\u5f0f\u5316",children:"\u65e5\u5fd7\u683c\u5f0f\u5316"})}),"\n",(0,c.jsxs)(n.p,{children:["Pingap\u63d0\u4f9b\u4e86\u591a\u79cd\u65e5\u5fd7\u683c\u5f0f\u5316\u9009\u9879\uff0c\u5305\u62ec\u4ee5\u4e0b\u9884\u8bbe\u683c\u5f0f\uff1a",(0,c.jsx)(n.code,{children:"combined"}),"\u3001",(0,c.jsx)(n.code,{children:"common"}),"\u3001",(0,c.jsx)(n.code,{children:"short"}),"\u548c",(0,c.jsx)(n.code,{children:"tiny"}),"\u3002\u6b64\u5916\uff0c\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u81ea\u5b9a\u4e49\u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f\u3002\u652f\u6301\u7684\u53c2\u6570\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsx)(n.h2,{id:"\u57fa\u7840\u53c2\u6570",children:"\u57fa\u7840\u53c2\u6570"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{host}"}),": \u8bf7\u6c42\u7684\u4e3b\u673a\u540d"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{method}"}),": HTTP\u8bf7\u6c42\u65b9\u6cd5"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{path}"}),": \u8bf7\u6c42\u8def\u5f84"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{proto}"}),": HTTP\u534f\u8bae\u7248\u672c\uff08",(0,c.jsx)(n.code,{children:"HTTP/1.1"}),"\u6216",(0,c.jsx)(n.code,{children:"HTTP/2.0"}),"\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{query}"}),": \u67e5\u8be2\u5b57\u7b26\u4e32"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{remote}"}),": \u8bf7\u6c42\u6e90IP\u5730\u5740"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{client_ip}"}),": \u5ba2\u6237\u7aefIP\uff08\u4f18\u5148\u7ea7\uff1a",(0,c.jsx)(n.code,{children:"X-Forwarded-For"})," > ",(0,c.jsx)(n.code,{children:"X-Real-Ip"})," > ",(0,c.jsx)(n.code,{children:"remote"}),"\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{scheme}"}),": \u534f\u8bae\u7c7b\u578b\uff08http/https\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{uri}"}),": \u5b8c\u6574\u8bf7\u6c42URI"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\u8bf7\u6c42\u76f8\u5173",children:"\u8bf7\u6c42\u76f8\u5173"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{referer}"}),": HTTP Referrer\u5934"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{user_agent}"}),": User-Agent\u5934"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{request_id}"}),": \u8bf7\u6c42ID\uff08\u9700\u914d\u7f6e\u76f8\u5e94\u4e2d\u95f4\u4ef6\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{payload_size}"}),": \u8bf7\u6c42\u4f53\u5927\u5c0f\uff08\u5b57\u8282\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{payload_size_human}"}),": \u8bf7\u6c42\u4f53\u5927\u5c0f\uff08\u4eba\u7c7b\u53ef\u8bfb\u683c\u5f0f\uff09"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\u65f6\u95f4\u76f8\u5173",children:"\u65f6\u95f4\u76f8\u5173"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{when}"}),": \u65e5\u5fd7\u8bb0\u5f55\u65f6\u95f4"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{when_utc_iso}"}),": UTC\u683c\u5f0f\u7684\u65e5\u5fd7\u65f6\u95f4"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{when_unix}"}),": Unix\u65f6\u95f4\u6233\u683c\u5f0f"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{latency}"}),": \u54cd\u5e94\u65f6\u95f4\uff08\u6beb\u79d2\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{latency_human}"}),": \u54cd\u5e94\u65f6\u95f4\uff08\u4eba\u7c7b\u53ef\u8bfb\u683c\u5f0f\uff09"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\u54cd\u5e94\u76f8\u5173",children:"\u54cd\u5e94\u76f8\u5173"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{size}"}),": \u54cd\u5e94\u4f53\u5927\u5c0f\uff08\u5b57\u8282\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{size_human}"}),": \u54cd\u5e94\u4f53\u5927\u5c0f\uff08\u4eba\u7c7b\u53ef\u8bfb\u683c\u5f0f\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{status}"}),": HTTP\u72b6\u6001\u7801"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\u53d8\u91cf\u83b7\u53d6",children:"\u53d8\u91cf\u83b7\u53d6"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{~name}"}),": \u83b7\u53d6Cookie\u503c\uff08\u4f8b\uff1a",(0,c.jsx)(n.code,{children:"{~uid}"}),"\u83b7\u53d6cookie\u4e2d\u7684uid\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{>name}"}),": \u83b7\u53d6\u8bf7\u6c42\u5934\u503c\uff08\u4f8b\uff1a",(0,c.jsx)(n.code,{children:"{>X-User-Id}"}),"\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{<name}"}),": \u83b7\u53d6\u54cd\u5e94\u5934\u503c\uff08\u4f8b\uff1a",(0,c.jsx)(n.code,{children:"{<X-Server}"}),"\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{:name}"}),": \u83b7\u53d6Context\u4e2d\u7684\u503c\uff08\u89c1\u4e0b\u65b9Context\u90e8\u5206\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{$name}"}),": \u83b7\u53d6\u73af\u5883\u53d8\u91cf\u503c\uff08\u542f\u52a8\u65f6\u83b7\u53d6\u5e76\u7f13\u5b58\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"{$hostname}"}),": \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u4e3b\u673a\u540d"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"context\u53c2\u6570",children:"Context\u53c2\u6570"}),"\n",(0,c.jsx)(n.p,{children:"Context\u4e2d\u53ef\u83b7\u53d6\u7684\u5c5e\u6027\u5305\u62ec\uff1a"}),"\n",(0,c.jsx)(n.h3,{id:"\u8fde\u63a5\u76f8\u5173",children:"\u8fde\u63a5\u76f8\u5173"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"connection_id"}),": \u8fde\u63a5ID"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"connection_time"}),": \u8fde\u63a5\u6301\u7eed\u65f6\u95f4"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"connection_reused"}),": \u8fde\u63a5\u662f\u5426\u88ab\u590d\u7528"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"processing"}),": \u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u8bf7\u6c42\u6570"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"service_time"}),": \u8bf7\u6c42\u603b\u5904\u7406\u65f6\u95f4\uff08\u4ece\u63a5\u6536\u5230\u5b8c\u6210\uff09"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"tls\u76f8\u5173",children:"TLS\u76f8\u5173"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"tls_version"}),": TLS\u7248\u672c\uff08HTTP\u8fde\u63a5\u4e3a\u7a7a\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"tls_cipher"}),": TLS\u52a0\u5bc6\u5957\u4ef6\uff08HTTP\u8fde\u63a5\u4e3a\u7a7a\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"tls_handshake_time"}),": TLS\u63e1\u624b\u65f6\u95f4\uff08HTTP\u8fde\u63a5\u4e3a\u7a7a\uff09"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"upstream\u76f8\u5173",children:"Upstream\u76f8\u5173"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"upstream_reused"}),": upstream\u8fde\u63a5\u662f\u5426\u590d\u7528"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"upstream_addr"}),": upstream\u670d\u52a1\u5668\u5730\u5740"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"upstream_connected"}),": \u5f53\u524dlocation\u7684upstream\u8fde\u63a5\u6570"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"upstream_connect_time"}),": upstream\u8fde\u63a5\u65f6\u95f4\uff08\u5305\u542bTCP\u548cTLS\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"upstream_tcp_connect_time"}),": upstream TCP\u8fde\u63a5\u65f6\u95f4\uff08\u590d\u7528\u8fde\u63a5\u65f6\u4e3aNone\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"upstream_tls_handshake_time"}),": upstream TLS\u63e1\u624b\u65f6\u95f4\uff08\u590d\u7528\u8fde\u63a5\u6216\u975eHTTPS\u65f6\u4e3aNone\uff09"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"upstream_processing_time"}),": upstream\u8bf7\u6c42\u5904\u7406\u65f6\u95f4"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"upstream_response_time"}),": upstream\u54cd\u5e94\u65f6\u95f4"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u6027\u80fd\u6307\u6807",children:"\u6027\u80fd\u6307\u6807"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"compression_time"}),": \u538b\u7f29\u8017\u65f6"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"compression_ratio"}),": \u538b\u7f29\u6bd4\u7387"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"cache_lookup_time"}),": \u7f13\u5b58\u67e5\u8be2\u65f6\u95f4"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"cache_lock_time"}),": \u7f13\u5b58\u9501\u5b9a\u65f6\u95f4"]}),"\n"]})]})}function t(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(x,{...e})}):x(e)}}}]);